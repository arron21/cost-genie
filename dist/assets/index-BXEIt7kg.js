(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function j_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Kd={exports:{}},kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function iw(){if(Y0)return kl;Y0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return kl.Fragment=e,kl.jsx=n,kl.jsxs=n,kl}var K0;function sw(){return K0||(K0=1,Kd.exports=iw()),Kd.exports}var v=sw(),Xd={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function aw(){if(X0)return Ne;X0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),x=Symbol.iterator;function R(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,q={};function U(M,ie,de){this.props=M,this.context=ie,this.refs=q,this.updater=de||P}U.prototype.isReactComponent={},U.prototype.setState=function(M,ie){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ie,"setState")},U.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function $(){}$.prototype=U.prototype;function W(M,ie,de){this.props=M,this.context=ie,this.refs=q,this.updater=de||P}var K=W.prototype=new $;K.constructor=W,V(K,U.prototype),K.isPureReactComponent=!0;var Z=Array.isArray,J={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function k(M,ie,de,ue,le,Re){return de=Re.ref,{$$typeof:i,type:M,key:ie,ref:de!==void 0?de:null,props:Re}}function C(M,ie){return k(M.type,ie,void 0,void 0,void 0,M.props)}function b(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function A(M){var ie={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(de){return ie[de]})}var D=/\/+/g;function O(M,ie){return typeof M=="object"&&M!==null&&M.key!=null?A(""+M.key):ie.toString(36)}function N(){}function Ge(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(N,N):(M.status="pending",M.then(function(ie){M.status==="pending"&&(M.status="fulfilled",M.value=ie)},function(ie){M.status==="pending"&&(M.status="rejected",M.reason=ie)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Ce(M,ie,de,ue,le){var Re=typeof M;(Re==="undefined"||Re==="boolean")&&(M=null);var we=!1;if(M===null)we=!0;else switch(Re){case"bigint":case"string":case"number":we=!0;break;case"object":switch(M.$$typeof){case i:case e:we=!0;break;case T:return we=M._init,Ce(we(M._payload),ie,de,ue,le)}}if(we)return le=le(M),we=ue===""?"."+O(M,0):ue,Z(le)?(de="",we!=null&&(de=we.replace(D,"$&/")+"/"),Ce(le,ie,de,"",function(tt){return tt})):le!=null&&(b(le)&&(le=C(le,de+(le.key==null||M&&M.key===le.key?"":(""+le.key).replace(D,"$&/")+"/")+we)),ie.push(le)),1;we=0;var rt=ue===""?".":ue+":";if(Z(M))for(var Pe=0;Pe<M.length;Pe++)ue=M[Pe],Re=rt+O(ue,Pe),we+=Ce(ue,ie,de,Re,le);else if(Pe=R(M),typeof Pe=="function")for(M=Pe.call(M),Pe=0;!(ue=M.next()).done;)ue=ue.value,Re=rt+O(ue,Pe++),we+=Ce(ue,ie,de,Re,le);else if(Re==="object"){if(typeof M.then=="function")return Ce(Ge(M),ie,de,ue,le);throw ie=String(M),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return we}function oe(M,ie,de){if(M==null)return M;var ue=[],le=0;return Ce(M,ue,"","",function(Re){return ie.call(de,Re,le++)}),ue}function ve(M){if(M._status===-1){var ie=M._result;ie=ie(),ie.then(function(de){(M._status===0||M._status===-1)&&(M._status=1,M._result=de)},function(de){(M._status===0||M._status===-1)&&(M._status=2,M._result=de)}),M._status===-1&&(M._status=0,M._result=ie)}if(M._status===1)return M._result.default;throw M._result}var ge=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ae(){}return Ne.Children={map:oe,forEach:function(M,ie,de){oe(M,function(){ie.apply(this,arguments)},de)},count:function(M){var ie=0;return oe(M,function(){ie++}),ie},toArray:function(M){return oe(M,function(ie){return ie})||[]},only:function(M){if(!b(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ne.Component=U,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=W,Ne.StrictMode=s,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,Ne.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ne.cache=function(M){return function(){return M.apply(null,arguments)}},Ne.cloneElement=function(M,ie,de){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ue=V({},M.props),le=M.key,Re=void 0;if(ie!=null)for(we in ie.ref!==void 0&&(Re=void 0),ie.key!==void 0&&(le=""+ie.key),ie)!se.call(ie,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ie.ref===void 0||(ue[we]=ie[we]);var we=arguments.length-2;if(we===1)ue.children=de;else if(1<we){for(var rt=Array(we),Pe=0;Pe<we;Pe++)rt[Pe]=arguments[Pe+2];ue.children=rt}return k(M.type,le,void 0,void 0,Re,ue)},Ne.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Ne.createElement=function(M,ie,de){var ue,le={},Re=null;if(ie!=null)for(ue in ie.key!==void 0&&(Re=""+ie.key),ie)se.call(ie,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(le[ue]=ie[ue]);var we=arguments.length-2;if(we===1)le.children=de;else if(1<we){for(var rt=Array(we),Pe=0;Pe<we;Pe++)rt[Pe]=arguments[Pe+2];le.children=rt}if(M&&M.defaultProps)for(ue in we=M.defaultProps,we)le[ue]===void 0&&(le[ue]=we[ue]);return k(M,Re,void 0,void 0,null,le)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(M){return{$$typeof:m,render:M}},Ne.isValidElement=b,Ne.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:ve}},Ne.memo=function(M,ie){return{$$typeof:p,type:M,compare:ie===void 0?null:ie}},Ne.startTransition=function(M){var ie=J.T,de={};J.T=de;try{var ue=M(),le=J.S;le!==null&&le(de,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Ae,ge)}catch(Re){ge(Re)}finally{J.T=ie}},Ne.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},Ne.use=function(M){return J.H.use(M)},Ne.useActionState=function(M,ie,de){return J.H.useActionState(M,ie,de)},Ne.useCallback=function(M,ie){return J.H.useCallback(M,ie)},Ne.useContext=function(M){return J.H.useContext(M)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(M,ie){return J.H.useDeferredValue(M,ie)},Ne.useEffect=function(M,ie){return J.H.useEffect(M,ie)},Ne.useId=function(){return J.H.useId()},Ne.useImperativeHandle=function(M,ie,de){return J.H.useImperativeHandle(M,ie,de)},Ne.useInsertionEffect=function(M,ie){return J.H.useInsertionEffect(M,ie)},Ne.useLayoutEffect=function(M,ie){return J.H.useLayoutEffect(M,ie)},Ne.useMemo=function(M,ie){return J.H.useMemo(M,ie)},Ne.useOptimistic=function(M,ie){return J.H.useOptimistic(M,ie)},Ne.useReducer=function(M,ie,de){return J.H.useReducer(M,ie,de)},Ne.useRef=function(M){return J.H.useRef(M)},Ne.useState=function(M){return J.H.useState(M)},Ne.useSyncExternalStore=function(M,ie,de){return J.H.useSyncExternalStore(M,ie,de)},Ne.useTransition=function(){return J.H.useTransition()},Ne.version="19.0.0",Ne}var W0;function Hm(){return W0||(W0=1,Xd.exports=aw()),Xd.exports}var z=Hm();const Wi=j_(z);var Wd={exports:{}},Ol={},Zd={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function ow(){return Z0||(Z0=1,function(i){function e(oe,ve){var ge=oe.length;oe.push(ve);e:for(;0<ge;){var Ae=ge-1>>>1,M=oe[Ae];if(0<o(M,ve))oe[Ae]=ve,oe[ge]=M,ge=Ae;else break e}}function n(oe){return oe.length===0?null:oe[0]}function s(oe){if(oe.length===0)return null;var ve=oe[0],ge=oe.pop();if(ge!==ve){oe[0]=ge;e:for(var Ae=0,M=oe.length,ie=M>>>1;Ae<ie;){var de=2*(Ae+1)-1,ue=oe[de],le=de+1,Re=oe[le];if(0>o(ue,ge))le<M&&0>o(Re,ue)?(oe[Ae]=Re,oe[le]=ge,Ae=le):(oe[Ae]=ue,oe[de]=ge,Ae=de);else if(le<M&&0>o(Re,ge))oe[Ae]=Re,oe[le]=ge,Ae=le;else break e}}return ve}function o(oe,ve){var ge=oe.sortIndex-ve.sortIndex;return ge!==0?ge:oe.id-ve.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var g=[],p=[],T=1,x=null,R=3,P=!1,V=!1,q=!1,U=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function K(oe){for(var ve=n(p);ve!==null;){if(ve.callback===null)s(p);else if(ve.startTime<=oe)s(p),ve.sortIndex=ve.expirationTime,e(g,ve);else break;ve=n(p)}}function Z(oe){if(q=!1,K(oe),!V)if(n(g)!==null)V=!0,Ge();else{var ve=n(p);ve!==null&&Ce(Z,ve.startTime-oe)}}var J=!1,se=-1,k=5,C=-1;function b(){return!(i.unstable_now()-C<k)}function A(){if(J){var oe=i.unstable_now();C=oe;var ve=!0;try{e:{V=!1,q&&(q=!1,$(se),se=-1),P=!0;var ge=R;try{t:{for(K(oe),x=n(g);x!==null&&!(x.expirationTime>oe&&b());){var Ae=x.callback;if(typeof Ae=="function"){x.callback=null,R=x.priorityLevel;var M=Ae(x.expirationTime<=oe);if(oe=i.unstable_now(),typeof M=="function"){x.callback=M,K(oe),ve=!0;break t}x===n(g)&&s(g),K(oe)}else s(g);x=n(g)}if(x!==null)ve=!0;else{var ie=n(p);ie!==null&&Ce(Z,ie.startTime-oe),ve=!1}}break e}finally{x=null,R=ge,P=!1}ve=void 0}}finally{ve?D():J=!1}}}var D;if(typeof W=="function")D=function(){W(A)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,N=O.port2;O.port1.onmessage=A,D=function(){N.postMessage(null)}}else D=function(){U(A,0)};function Ge(){J||(J=!0,D())}function Ce(oe,ve){se=U(function(){oe(i.unstable_now())},ve)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(oe){oe.callback=null},i.unstable_continueExecution=function(){V||P||(V=!0,Ge())},i.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<oe?Math.floor(1e3/oe):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_getFirstCallbackNode=function(){return n(g)},i.unstable_next=function(oe){switch(R){case 1:case 2:case 3:var ve=3;break;default:ve=R}var ge=R;R=ve;try{return oe()}finally{R=ge}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(oe,ve){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ge=R;R=oe;try{return ve()}finally{R=ge}},i.unstable_scheduleCallback=function(oe,ve,ge){var Ae=i.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ae+ge:Ae):ge=Ae,oe){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ge+M,oe={id:T++,callback:ve,priorityLevel:oe,startTime:ge,expirationTime:M,sortIndex:-1},ge>Ae?(oe.sortIndex=ge,e(p,oe),n(g)===null&&oe===n(p)&&(q?($(se),se=-1):q=!0,Ce(Z,ge-Ae))):(oe.sortIndex=M,e(g,oe),V||P||(V=!0,Ge())),oe},i.unstable_shouldYield=b,i.unstable_wrapCallback=function(oe){var ve=R;return function(){var ge=R;R=ve;try{return oe.apply(this,arguments)}finally{R=ge}}}}(Jd)),Jd}var J0;function lw(){return J0||(J0=1,Zd.exports=ow()),Zd.exports}var em={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function uw(){if(ev)return $t;ev=1;var i=Hm();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,T){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:p,implementation:T}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$t.createPortal=function(g,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,T)},$t.flushSync=function(g){var p=f.T,T=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=p,s.p=T,s.d.f()}},$t.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},$t.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},$t.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var T=p.as,x=m(T,p.crossOrigin),R=typeof p.integrity=="string"?p.integrity:void 0,P=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:R,fetchPriority:P}):T==="script"&&s.d.X(g,{crossOrigin:x,integrity:R,fetchPriority:P,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},$t.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},$t.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,x=m(T,p.crossOrigin);s.d.L(g,T,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},$t.preloadModule=function(g,p){if(typeof g=="string")if(p){var T=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},$t.requestFormReset=function(g){s.d.r(g)},$t.unstable_batchedUpdates=function(g,p){return g(p)},$t.useFormState=function(g,p,T){return f.H.useFormState(g,p,T)},$t.useFormStatus=function(){return f.H.useHostTransitionStatus()},$t.version="19.0.0",$t}var tv;function cw(){if(tv)return em.exports;tv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),em.exports=uw(),em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function hw(){if(nv)return Ol;nv=1;var i=lw(),e=Hm(),n=cw();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var u=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),P=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),Z=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function se(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function C(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case g:return"Fragment";case m:return"Portal";case T:return"Profiler";case p:return"StrictMode";case q:return"Suspense";case U:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P:return(t.displayName||"Context")+".Provider";case R:return(t._context.displayName||"Context")+".Consumer";case V:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return r=t.displayName||null,r!==null?r:C(t.type)||"Memo";case W:r=t._payload,t=t._init;try{return C(t(r))}catch{}}return null}var b=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=Object.assign,D,O;function N(t){if(D===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||"",O=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+D+t+O}var Ge=!1;function Ce(t,r){if(!t||Ge)return"";Ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Y){var G=Y}Reflect.construct(t,[],re)}else{try{re.call()}catch(Y){G=Y}t.call(re.prototype)}}else{try{throw Error()}catch(Y){G=Y}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],w=d[1];if(E&&w){var I=E.split(`
`),j=w.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===j.length)for(l=I.length-1,h=j.length-1;1<=l&&0<=h&&I[l]!==j[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==j[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==j[h]){var X=`
`+I[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{Ge=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?N(a):""}function oe(t){switch(t.tag){case 26:case 27:case 5:return N(t.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return t=Ce(t.type,!1),t;case 11:return t=Ce(t.type.render,!1),t;case 1:return t=Ce(t.type,!0),t;default:return""}}function ve(t){try{var r="";do r+=oe(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ge(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function Ae(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function M(t){if(ge(t)!==t)throw Error(s(188))}function ie(t){var r=t.alternate;if(!r){if(r=ge(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return M(h),t;if(d===l)return M(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var E=!1,w=h.child;w;){if(w===a){E=!0,a=h,l=d;break}if(w===l){E=!0,l=h,a=d;break}w=w.sibling}if(!E){for(w=d.child;w;){if(w===a){E=!0,a=d,l=h;break}if(w===l){E=!0,l=d,a=h;break}w=w.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function de(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=de(t),r!==null)return r;t=t.sibling}return null}var ue=Array.isArray,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},we=[],rt=-1;function Pe(t){return{current:t}}function tt(t){0>rt||(t.current=we[rt],we[rt]=null,rt--)}function $e(t,r){rt++,we[rt]=t.current,t.current=r}var it=Pe(null),Wt=Pe(null),Zt=Pe(null),ln=Pe(null);function ci(t,r){switch($e(Zt,r),$e(Wt,t),$e(it,null),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?w0(r):0;break;default:if(t=t===8?r.parentNode:r,r=t.tagName,t=t.namespaceURI)t=w0(t),r=S0(t,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}tt(it),$e(it,r)}function wr(){tt(it),tt(Wt),tt(Zt)}function Ro(t){t.memoizedState!==null&&$e(ln,t);var r=it.current,a=S0(r,t.type);r!==a&&($e(Wt,t),$e(it,a))}function la(t){Wt.current===t&&(tt(it),tt(Wt)),ln.current===t&&(tt(ln),Rl._currentValue=Re)}var ua=Object.prototype.hasOwnProperty,ms=i.unstable_scheduleCallback,ca=i.unstable_cancelCallback,Xh=i.unstable_shouldYield,Co=i.unstable_requestPaint,un=i.unstable_now,mu=i.unstable_getCurrentPriorityLevel,bt=i.unstable_ImmediatePriority,Nt=i.unstable_UserBlockingPriority,Sr=i.unstable_NormalPriority,gu=i.unstable_LowPriority,No=i.unstable_IdlePriority,Wh=i.log,gs=i.unstable_setDisableYieldValue,hi=null,Ft=null;function Io(t){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(hi,t,void 0,(t.current.flags&128)===128)}catch{}}function Jn(t){if(typeof Wh=="function"&&gs(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(hi,t)}catch{}}var Jt=Math.clz32?Math.clz32:yu,Do=Math.log,pu=Math.LN2;function yu(t){return t>>>=0,t===0?32:31-(Do(t)/pu|0)|0}var er=128,fi=4194304;function Bn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Sn(t,r){var a=t.pendingLanes;if(a===0)return 0;var l=0,h=t.suspendedLanes,d=t.pingedLanes,E=t.warmLanes;t=t.finishedLanes!==0;var w=a&134217727;return w!==0?(a=w&~h,a!==0?l=Bn(a):(d&=w,d!==0?l=Bn(d):t||(E=w&~E,E!==0&&(l=Bn(E))))):(w=a&~h,w!==0?l=Bn(w):d!==0?l=Bn(d):t||(E=a&~E,E!==0&&(l=Bn(E)))),l===0?0:r!==0&&r!==l&&(r&h)===0&&(h=l&-l,E=r&-r,h>=E||h===32&&(E&4194176)!==0)?r:l}function di(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ha(t,r){switch(t){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(){var t=er;return er<<=1,(er&4194176)===0&&(er=128),t}function mi(){var t=fi;return fi<<=1,(fi&62914560)===0&&(fi=4194304),t}function fa(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function dt(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function vu(t,r,a,l,h,d){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,I=t.expirationTimes,j=t.hiddenUpdates;for(a=E&~a;0<a;){var X=31-Jt(a),re=1<<X;w[X]=0,I[X]=-1;var G=j[X];if(G!==null)for(j[X]=null,X=0;X<G.length;X++){var Y=G[X];Y!==null&&(Y.lane&=-536870913)}a&=~re}l!==0&&gi(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~r))}function gi(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Jt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194218}function pi(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Jt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function _u(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Eu(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:q0(t.type))}function yi(t,r){var a=le.p;try{return le.p=t,r()}finally{le.p=a}}var tr=Math.random().toString(36).slice(2),It="__reactFiber$"+tr,wt="__reactProps$"+tr,xr="__reactContainer$"+tr,ps="__reactEvents$"+tr,da="__reactListeners$"+tr,nr="__reactHandles$"+tr,Oo="__reactResources$"+tr,vi="__reactMarker$"+tr;function ys(t){delete t[It],delete t[wt],delete t[ps],delete t[da],delete t[nr]}function qn(t){var r=t[It];if(r)return r;for(var a=t.parentNode;a;){if(r=a[xr]||a[It]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=R0(t);t!==null;){if(a=t[It])return a;t=R0(t)}return r}t=a,a=t.parentNode}return null}function Ar(t){if(t=t[It]||t[xr]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function _i(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Ei(t){var r=t[Oo];return r||(r=t[Oo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function st(t){t[vi]=!0}var Mo=new Set,ma={};function mn(t,r){cn(t,r),cn(t+"Capture",r)}function cn(t,r){for(ma[t]=r,t=0;t<r.length;t++)Mo.add(r[t])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vo={},Po={};function Tu(t){return ua.call(Po,t)?!0:ua.call(Vo,t)?!1:Zh.test(t)?Po[t]=!0:(Vo[t]=!0,!1)}function Ti(t,r,a){if(Tu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function bi(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function xn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bu(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Jh(t){var r=bu(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function vs(t){t._valueTracker||(t._valueTracker=Jh(t))}function Lo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=bu(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rr=/[\n"\\]/g;function ut(t){return t.replace(Rr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function wi(t,r,a,l,h,d,E,w){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),r!=null?E==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+en(r)):t.value!==""+en(r)&&(t.value=""+en(r)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),r!=null?pa(t,E,en(r)):a!=null?pa(t,E,en(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+en(w):t.removeAttribute("name")}function _s(t,r,a,l,h,d,E,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+en(a):"",r=r!=null?""+en(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function pa(t,r,a){r==="number"&&ga(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function qe(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+en(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Es(t,r,a){if(r!=null&&(r=""+en(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+en(a):""}function Si(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(ue(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=en(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function An(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var ef=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jo(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||ef.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function wu(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&jo(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&jo(t,d,r[d])}function Uo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rr(t){return nf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Rn=null;function ya(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cr=null,Nr=null;function Ir(t){var r=Ar(t);if(r&&(t=r.stateNode)){var a=t[wt]||null;e:switch(t=r.stateNode,r.type){case"input":if(wi(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ut(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[wt]||null;if(!h)throw Error(s(90));wi(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Lo(l)}break e;case"textarea":Es(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&qe(t,!!a.multiple,r,!1)}}}var zo=!1;function Su(t,r,a){if(zo)return t(r,a);zo=!0;try{var l=t(r);return l}finally{if(zo=!1,(Cr!==null||Nr!==null)&&(gc(),Cr&&(r=Cr,t=Nr,Nr=Cr=null,Ir(r),t)))for(r=0;r<t.length;r++)Ir(t[r])}}function Ts(t,r){var a=t.stateNode;if(a===null)return null;var l=a[wt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Cn=!1;if(gn)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){Cn=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{Cn=!1}var ir=null,xi=null,Dr=null;function Bo(){if(Dr)return Dr;var t,r=xi,a=r.length,l,h="value"in ir?ir.value:ir.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&r[a-l]===h[d-l];l++);return Dr=h.slice(t,1<l?1-l:void 0)}function sr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function ar(){return!0}function qo(){return!1}function Dt(t){function r(a,l,h,d,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ar:qo,this.isPropagationStopped=qo,this}return A(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),r}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=Dt(Qe),ws=A({},Qe,{view:0,detail:0}),xu=Dt(ws),_a,Ea,or,Ss=A({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==or&&(or&&t.type==="mousemove"?(_a=t.screenX-or.screenX,Ea=t.screenY-or.screenY):Ea=_a=0,or=t),_a)},movementY:function(t){return"movementY"in t?t.movementY:Ea}}),Nn=Dt(Ss),Au=A({},Ss,{dataTransfer:0}),rf=Dt(Au),xs=A({},ws,{relatedTarget:0}),Ta=Dt(xs),Ho=A({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ba=Dt(Ho),Ru=A({},Qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wa=Dt(Ru),sf=A({},Qe,{data:0}),Fo=Dt(sf),As={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Go(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Nu[t])?!!r[t]:!1}function Rs(){return Go}var Iu=A({},ws,{key:function(t){if(t.key){var r=As[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=sr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(t){return t.type==="keypress"?sr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sa=Dt(Iu),Du=A({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$o=Dt(Du),kr=A({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),ku=Dt(kr),Ou=A({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mu=Dt(Ou),Vu=A({},Ss,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xa=Dt(Vu),tn=A({},Qe,{newState:0,oldState:0}),Pu=Dt(tn),Lu=[9,13,27,32],lr=gn&&"CompositionEvent"in window,c=null;gn&&"documentMode"in document&&(c=document.documentMode);var y=gn&&"TextEvent"in window&&!c,_=gn&&(!lr||c&&8<c&&11>=c),S=" ",H=!1;function Q(t,r){switch(t){case"keyup":return Lu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var je=!1;function St(t,r){switch(t){case"compositionend":return ae(r);case"keypress":return r.which!==32?null:(H=!0,S);case"textInput":return t=r.data,t===S&&H?null:t;default:return null}}function Ue(t,r){if(je)return t==="compositionend"||!lr&&Q(t,r)?(t=Bo(),Dr=xi=ir=null,je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!kt[t.type]:r==="textarea"}function Or(t,r,a,l){Cr?Nr?Nr.push(l):Nr=[l]:Cr=l,r=Ec(r,"onChange"),0<r.length&&(a=new va("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Lt=null,ur=null;function Qo(t){v0(t,0)}function ju(t){var r=_i(t);if(Lo(r))return t}function Qg(t,r){if(t==="change")return r}var Yg=!1;if(gn){var af;if(gn){var of="oninput"in document;if(!of){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),of=typeof Kg.oninput=="function"}af=of}else af=!1;Yg=af&&(!document.documentMode||9<document.documentMode)}function Xg(){Lt&&(Lt.detachEvent("onpropertychange",Wg),ur=Lt=null)}function Wg(t){if(t.propertyName==="value"&&ju(ur)){var r=[];Or(r,ur,t,ya(t)),Su(Qo,r)}}function Mb(t,r,a){t==="focusin"?(Xg(),Lt=r,ur=a,Lt.attachEvent("onpropertychange",Wg)):t==="focusout"&&Xg()}function Vb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ju(ur)}function Pb(t,r){if(t==="click")return ju(r)}function Lb(t,r){if(t==="input"||t==="change")return ju(r)}function jb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var pn=typeof Object.is=="function"?Object.is:jb;function Yo(t,r){if(pn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ua.call(r,h)||!pn(t[h],r[h]))return!1}return!0}function Zg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jg(t,r){var a=Zg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Zg(a)}}function ep(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?ep(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function tp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ga(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ga(t.document)}return r}function lf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Ub(t,r){var a=tp(r);r=t.focusedElem;var l=t.selectionRange;if(a!==r&&r&&r.ownerDocument&&ep(r.ownerDocument.documentElement,r)){if(l!==null&&lf(r)){if(t=l.start,a=l.end,a===void 0&&(a=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(a,r.value.length);else if(a=(t=r.ownerDocument||document)&&t.defaultView||window,a.getSelection){a=a.getSelection();var h=r.textContent.length,d=Math.min(l.start,h);l=l.end===void 0?d:Math.min(l.end,h),!a.extend&&d>l&&(h=l,l=d,d=h),h=Jg(r,d);var E=Jg(r,l);h&&E&&(a.rangeCount!==1||a.anchorNode!==h.node||a.anchorOffset!==h.offset||a.focusNode!==E.node||a.focusOffset!==E.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),a.removeAllRanges(),d>l?(a.addRange(t),a.extend(E.node,E.offset)):(t.setEnd(E.node,E.offset),a.addRange(t)))}}for(t=[],a=r;a=a.parentNode;)a.nodeType===1&&t.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)a=t[r],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var zb=gn&&"documentMode"in document&&11>=document.documentMode,Aa=null,uf=null,Ko=null,cf=!1;function np(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cf||Aa==null||Aa!==ga(l)||(l=Aa,"selectionStart"in l&&lf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ko&&Yo(Ko,l)||(Ko=l,l=Ec(uf,"onSelect"),0<l.length&&(r=new va("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Aa)))}function Cs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ra={animationend:Cs("Animation","AnimationEnd"),animationiteration:Cs("Animation","AnimationIteration"),animationstart:Cs("Animation","AnimationStart"),transitionrun:Cs("Transition","TransitionRun"),transitionstart:Cs("Transition","TransitionStart"),transitioncancel:Cs("Transition","TransitionCancel"),transitionend:Cs("Transition","TransitionEnd")},hf={},rp={};gn&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function Ns(t){if(hf[t])return hf[t];if(!Ra[t])return t;var r=Ra[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in rp)return hf[t]=r[a];return t}var ip=Ns("animationend"),sp=Ns("animationiteration"),ap=Ns("animationstart"),Bb=Ns("transitionrun"),qb=Ns("transitionstart"),Hb=Ns("transitioncancel"),op=Ns("transitionend"),lp=new Map,up="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Hn(t,r){lp.set(t,r),mn(r,[t])}var In=[],Ca=0,ff=0;function Uu(){for(var t=Ca,r=ff=Ca=0;r<t;){var a=In[r];In[r++]=null;var l=In[r];In[r++]=null;var h=In[r];In[r++]=null;var d=In[r];if(In[r++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&cp(a,h,d)}}function zu(t,r,a,l){In[Ca++]=t,In[Ca++]=r,In[Ca++]=a,In[Ca++]=l,ff|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function df(t,r,a,l){return zu(t,r,a,l),Bu(t)}function Ai(t,r){return zu(t,null,null,r),Bu(t)}function cp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;h&&r!==null&&t.tag===3&&(d=t.stateNode,h=31-Jt(a),d=d.hiddenUpdates,t=d[h],t===null?d[h]=[r]:t.push(r),r.lane=a|536870912)}function Bu(t){if(50<El)throw El=0,_d=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Na={},hp=new WeakMap;function Dn(t,r){if(typeof t=="object"&&t!==null){var a=hp.get(t);return a!==void 0?a:(r={value:t,source:r,stack:ve(r)},hp.set(t,r),r)}return{value:t,source:r,stack:ve(r)}}var Ia=[],Da=0,qu=null,Hu=0,kn=[],On=0,Is=null,Mr=1,Vr="";function Ds(t,r){Ia[Da++]=Hu,Ia[Da++]=qu,qu=t,Hu=r}function fp(t,r,a){kn[On++]=Mr,kn[On++]=Vr,kn[On++]=Is,Is=t;var l=Mr;t=Vr;var h=32-Jt(l)-1;l&=~(1<<h),a+=1;var d=32-Jt(r)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,Mr=1<<32-Jt(r)+h|a<<h|l,Vr=d+t}else Mr=1<<d|a<<h|l,Vr=t}function mf(t){t.return!==null&&(Ds(t,1),fp(t,1,0))}function gf(t){for(;t===qu;)qu=Ia[--Da],Ia[Da]=null,Hu=Ia[--Da],Ia[Da]=null;for(;t===Is;)Is=kn[--On],kn[On]=null,Vr=kn[--On],kn[On]=null,Mr=kn[--On],kn[On]=null}var nn=null,jt=null,He=!1,Fn=null,cr=!1,pf=Error(s(519));function ks(t){var r=Error(s(418,""));throw Zo(Dn(r,t)),pf}function dp(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[It]=t,r[wt]=l,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<bl.length;a++)Le(bl[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),_s(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),vs(r);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Si(r,l.value,l.defaultValue,l.children),vs(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||b0(r.textContent,a)?(l.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),l.onScroll!=null&&Le("scroll",r),l.onScrollEnd!=null&&Le("scrollend",r),l.onClick!=null&&(r.onclick=Tc),r=!0):r=!1,r||ks(t)}function mp(t){for(nn=t.return;nn;)switch(nn.tag){case 3:case 27:cr=!0;return;case 5:case 13:cr=!1;return;default:nn=nn.return}}function Xo(t){if(t!==nn)return!1;if(!He)return mp(t),He=!0,!1;var r=!1,a;if((a=t.tag!==3&&t.tag!==27)&&((a=t.tag===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Pd(t.type,t.memoizedProps)),a=!a),a&&(r=!0),r&&jt&&ks(t),mp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){jt=$n(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}jt=null}}else jt=nn?$n(t.stateNode.nextSibling):null;return!0}function Wo(){jt=nn=null,He=!1}function Zo(t){Fn===null?Fn=[t]:Fn.push(t)}var Jo=Error(s(460)),gp=Error(s(474)),yf={then:function(){}};function pp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Fu(){}function yp(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Fu,Fu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,t===Jo?Error(s(483)):t;default:if(typeof r.status=="string")r.then(Fu,Fu);else{if(t=Ze,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,t===Jo?Error(s(483)):t}throw el=r,Jo}}var el=null;function vp(){if(el===null)throw Error(s(459));var t=el;return el=null,t}var ka=null,tl=0;function Gu(t){var r=tl;return tl+=1,ka===null&&(ka=[]),yp(ka,t,r)}function nl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function $u(t,r){throw r.$$typeof===u?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function _p(t){var r=t._init;return r(t._payload)}function Ep(t){function r(B,L){if(t){var F=B.deletions;F===null?(B.deletions=[L],B.flags|=16):F.push(L)}}function a(B,L){if(!t)return null;for(;L!==null;)r(B,L),L=L.sibling;return null}function l(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function h(B,L){return B=ji(B,L),B.index=0,B.sibling=null,B}function d(B,L,F){return B.index=F,t?(F=B.alternate,F!==null?(F=F.index,F<L?(B.flags|=33554434,L):F):(B.flags|=33554434,L)):(B.flags|=1048576,L)}function E(B){return t&&B.alternate===null&&(B.flags|=33554434),B}function w(B,L,F,ee){return L===null||L.tag!==6?(L=hd(F,B.mode,ee),L.return=B,L):(L=h(L,F),L.return=B,L)}function I(B,L,F,ee){var fe=F.type;return fe===g?X(B,L,F.props.children,ee,F.key):L!==null&&(L.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===W&&_p(fe)===L.type)?(L=h(L,F.props),nl(L,F),L.return=B,L):(L=cc(F.type,F.key,F.props,null,B.mode,ee),nl(L,F),L.return=B,L)}function j(B,L,F,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=fd(F,B.mode,ee),L.return=B,L):(L=h(L,F.children||[]),L.return=B,L)}function X(B,L,F,ee,fe){return L===null||L.tag!==7?(L=qs(F,B.mode,ee,fe),L.return=B,L):(L=h(L,F),L.return=B,L)}function re(B,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=hd(""+L,B.mode,F),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case f:return F=cc(L.type,L.key,L.props,null,B.mode,F),nl(F,L),F.return=B,F;case m:return L=fd(L,B.mode,F),L.return=B,L;case W:var ee=L._init;return L=ee(L._payload),re(B,L,F)}if(ue(L)||se(L))return L=qs(L,B.mode,F,null),L.return=B,L;if(typeof L.then=="function")return re(B,Gu(L),F);if(L.$$typeof===P)return re(B,oc(B,L),F);$u(B,L)}return null}function G(B,L,F,ee){var fe=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return fe!==null?null:w(B,L,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case f:return F.key===fe?I(B,L,F,ee):null;case m:return F.key===fe?j(B,L,F,ee):null;case W:return fe=F._init,F=fe(F._payload),G(B,L,F,ee)}if(ue(F)||se(F))return fe!==null?null:X(B,L,F,ee,null);if(typeof F.then=="function")return G(B,L,Gu(F),ee);if(F.$$typeof===P)return G(B,L,oc(B,F),ee);$u(B,F)}return null}function Y(B,L,F,ee,fe){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(F)||null,w(L,B,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case f:return B=B.get(ee.key===null?F:ee.key)||null,I(L,B,ee,fe);case m:return B=B.get(ee.key===null?F:ee.key)||null,j(L,B,ee,fe);case W:var ke=ee._init;return ee=ke(ee._payload),Y(B,L,F,ee,fe)}if(ue(ee)||se(ee))return B=B.get(F)||null,X(L,B,ee,fe,null);if(typeof ee.then=="function")return Y(B,L,F,Gu(ee),fe);if(ee.$$typeof===P)return Y(B,L,F,oc(L,ee),fe);$u(L,ee)}return null}function me(B,L,F,ee){for(var fe=null,ke=null,pe=L,_e=L=0,Vt=null;pe!==null&&_e<F.length;_e++){pe.index>_e?(Vt=pe,pe=null):Vt=pe.sibling;var Fe=G(B,pe,F[_e],ee);if(Fe===null){pe===null&&(pe=Vt);break}t&&pe&&Fe.alternate===null&&r(B,pe),L=d(Fe,L,_e),ke===null?fe=Fe:ke.sibling=Fe,ke=Fe,pe=Vt}if(_e===F.length)return a(B,pe),He&&Ds(B,_e),fe;if(pe===null){for(;_e<F.length;_e++)pe=re(B,F[_e],ee),pe!==null&&(L=d(pe,L,_e),ke===null?fe=pe:ke.sibling=pe,ke=pe);return He&&Ds(B,_e),fe}for(pe=l(pe);_e<F.length;_e++)Vt=Y(pe,B,_e,F[_e],ee),Vt!==null&&(t&&Vt.alternate!==null&&pe.delete(Vt.key===null?_e:Vt.key),L=d(Vt,L,_e),ke===null?fe=Vt:ke.sibling=Vt,ke=Vt);return t&&pe.forEach(function(Gi){return r(B,Gi)}),He&&Ds(B,_e),fe}function Se(B,L,F,ee){if(F==null)throw Error(s(151));for(var fe=null,ke=null,pe=L,_e=L=0,Vt=null,Fe=F.next();pe!==null&&!Fe.done;_e++,Fe=F.next()){pe.index>_e?(Vt=pe,pe=null):Vt=pe.sibling;var Gi=G(B,pe,Fe.value,ee);if(Gi===null){pe===null&&(pe=Vt);break}t&&pe&&Gi.alternate===null&&r(B,pe),L=d(Gi,L,_e),ke===null?fe=Gi:ke.sibling=Gi,ke=Gi,pe=Vt}if(Fe.done)return a(B,pe),He&&Ds(B,_e),fe;if(pe===null){for(;!Fe.done;_e++,Fe=F.next())Fe=re(B,Fe.value,ee),Fe!==null&&(L=d(Fe,L,_e),ke===null?fe=Fe:ke.sibling=Fe,ke=Fe);return He&&Ds(B,_e),fe}for(pe=l(pe);!Fe.done;_e++,Fe=F.next())Fe=Y(pe,B,_e,Fe.value,ee),Fe!==null&&(t&&Fe.alternate!==null&&pe.delete(Fe.key===null?_e:Fe.key),L=d(Fe,L,_e),ke===null?fe=Fe:ke.sibling=Fe,ke=Fe);return t&&pe.forEach(function(rw){return r(B,rw)}),He&&Ds(B,_e),fe}function ft(B,L,F,ee){if(typeof F=="object"&&F!==null&&F.type===g&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case f:e:{for(var fe=F.key;L!==null;){if(L.key===fe){if(fe=F.type,fe===g){if(L.tag===7){a(B,L.sibling),ee=h(L,F.props.children),ee.return=B,B=ee;break e}}else if(L.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===W&&_p(fe)===L.type){a(B,L.sibling),ee=h(L,F.props),nl(ee,F),ee.return=B,B=ee;break e}a(B,L);break}else r(B,L);L=L.sibling}F.type===g?(ee=qs(F.props.children,B.mode,ee,F.key),ee.return=B,B=ee):(ee=cc(F.type,F.key,F.props,null,B.mode,ee),nl(ee,F),ee.return=B,B=ee)}return E(B);case m:e:{for(fe=F.key;L!==null;){if(L.key===fe)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(B,L.sibling),ee=h(L,F.children||[]),ee.return=B,B=ee;break e}else{a(B,L);break}else r(B,L);L=L.sibling}ee=fd(F,B.mode,ee),ee.return=B,B=ee}return E(B);case W:return fe=F._init,F=fe(F._payload),ft(B,L,F,ee)}if(ue(F))return me(B,L,F,ee);if(se(F)){if(fe=se(F),typeof fe!="function")throw Error(s(150));return F=fe.call(F),Se(B,L,F,ee)}if(typeof F.then=="function")return ft(B,L,Gu(F),ee);if(F.$$typeof===P)return ft(B,L,oc(B,F),ee);$u(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(a(B,L.sibling),ee=h(L,F),ee.return=B,B=ee):(a(B,L),ee=hd(F,B.mode,ee),ee.return=B,B=ee),E(B)):a(B,L)}return function(B,L,F,ee){try{tl=0;var fe=ft(B,L,F,ee);return ka=null,fe}catch(pe){if(pe===Jo)throw pe;var ke=Ln(29,pe,null,B.mode);return ke.lanes=ee,ke.return=B,ke}finally{}}}var Os=Ep(!0),Tp=Ep(!1),Oa=Pe(null),Qu=Pe(0);function bp(t,r){t=$r,$e(Qu,t),$e(Oa,r),$r=t|r.baseLanes}function vf(){$e(Qu,$r),$e(Oa,Oa.current)}function _f(){$r=Qu.current,tt(Oa),tt(Qu)}var Mn=Pe(null),hr=null;function Ri(t){var r=t.alternate;$e(At,At.current&1),$e(Mn,t),hr===null&&(r===null||Oa.current!==null||r.memoizedState!==null)&&(hr=t)}function wp(t){if(t.tag===22){if($e(At,At.current),$e(Mn,t),hr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(hr=t)}}else Ci()}function Ci(){$e(At,At.current),$e(Mn,Mn.current)}function Pr(t){tt(Mn),hr===t&&(hr=null),tt(At)}var At=Pe(0);function Yu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Fb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Gb=i.unstable_scheduleCallback,$b=i.unstable_NormalPriority,Rt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ef(){return{controller:new Fb,data:new Map,refCount:0}}function rl(t){t.refCount--,t.refCount===0&&Gb($b,function(){t.controller.abort()})}var il=null,Tf=0,Ma=0,Va=null;function Qb(t,r){if(il===null){var a=il=[];Tf=0,Ma=Rd(),Va={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Tf++,r.then(Sp,Sp),r}function Sp(){if(--Tf===0&&il!==null){Va!==null&&(Va.status="fulfilled");var t=il;il=null,Ma=0,Va=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Yb(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var xp=b.S;b.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Qb(t,r),xp!==null&&xp(t,r)};var Ms=Pe(null);function bf(){var t=Ms.current;return t!==null?t:Ze.pooledCache}function Ku(t,r){r===null?$e(Ms,Ms.current):$e(Ms,r.pool)}function Ap(){var t=bf();return t===null?null:{parent:Rt._currentValue,pool:t}}var Ni=0,Ie=null,Ke=null,pt=null,Xu=!1,Pa=!1,Vs=!1,Wu=0,sl=0,La=null,Kb=0;function mt(){throw Error(s(321))}function wf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!pn(t[a],r[a]))return!1;return!0}function Sf(t,r,a,l,h,d){return Ni=d,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,b.H=t===null||t.memoizedState===null?Ps:Ii,Vs=!1,d=a(l,h),Vs=!1,Pa&&(d=Cp(r,a,l,h)),Rp(t),d}function Rp(t){b.H=fr;var r=Ke!==null&&Ke.next!==null;if(Ni=0,pt=Ke=Ie=null,Xu=!1,sl=0,La=null,r)throw Error(s(300));t===null||Ot||(t=t.dependencies,t!==null&&ac(t)&&(Ot=!0))}function Cp(t,r,a,l){Ie=t;var h=0;do{if(Pa&&(La=null),sl=0,Pa=!1,25<=h)throw Error(s(301));if(h+=1,pt=Ke=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}b.H=Ls,d=r(a,l)}while(Pa);return d}function Xb(){var t=b.H,r=t.useState()[0];return r=typeof r.then=="function"?al(r):r,t=t.useState()[0],(Ke!==null?Ke.memoizedState:null)!==t&&(Ie.flags|=1024),r}function xf(){var t=Wu!==0;return Wu=0,t}function Af(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Rf(t){if(Xu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Xu=!1}Ni=0,pt=Ke=Ie=null,Pa=!1,sl=Wu=0,La=null}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ie.memoizedState=pt=t:pt=pt.next=t,pt}function yt(){if(Ke===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var r=pt===null?Ie.memoizedState:pt.next;if(r!==null)pt=r,Ke=t;else{if(t===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},pt===null?Ie.memoizedState=pt=t:pt=pt.next=t}return pt}var Zu;Zu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function al(t){var r=sl;return sl+=1,La===null&&(La=[]),t=yp(La,t,r),r=Ie,(pt===null?r.memoizedState:pt.next)===null&&(r=r.alternate,b.H=r===null||r.memoizedState===null?Ps:Ii),t}function Ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return al(t);if(t.$$typeof===P)return Gt(t)}throw Error(s(438,String(t)))}function Cf(t){var r=null,a=Ie.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Zu(),Ie.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=Z;return r.index++,a}function Lr(t,r){return typeof r=="function"?r(t):r}function ec(t){var r=yt();return Nf(r,Ke,t)}function Nf(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var w=E=null,I=null,j=r,X=!1;do{var re=j.lane&-536870913;if(re!==j.lane?(ze&re)===re:(Ni&re)===re){var G=j.revertLane;if(G===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),re===Ma&&(X=!0);else if((Ni&G)===G){j=j.next,G===Ma&&(X=!0);continue}else re={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(w=I=re,E=d):I=I.next=re,Ie.lanes|=G,Ui|=G;re=j.action,Vs&&a(d,re),d=j.hasEagerState?j.eagerState:a(d,re)}else G={lane:re,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(w=I=G,E=d):I=I.next=G,Ie.lanes|=re,Ui|=re;j=j.next}while(j!==null&&j!==r);if(I===null?E=d:I.next=w,!pn(d,t.memoizedState)&&(Ot=!0,X&&(a=Va,a!==null)))throw a;t.memoizedState=d,t.baseState=E,t.baseQueue=I,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function If(t){var r=yt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do d=t(d,E.action),E=E.next;while(E!==h);pn(d,r.memoizedState)||(Ot=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function Np(t,r,a){var l=Ie,h=yt(),d=He;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!pn((Ke||h).memoizedState,a);if(E&&(h.memoizedState=a,Ot=!0),h=h.queue,Of(kp.bind(null,l,h,t),[t]),h.getSnapshot!==r||E||pt!==null&&pt.memoizedState.tag&1){if(l.flags|=2048,ja(9,Dp.bind(null,l,h,a,r),{destroy:void 0},null),Ze===null)throw Error(s(349));d||(Ni&60)!==0||Ip(l,r,a)}return a}function Ip(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ie.updateQueue,r===null?(r=Zu(),Ie.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Dp(t,r,a,l){r.value=a,r.getSnapshot=l,Op(r)&&Mp(t)}function kp(t,r,a){return a(function(){Op(r)&&Mp(t)})}function Op(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!pn(t,a)}catch{return!0}}function Mp(t){var r=Ai(t,2);r!==null&&rn(r,t,2)}function Df(t){var r=hn();if(typeof t=="function"){var a=t;if(t=a(),Vs){Jn(!0);try{a()}finally{Jn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:t},r}function Vp(t,r,a,l){return t.baseState=a,Nf(t,Ke,typeof l=="function"?l:Lr)}function Wb(t,r,a,l,h){if(rc(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};b.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,Pp(r,d)):(d.next=a.next,r.pending=a.next=d)}}function Pp(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=b.T,E={};b.T=E;try{var w=a(h,l),I=b.S;I!==null&&I(E,w),Lp(t,r,w)}catch(j){kf(t,r,j)}finally{b.T=d}}else try{d=a(h,l),Lp(t,r,d)}catch(j){kf(t,r,j)}}function Lp(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){jp(t,r,l)},function(l){return kf(t,r,l)}):jp(t,r,a)}function jp(t,r,a){r.status="fulfilled",r.value=a,Up(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Pp(t,a)))}function kf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Up(r),r=r.next;while(r!==l)}t.action=null}function Up(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function zp(t,r){return r}function Bp(t,r){if(He){var a=Ze.formState;if(a!==null){e:{var l=Ie;if(He){if(jt){t:{for(var h=jt,d=cr;h.nodeType!==8;){if(!d){h=null;break t}if(h=$n(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){jt=$n(h.nextSibling),l=h.data==="F!";break e}}ks(l)}l=!1}l&&(r=a[0])}}return a=hn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zp,lastRenderedState:r},a.queue=l,a=sy.bind(null,Ie,l),l.dispatch=a,l=Df(!1),d=jf.bind(null,Ie,!1,l.queue),l=hn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=Wb.bind(null,Ie,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function qp(t){var r=yt();return Hp(r,Ke,t)}function Hp(t,r,a){r=Nf(t,r,zp)[0],t=ec(Lr)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?al(r):r;var l=yt(),h=l.queue,d=h.dispatch;return a!==l.memoizedState&&(Ie.flags|=2048,ja(9,Zb.bind(null,h,a),{destroy:void 0},null)),[r,d,t]}function Zb(t,r){t.action=r}function Fp(t){var r=yt(),a=Ke;if(a!==null)return Hp(r,a,t);yt(),r=r.memoizedState,a=yt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function ja(t,r,a,l){return t={tag:t,create:r,inst:a,deps:l,next:null},r=Ie.updateQueue,r===null&&(r=Zu(),Ie.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Gp(){return yt().memoizedState}function tc(t,r,a,l){var h=hn();Ie.flags|=t,h.memoizedState=ja(1|r,a,{destroy:void 0},l===void 0?null:l)}function nc(t,r,a,l){var h=yt();l=l===void 0?null:l;var d=h.memoizedState.inst;Ke!==null&&l!==null&&wf(l,Ke.memoizedState.deps)?h.memoizedState=ja(r,a,d,l):(Ie.flags|=t,h.memoizedState=ja(1|r,a,d,l))}function $p(t,r){tc(8390656,8,t,r)}function Of(t,r){nc(2048,8,t,r)}function Qp(t,r){return nc(4,2,t,r)}function Yp(t,r){return nc(4,4,t,r)}function Kp(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Xp(t,r,a){a=a!=null?a.concat([t]):null,nc(4,4,Kp.bind(null,r,t),a)}function Mf(){}function Wp(t,r){var a=yt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&wf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Zp(t,r){var a=yt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&wf(r,l[1]))return l[0];if(l=t(),Vs){Jn(!0);try{t()}finally{Jn(!1)}}return a.memoizedState=[l,r],l}function Vf(t,r,a){return a===void 0||(Ni&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=e0(),Ie.lanes|=t,Ui|=t,a)}function Jp(t,r,a,l){return pn(a,r)?a:Oa.current!==null?(t=Vf(t,a,l),pn(t,r)||(Ot=!0),t):(Ni&42)===0?(Ot=!0,t.memoizedState=a):(t=e0(),Ie.lanes|=t,Ui|=t,r)}function ey(t,r,a,l,h){var d=le.p;le.p=d!==0&&8>d?d:8;var E=b.T,w={};b.T=w,jf(t,!1,r,a);try{var I=h(),j=b.S;if(j!==null&&j(w,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var X=Yb(I,l);ol(t,r,X,En(t))}else ol(t,r,l,En(t))}catch(re){ol(t,r,{then:function(){},status:"rejected",reason:re},En())}finally{le.p=d,b.T=E}}function Jb(){}function Pf(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=ty(t).queue;ey(t,h,r,Re,a===null?Jb:function(){return ny(t),a(l)})}function ty(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:Re},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ny(t){var r=ty(t).next.queue;ol(t,r,{},En())}function Lf(){return Gt(Rl)}function ry(){return yt().memoizedState}function iy(){return yt().memoizedState}function e1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=En();t=Oi(a);var l=Mi(r,t,a);l!==null&&(rn(l,r,a),cl(l,r,a)),r={cache:Ef()},t.payload=r;return}r=r.return}}function t1(t,r,a){var l=En();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},rc(t)?ay(r,a):(a=df(t,r,a,l),a!==null&&(rn(a,t,l),oy(a,r,l)))}function sy(t,r,a){var l=En();ol(t,r,a,l)}function ol(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(rc(t))ay(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var E=r.lastRenderedState,w=d(E,a);if(h.hasEagerState=!0,h.eagerState=w,pn(w,E))return zu(t,r,h,0),Ze===null&&Uu(),!1}catch{}finally{}if(a=df(t,r,h,l),a!==null)return rn(a,t,l),oy(a,r,l),!0}return!1}function jf(t,r,a,l){if(l={lane:2,revertLane:Rd(),action:l,hasEagerState:!1,eagerState:null,next:null},rc(t)){if(r)throw Error(s(479))}else r=df(t,a,l,2),r!==null&&rn(r,t,2)}function rc(t){var r=t.alternate;return t===Ie||r!==null&&r===Ie}function ay(t,r){Pa=Xu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function oy(t,r,a){if((a&4194176)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,pi(t,a)}}var fr={readContext:Gt,use:Ju,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt};fr.useCacheRefresh=mt,fr.useMemoCache=mt,fr.useHostTransitionStatus=mt,fr.useFormState=mt,fr.useActionState=mt,fr.useOptimistic=mt;var Ps={readContext:Gt,use:Ju,useCallback:function(t,r){return hn().memoizedState=[t,r===void 0?null:r],t},useContext:Gt,useEffect:$p,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,tc(4194308,4,Kp.bind(null,r,t),a)},useLayoutEffect:function(t,r){return tc(4194308,4,t,r)},useInsertionEffect:function(t,r){tc(4,2,t,r)},useMemo:function(t,r){var a=hn();r=r===void 0?null:r;var l=t();if(Vs){Jn(!0);try{t()}finally{Jn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=hn();if(a!==void 0){var h=a(r);if(Vs){Jn(!0);try{a(r)}finally{Jn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=t1.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var r=hn();return t={current:t},r.memoizedState=t},useState:function(t){t=Df(t);var r=t.queue,a=sy.bind(null,Ie,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Mf,useDeferredValue:function(t,r){var a=hn();return Vf(a,t,r)},useTransition:function(){var t=Df(!1);return t=ey.bind(null,Ie,t.queue,!0,!1),hn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ie,h=hn();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Ze===null)throw Error(s(349));(ze&60)!==0||Ip(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,$p(kp.bind(null,l,d,t),[t]),l.flags|=2048,ja(9,Dp.bind(null,l,d,a,r),{destroy:void 0},null),a},useId:function(){var t=hn(),r=Ze.identifierPrefix;if(He){var a=Vr,l=Mr;a=(l&~(1<<32-Jt(l)-1)).toString(32)+a,r=":"+r+"R"+a,a=Wu++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Kb++,r=":"+r+"r"+a.toString(32)+":";return t.memoizedState=r},useCacheRefresh:function(){return hn().memoizedState=e1.bind(null,Ie)}};Ps.useMemoCache=Cf,Ps.useHostTransitionStatus=Lf,Ps.useFormState=Bp,Ps.useActionState=Bp,Ps.useOptimistic=function(t){var r=hn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=jf.bind(null,Ie,!0,a),a.dispatch=r,[t,r]};var Ii={readContext:Gt,use:Ju,useCallback:Wp,useContext:Gt,useEffect:Of,useImperativeHandle:Xp,useInsertionEffect:Qp,useLayoutEffect:Yp,useMemo:Zp,useReducer:ec,useRef:Gp,useState:function(){return ec(Lr)},useDebugValue:Mf,useDeferredValue:function(t,r){var a=yt();return Jp(a,Ke.memoizedState,t,r)},useTransition:function(){var t=ec(Lr)[0],r=yt().memoizedState;return[typeof t=="boolean"?t:al(t),r]},useSyncExternalStore:Np,useId:ry};Ii.useCacheRefresh=iy,Ii.useMemoCache=Cf,Ii.useHostTransitionStatus=Lf,Ii.useFormState=qp,Ii.useActionState=qp,Ii.useOptimistic=function(t,r){var a=yt();return Vp(a,Ke,t,r)};var Ls={readContext:Gt,use:Ju,useCallback:Wp,useContext:Gt,useEffect:Of,useImperativeHandle:Xp,useInsertionEffect:Qp,useLayoutEffect:Yp,useMemo:Zp,useReducer:If,useRef:Gp,useState:function(){return If(Lr)},useDebugValue:Mf,useDeferredValue:function(t,r){var a=yt();return Ke===null?Vf(a,t,r):Jp(a,Ke.memoizedState,t,r)},useTransition:function(){var t=If(Lr)[0],r=yt().memoizedState;return[typeof t=="boolean"?t:al(t),r]},useSyncExternalStore:Np,useId:ry};Ls.useCacheRefresh=iy,Ls.useMemoCache=Cf,Ls.useHostTransitionStatus=Lf,Ls.useFormState=Fp,Ls.useActionState=Fp,Ls.useOptimistic=function(t,r){var a=yt();return Ke!==null?Vp(a,Ke,t,r):(a.baseState=t,[t,a.queue.dispatch])};function Uf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:A({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var zf={isMounted:function(t){return(t=t._reactInternals)?ge(t)===t:!1},enqueueSetState:function(t,r,a){t=t._reactInternals;var l=En(),h=Oi(l);h.payload=r,a!=null&&(h.callback=a),r=Mi(t,h,l),r!==null&&(rn(r,t,l),cl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=En(),h=Oi(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Mi(t,h,l),r!==null&&(rn(r,t,l),cl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=En(),l=Oi(a);l.tag=2,r!=null&&(l.callback=r),r=Mi(t,l,a),r!==null&&(rn(r,t,a),cl(r,t,a))}};function ly(t,r,a,l,h,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):r.prototype&&r.prototype.isPureReactComponent?!Yo(a,l)||!Yo(h,d):!0}function uy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&zf.enqueueReplaceState(r,r.state,null)}function js(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var ic=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function cy(t){ic(t)}function hy(t){console.error(t)}function fy(t){ic(t)}function sc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function dy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Bf(t,r,a){return a=Oi(a),a.tag=3,a.payload={element:null},a.callback=function(){sc(t,r)},a}function my(t){return t=Oi(t),t.tag=3,t}function gy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){dy(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){dy(r,a,l),typeof h!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function n1(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ul(r,a,h,!0),a=Mn.current,a!==null){switch(a.tag){case 13:return hr===null?bd():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===yf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Sd(t,l,h)),!1;case 22:return a.flags|=65536,l===yf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Sd(t,l,h)),!1}throw Error(s(435,a.tag))}return Sd(t,l,h),bd(),!1}if(He)return r=Mn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==pf&&(t=Error(s(422),{cause:l}),Zo(Dn(t,a)))):(l!==pf&&(r=Error(s(423),{cause:l}),Zo(Dn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Dn(l,a),h=Bf(t.stateNode,l,h),nd(t,h),ht!==4&&(ht=2)),!1;var d=Error(s(520),{cause:l});if(d=Dn(d,a),vl===null?vl=[d]:vl.push(d),ht!==4&&(ht=2),r===null)return!0;l=Dn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Bf(a.stateNode,l,t),nd(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(zi===null||!zi.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=my(h),gy(h,t,a,l),nd(a,h),!1}a=a.return}while(a!==null);return!1}var py=Error(s(461)),Ot=!1;function Ut(t,r,a,l){r.child=t===null?Tp(r,null,a,l):Os(r,t.child,a,l)}function yy(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var E={};for(var w in l)w!=="ref"&&(E[w]=l[w])}else E=l;return zs(r),l=Sf(t,r,a,E,d,h),w=xf(),t!==null&&!Ot?(Af(t,r,h),jr(t,r,h)):(He&&w&&mf(r),r.flags|=1,Ut(t,r,l,h),r.child)}function vy(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!cd(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,_y(t,r,d,l,h)):(t=cc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!Xf(t,h)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Yo,a(E,l)&&t.ref===r.ref)return jr(t,r,h)}return r.flags|=1,t=ji(d,l),t.ref=r.ref,t.return=r,r.child=t}function _y(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(Yo(d,l)&&t.ref===r.ref)if(Ot=!1,r.pendingProps=l=d,Xf(t,h))(t.flags&131072)!==0&&(Ot=!0);else return r.lanes=t.lanes,jr(t,r,h)}return qf(t,r,a,l,h)}function Ey(t,r,a){var l=r.pendingProps,h=l.children,d=(r.stateNode._pendingVisibility&2)!==0,E=t!==null?t.memoizedState:null;if(ll(t,r),l.mode==="hidden"||d){if((r.flags&128)!==0){if(l=E!==null?E.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return Ty(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ku(r,E!==null?E.cachePool:null),E!==null?bp(r,E):vf(),wp(r);else return r.lanes=r.childLanes=536870912,Ty(t,r,E!==null?E.baseLanes|a:a,a)}else E!==null?(Ku(r,E.cachePool),bp(r,E),Ci(),r.memoizedState=null):(t!==null&&Ku(r,null),vf(),Ci());return Ut(t,r,h,a),r.child}function Ty(t,r,a,l){var h=bf();return h=h===null?null:{parent:Rt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&Ku(r,null),vf(),wp(r),t!==null&&ul(t,r,l,!0),null}function ll(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=2097664)}}function qf(t,r,a,l,h){return zs(r),a=Sf(t,r,a,l,void 0,h),l=xf(),t!==null&&!Ot?(Af(t,r,h),jr(t,r,h)):(He&&l&&mf(r),r.flags|=1,Ut(t,r,a,h),r.child)}function by(t,r,a,l,h,d){return zs(r),r.updateQueue=null,a=Cp(r,l,a,h),Rp(t),l=xf(),t!==null&&!Ot?(Af(t,r,d),jr(t,r,d)):(He&&l&&mf(r),r.flags|=1,Ut(t,r,a,d),r.child)}function wy(t,r,a,l,h){if(zs(r),r.stateNode===null){var d=Na,E=a.contextType;typeof E=="object"&&E!==null&&(d=Gt(E)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=zf,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},ed(r),E=a.contextType,d.context=typeof E=="object"&&E!==null?Gt(E):Na,d.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Uf(r,a,E,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&zf.enqueueReplaceState(d,d.state,null),fl(r,l,d,h),hl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var w=r.memoizedProps,I=js(a,w);d.props=I;var j=d.context,X=a.contextType;E=Na,typeof X=="object"&&X!==null&&(E=Gt(X));var re=a.getDerivedStateFromProps;X=typeof re=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||j!==E)&&uy(r,d,l,E),ki=!1;var G=r.memoizedState;d.state=G,fl(r,l,d,h),hl(),j=r.memoizedState,w||G!==j||ki?(typeof re=="function"&&(Uf(r,a,re,l),j=r.memoizedState),(I=ki||ly(r,a,I,l,G,j,E))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=j),d.props=l,d.state=j,d.context=E,l=I):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,td(t,r),E=r.memoizedProps,X=js(a,E),d.props=X,re=r.pendingProps,G=d.context,j=a.contextType,I=Na,typeof j=="object"&&j!==null&&(I=Gt(j)),w=a.getDerivedStateFromProps,(j=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==re||G!==I)&&uy(r,d,l,I),ki=!1,G=r.memoizedState,d.state=G,fl(r,l,d,h),hl();var Y=r.memoizedState;E!==re||G!==Y||ki||t!==null&&t.dependencies!==null&&ac(t.dependencies)?(typeof w=="function"&&(Uf(r,a,w,l),Y=r.memoizedState),(X=ki||ly(r,a,X,l,G,Y,I)||t!==null&&t.dependencies!==null&&ac(t.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,I)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Y),d.props=l,d.state=Y,d.context=I,l=X):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,ll(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=Os(r,t.child,null,h),r.child=Os(r,null,a,h)):Ut(t,r,a,h),r.memoizedState=d.state,t=r.child):t=jr(t,r,h),t}function Sy(t,r,a,l){return Wo(),r.flags|=256,Ut(t,r,a,l),r.child}var Hf={dehydrated:null,treeContext:null,retryLane:0};function Ff(t){return{baseLanes:t,cachePool:Ap()}}function Gf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=jn),t}function xy(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:(At.current&2)!==0),E&&(h=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,t===null){if(He){if(h?Ri(r):Ci(),He){var w=jt,I;if(I=w){e:{for(I=w,w=cr;I.nodeType!==8;){if(!w){w=null;break e}if(I=$n(I.nextSibling),I===null){w=null;break e}}w=I}w!==null?(r.memoizedState={dehydrated:w,treeContext:Is!==null?{id:Mr,overflow:Vr}:null,retryLane:536870912},I=Ln(18,null,null,0),I.stateNode=w,I.return=r,r.child=I,nn=r,jt=null,I=!0):I=!1}I||ks(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return w.data==="$!"?r.lanes=16:r.lanes=536870912,null;Pr(r)}return w=l.children,l=l.fallback,h?(Ci(),h=r.mode,w=Qf({mode:"hidden",children:w},h),l=qs(l,h,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,h=r.child,h.memoizedState=Ff(a),h.childLanes=Gf(t,E,a),r.memoizedState=Hf,l):(Ri(r),$f(r,w))}if(I=t.memoizedState,I!==null&&(w=I.dehydrated,w!==null)){if(d)r.flags&256?(Ri(r),r.flags&=-257,r=Yf(t,r,a)):r.memoizedState!==null?(Ci(),r.child=t.child,r.flags|=128,r=null):(Ci(),h=l.fallback,w=r.mode,l=Qf({mode:"visible",children:l.children},w),h=qs(h,w,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Os(r,t.child,null,a),l=r.child,l.memoizedState=Ff(a),l.childLanes=Gf(t,E,a),r.memoizedState=Hf,r=h);else if(Ri(r),w.data==="$!"){if(E=w.nextSibling&&w.nextSibling.dataset,E)var j=E.dgst;E=j,l=Error(s(419)),l.stack="",l.digest=E,Zo({value:l,source:null,stack:null}),r=Yf(t,r,a)}else if(Ot||ul(t,r,a,!1),E=(a&t.childLanes)!==0,Ot||E){if(E=Ze,E!==null){if(l=a&-a,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==I.retryLane)throw I.retryLane=l,Ai(t,l),rn(E,t,l),py}w.data==="$?"||bd(),r=Yf(t,r,a)}else w.data==="$?"?(r.flags|=128,r.child=t.child,r=y1.bind(null,t),w._reactRetry=r,r=null):(t=I.treeContext,jt=$n(w.nextSibling),nn=r,He=!0,Fn=null,cr=!1,t!==null&&(kn[On++]=Mr,kn[On++]=Vr,kn[On++]=Is,Mr=t.id,Vr=t.overflow,Is=r),r=$f(r,l.children),r.flags|=4096);return r}return h?(Ci(),h=l.fallback,w=r.mode,I=t.child,j=I.sibling,l=ji(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&31457280,j!==null?h=ji(j,h):(h=qs(h,w,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,w=t.child.memoizedState,w===null?w=Ff(a):(I=w.cachePool,I!==null?(j=Rt._currentValue,I=I.parent!==j?{parent:j,pool:j}:I):I=Ap(),w={baseLanes:w.baseLanes|a,cachePool:I}),h.memoizedState=w,h.childLanes=Gf(t,E,a),r.memoizedState=Hf,l):(Ri(r),a=t.child,t=a.sibling,a=ji(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(E=r.deletions,E===null?(r.deletions=[t],r.flags|=16):E.push(t)),r.child=a,r.memoizedState=null,a)}function $f(t,r){return r=Qf({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Qf(t,r){return Wy(t,r,0,null)}function Yf(t,r,a){return Os(r,t.child,null,a),t=$f(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ay(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Zf(t.return,r,a)}function Kf(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Ry(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(Ut(t,r,l.children,a),l=At.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ay(t,a,r);else if(t.tag===19)Ay(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch($e(At,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Yu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Kf(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Yu(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Kf(r,!0,a,null,d);break;case"together":Kf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function jr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ui|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ul(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=ji(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=ji(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Xf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ac(t)))}function r1(t,r,a){switch(r.tag){case 3:ci(r,r.stateNode.containerInfo),Di(r,Rt,t.memoizedState.cache),Wo();break;case 27:case 5:Ro(r);break;case 4:ci(r,r.stateNode.containerInfo);break;case 10:Di(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ri(r),r.flags|=128,null):(a&r.child.childLanes)!==0?xy(t,r,a):(Ri(r),t=jr(t,r,a),t!==null?t.sibling:null);Ri(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ul(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Ry(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),$e(At,At.current),l)break;return null;case 22:case 23:return r.lanes=0,Ey(t,r,a);case 24:Di(r,Rt,t.memoizedState.cache)}return jr(t,r,a)}function Cy(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ot=!0;else{if(!Xf(t,a)&&(r.flags&128)===0)return Ot=!1,r1(t,r,a);Ot=(t.flags&131072)!==0}else Ot=!1,He&&(r.flags&1048576)!==0&&fp(r,Hu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")cd(l)?(t=js(l,t),r.tag=1,r=wy(null,r,l,t,a)):(r.tag=0,r=qf(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===V){r.tag=11,r=yy(null,r,l,t,a);break e}else if(h===$){r.tag=14,r=vy(null,r,l,t,a);break e}}throw r=C(l)||l,Error(s(306,r,""))}}return r;case 0:return qf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=js(l,r.pendingProps),wy(t,r,l,h,a);case 3:e:{if(ci(r,r.stateNode.containerInfo),t===null)throw Error(s(387));var d=r.pendingProps;h=r.memoizedState,l=h.element,td(t,r),fl(r,d,null,a);var E=r.memoizedState;if(d=E.cache,Di(r,Rt,d),d!==h.cache&&Jf(r,[Rt],a,!0),hl(),d=E.element,h.isDehydrated)if(h={element:d,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=h,r.memoizedState=h,r.flags&256){r=Sy(t,r,d,a);break e}else if(d!==l){l=Dn(Error(s(424)),r),Zo(l),r=Sy(t,r,d,a);break e}else for(jt=$n(r.stateNode.containerInfo.firstChild),nn=r,He=!0,Fn=null,cr=!0,a=Tp(r,null,d,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Wo(),d===l){r=jr(t,r,a);break e}Ut(t,r,d,a)}r=r.child}return r;case 26:return ll(t,r),t===null?(a=D0(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,t=r.pendingProps,l=bc(Zt.current).createElement(a),l[It]=r,l[wt]=t,zt(l,a,t),st(l),r.stateNode=l):r.memoizedState=D0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Ro(r),t===null&&He&&(l=r.stateNode=C0(r.type,r.pendingProps,Zt.current),nn=r,cr=!0,jt=$n(l.firstChild)),l=r.pendingProps.children,t!==null||He?Ut(t,r,l,a):r.child=Os(r,null,l,a),ll(t,r),r.child;case 5:return t===null&&He&&((h=l=jt)&&(l=O1(l,r.type,r.pendingProps,cr),l!==null?(r.stateNode=l,nn=r,jt=$n(l.firstChild),cr=!1,h=!0):h=!1),h||ks(r)),Ro(r),h=r.type,d=r.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,Pd(h,d)?l=null:E!==null&&Pd(h,E)&&(r.flags|=32),r.memoizedState!==null&&(h=Sf(t,r,Xb,null,null,a),Rl._currentValue=h),ll(t,r),Ut(t,r,l,a),r.child;case 6:return t===null&&He&&((t=a=jt)&&(a=M1(a,r.pendingProps,cr),a!==null?(r.stateNode=a,nn=r,jt=null,t=!0):t=!1),t||ks(r)),null;case 13:return xy(t,r,a);case 4:return ci(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Os(r,null,l,a):Ut(t,r,l,a),r.child;case 11:return yy(t,r,r.type,r.pendingProps,a);case 7:return Ut(t,r,r.pendingProps,a),r.child;case 8:return Ut(t,r,r.pendingProps.children,a),r.child;case 12:return Ut(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Di(r,r.type,l.value),Ut(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,zs(r),h=Gt(h),l=l(h),r.flags|=1,Ut(t,r,l,a),r.child;case 14:return vy(t,r,r.type,r.pendingProps,a);case 15:return _y(t,r,r.type,r.pendingProps,a);case 19:return Ry(t,r,a);case 22:return Ey(t,r,a);case 24:return zs(r),l=Gt(Rt),t===null?(h=bf(),h===null&&(h=Ze,d=Ef(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},ed(r),Di(r,Rt,h)):((t.lanes&a)!==0&&(td(t,r),fl(r,null,null,a),hl()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Di(r,Rt,l)):(l=d.cache,Di(r,Rt,l),l!==h.cache&&Jf(r,[Rt],a,!0))),Ut(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}var Wf=Pe(null),Us=null,Ur=null;function Di(t,r,a){$e(Wf,r._currentValue),r._currentValue=a}function zr(t){t._currentValue=Wf.current,tt(Wf)}function Zf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Jf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;e:for(;d!==null;){var w=d;d=h;for(var I=0;I<r.length;I++)if(w.context===r[I]){d.lanes|=a,w=d.alternate,w!==null&&(w.lanes|=a),Zf(d.return,a,t),l||(E=null);break e}d=w.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(s(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Zf(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function ul(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var w=h.type;pn(h.pendingProps.value,E.value)||(t!==null?t.push(w):t=[w])}}else if(h===ln.current){if(E=h.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Rl):t=[Rl])}h=h.return}t!==null&&Jf(r,t,a,l),r.flags|=262144}function ac(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zs(t){Us=t,Ur=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return Ny(Us,t)}function oc(t,r){return Us===null&&zs(t),Ny(t,r)}function Ny(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ur===null){if(t===null)throw Error(s(308));Ur=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ur=Ur.next=r;return a}var ki=!1;function ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function td(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Oi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ot&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=Bu(t),cp(t,null,a),r}return zu(t,l,r,a),Bu(t)}function cl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194176)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,pi(t,a)}}function nd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var rd=!1;function hl(){if(rd){var t=Va;if(t!==null)throw t}}function fl(t,r,a,l){rd=!1;var h=t.updateQueue;ki=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var I=w,j=I.next;I.next=null,E===null?d=j:E.next=j,E=I;var X=t.alternate;X!==null&&(X=X.updateQueue,w=X.lastBaseUpdate,w!==E&&(w===null?X.firstBaseUpdate=j:w.next=j,X.lastBaseUpdate=I))}if(d!==null){var re=h.baseState;E=0,X=j=I=null,w=d;do{var G=w.lane&-536870913,Y=G!==w.lane;if(Y?(ze&G)===G:(l&G)===G){G!==0&&G===Ma&&(rd=!0),X!==null&&(X=X.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var me=t,Se=w;G=r;var ft=a;switch(Se.tag){case 1:if(me=Se.payload,typeof me=="function"){re=me.call(ft,re,G);break e}re=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Se.payload,G=typeof me=="function"?me.call(ft,re,G):me,G==null)break e;re=A({},re,G);break e;case 2:ki=!0}}G=w.callback,G!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},X===null?(j=X=Y,I=re):X=X.next=Y,E|=G;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;Y=w,w=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);X===null&&(I=re),h.baseState=I,h.firstBaseUpdate=j,h.lastBaseUpdate=X,d===null&&(h.shared.lanes=0),Ui|=E,t.lanes=E,t.memoizedState=re}}function Iy(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Dy(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Iy(a[t],r)}function dl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==h)}}catch(w){We(r,r.return,w)}}function Vi(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var E=l.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,h=r;var I=a;try{w()}catch(j){We(h,I,j)}}}l=l.next}while(l!==d)}}catch(j){We(r,r.return,j)}}function ky(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Dy(r,a)}catch(l){We(t,t.return,l)}}}function Oy(t,r,a){a.props=js(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){We(t,r,l)}}function Bs(t,r){try{var a=t.ref;if(a!==null){var l=t.stateNode;switch(t.tag){case 26:case 27:case 5:var h=l;break;default:h=l}typeof a=="function"?t.refCleanup=a(h):a.current=h}}catch(d){We(t,r,d)}}function yn(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){We(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){We(t,r,h)}else a.current=null}function My(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){We(t,t.return,h)}}function Vy(t,r,a){try{var l=t.stateNode;C1(l,t.type,a,r),l[wt]=r}catch(h){We(t,t.return,h)}}function Py(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function id(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Py(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(t,r):a.insertBefore(t,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(t,a)):(r=a,r.appendChild(t)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Tc));else if(l!==4&&l!==27&&(t=t.child,t!==null))for(sd(t,r,a),t=t.sibling;t!==null;)sd(t,r,a),t=t.sibling}function lc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&l!==27&&(t=t.child,t!==null))for(lc(t,r,a),t=t.sibling;t!==null;)lc(t,r,a),t=t.sibling}var Br=!1,ct=!1,ad=!1,Ly=typeof WeakSet=="function"?WeakSet:Set,Mt=null,jy=!1;function i1(t,r){if(t=t.containerInfo,Md=Cc,t=tp(t),lf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var E=0,w=-1,I=-1,j=0,X=0,re=t,G=null;t:for(;;){for(var Y;re!==a||h!==0&&re.nodeType!==3||(w=E+h),re!==d||l!==0&&re.nodeType!==3||(I=E+l),re.nodeType===3&&(E+=re.nodeValue.length),(Y=re.firstChild)!==null;)G=re,re=Y;for(;;){if(re===t)break t;if(G===a&&++j===h&&(w=E),G===d&&++X===l&&(I=E),(Y=re.nextSibling)!==null)break;re=G,G=re.parentNode}re=Y}a=w===-1||I===-1?null:{start:w,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vd={focusedElem:t,selectionRange:a},Cc=!1,Mt=r;Mt!==null;)if(r=Mt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Mt=t;else for(;Mt!==null;){switch(r=Mt,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var me=js(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(me,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){We(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Ud(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ud(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Mt=t;break}Mt=r.return}return me=jy,jy=!1,me}function Uy(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Hr(t,a),l&4&&dl(5,a);break;case 1:if(Hr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(w){We(a,a.return,w)}else{var h=js(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(w){We(a,a.return,w)}}l&64&&ky(a),l&512&&Bs(a,a.return);break;case 3:if(Hr(t,a),l&64&&(l=a.updateQueue,l!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Dy(l,t)}catch(w){We(a,a.return,w)}}break;case 26:Hr(t,a),l&512&&Bs(a,a.return);break;case 27:case 5:Hr(t,a),r===null&&l&4&&My(a),l&512&&Bs(a,a.return);break;case 12:Hr(t,a);break;case 13:Hr(t,a),l&4&&qy(t,a);break;case 22:if(h=a.memoizedState!==null||Br,!h){r=r!==null&&r.memoizedState!==null||ct;var d=Br,E=ct;Br=h,(ct=r)&&!E?Pi(t,a,(a.subtreeFlags&8772)!==0):Hr(t,a),Br=d,ct=E}l&512&&(a.memoizedProps.mode==="manual"?Bs(a,a.return):yn(a,a.return));break;default:Hr(t,a)}}function zy(t){var r=t.alternate;r!==null&&(t.alternate=null,zy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ys(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var vt=null,vn=!1;function qr(t,r,a){for(a=a.child;a!==null;)By(t,r,a),a=a.sibling}function By(t,r,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(hi,a)}catch{}switch(a.tag){case 26:ct||yn(a,r),qr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ct||yn(a,r);var l=vt,h=vn;for(vt=a.stateNode,qr(t,r,a),a=a.stateNode,r=a.attributes;r.length;)a.removeAttributeNode(r[0]);ys(a),vt=l,vn=h;break;case 5:ct||yn(a,r);case 6:h=vt;var d=vn;if(vt=null,qr(t,r,a),vt=h,vn=d,vt!==null)if(vn)try{t=vt,l=a.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)}catch(E){We(a,r,E)}else try{vt.removeChild(a.stateNode)}catch(E){We(a,r,E)}break;case 18:vt!==null&&(vn?(r=vt,a=a.stateNode,r.nodeType===8?jd(r.parentNode,a):r.nodeType===1&&jd(r,a),Dl(r)):jd(vt,a.stateNode));break;case 4:l=vt,h=vn,vt=a.stateNode.containerInfo,vn=!0,qr(t,r,a),vt=l,vn=h;break;case 0:case 11:case 14:case 15:ct||Vi(2,a,r),ct||Vi(4,a,r),qr(t,r,a);break;case 1:ct||(yn(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Oy(a,r,l)),qr(t,r,a);break;case 21:qr(t,r,a);break;case 22:ct||yn(a,r),ct=(l=ct)||a.memoizedState!==null,qr(t,r,a),ct=l;break;default:qr(t,r,a)}}function qy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Dl(t)}catch(a){We(r,r.return,a)}}function s1(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Ly),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Ly),r;default:throw Error(s(435,t.tag))}}function od(t,r){var a=s1(t);r.forEach(function(l){var h=v1.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Vn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,E=r,w=E;e:for(;w!==null;){switch(w.tag){case 27:case 5:vt=w.stateNode,vn=!1;break e;case 3:vt=w.stateNode.containerInfo,vn=!0;break e;case 4:vt=w.stateNode.containerInfo,vn=!0;break e}w=w.return}if(vt===null)throw Error(s(160));By(d,E,h),vt=null,vn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Hy(r,t),r=r.sibling}var Gn=null;function Hy(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vn(r,t),Pn(t),l&4&&(Vi(3,t,t.return),dl(3,t),Vi(5,t,t.return));break;case 1:Vn(r,t),Pn(t),l&512&&(ct||a===null||yn(a,a.return)),l&64&&Br&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Gn;if(Vn(r,t),Pn(t),l&512&&(ct||a===null||yn(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[vi]||d[It]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),zt(d,l,a),d[It]=t,st(d),l=d;break e;case"link":var E=M0("link","href",h).get(l+(a.href||""));if(E){for(var w=0;w<E.length;w++)if(d=E[w],d.getAttribute("href")===(a.href==null?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(w,1);break t}}d=h.createElement(l),zt(d,l,a),h.head.appendChild(d);break;case"meta":if(E=M0("meta","content",h).get(l+(a.content||""))){for(w=0;w<E.length;w++)if(d=E[w],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(w,1);break t}}d=h.createElement(l),zt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[It]=t,st(d),l=d}t.stateNode=l}else V0(h,t.type,t.stateNode);else t.stateNode=O0(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?V0(h,t.type,t.stateNode):O0(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Vy(t,t.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&t.alternate===null){h=t.stateNode,d=t.memoizedProps;try{for(var I=h.firstChild;I;){var j=I.nextSibling,X=I.nodeName;I[vi]||X==="HEAD"||X==="BODY"||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&I.rel.toLowerCase()==="stylesheet"||h.removeChild(I),I=j}for(var re=t.type,G=h.attributes;G.length;)h.removeAttributeNode(G[0]);zt(h,re,d),h[It]=t,h[wt]=d}catch(me){We(t,t.return,me)}}case 5:if(Vn(r,t),Pn(t),l&512&&(ct||a===null||yn(a,a.return)),t.flags&32){h=t.stateNode;try{An(h,"")}catch(me){We(t,t.return,me)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Vy(t,h,a!==null?a.memoizedProps:h)),l&1024&&(ad=!0);break;case 6:if(Vn(r,t),Pn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(me){We(t,t.return,me)}}break;case 3:if(xc=null,h=Gn,Gn=wc(r.containerInfo),Vn(r,t),Gn=h,Pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Dl(r.containerInfo)}catch(me){We(t,t.return,me)}ad&&(ad=!1,Fy(t));break;case 4:l=Gn,Gn=wc(t.stateNode.containerInfo),Vn(r,t),Pn(t),Gn=l;break;case 12:Vn(r,t),Pn(t);break;case 13:Vn(r,t),Pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(pd=un()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,od(t,l)));break;case 22:if(l&512&&(ct||a===null||yn(a,a.return)),I=t.memoizedState!==null,j=a!==null&&a.memoizedState!==null,X=Br,re=ct,Br=X||I,ct=re||j,Vn(r,t),ct=re,Br=X,Pn(t),r=t.stateNode,r._current=t,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,l&8192&&(r._visibility=I?r._visibility&-2:r._visibility|1,I&&(r=Br||ct,a===null||j||r||Ua(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(a=null,r=t;;){if(r.tag===5||r.tag===26||r.tag===27){if(a===null){j=a=r;try{if(h=j.stateNode,I)d=h.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{E=j.stateNode,w=j.memoizedProps.style;var Y=w!=null&&w.hasOwnProperty("display")?w.display:null;E.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(me){We(j,j.return,me)}}}else if(r.tag===6){if(a===null){j=r;try{j.stateNode.nodeValue=I?"":j.memoizedProps}catch(me){We(j,j.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,od(t,a))));break;case 19:Vn(r,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,od(t,l)));break;case 21:break;default:Vn(r,t),Pn(t)}}function Pn(t){var r=t.flags;if(r&2){try{if(t.tag!==27){e:{for(var a=t.return;a!==null;){if(Py(a)){var l=a;break e}a=a.return}throw Error(s(160))}switch(l.tag){case 27:var h=l.stateNode,d=id(t);lc(t,d,h);break;case 5:var E=l.stateNode;l.flags&32&&(An(E,""),l.flags&=-33);var w=id(t);lc(t,w,E);break;case 3:case 4:var I=l.stateNode.containerInfo,j=id(t);sd(t,j,I);break;default:throw Error(s(161))}}}catch(X){We(t,t.return,X)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Fy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Fy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Hr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Uy(t,r.alternate,r),r=r.sibling}function Ua(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Vi(4,r,r.return),Ua(r);break;case 1:yn(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Oy(r,r.return,a),Ua(r);break;case 26:case 27:case 5:yn(r,r.return),Ua(r);break;case 22:yn(r,r.return),r.memoizedState===null&&Ua(r);break;default:Ua(r)}t=t.sibling}}function Pi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,E=d.flags;switch(d.tag){case 0:case 11:case 15:Pi(h,d,a),dl(4,d);break;case 1:if(Pi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){We(l,l.return,j)}if(l=d,h=l.updateQueue,h!==null){var w=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)Iy(I[h],w)}catch(j){We(l,l.return,j)}}a&&E&64&&ky(d),Bs(d,d.return);break;case 26:case 27:case 5:Pi(h,d,a),a&&l===null&&E&4&&My(d),Bs(d,d.return);break;case 12:Pi(h,d,a);break;case 13:Pi(h,d,a),a&&E&4&&qy(h,d);break;case 22:d.memoizedState===null&&Pi(h,d,a),Bs(d,d.return);break;default:Pi(h,d,a)}r=r.sibling}}function ld(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&rl(a))}function ud(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&rl(t))}function Li(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Gy(t,r,a,l),r=r.sibling}function Gy(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Li(t,r,a,l),h&2048&&dl(9,r);break;case 3:Li(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&rl(t)));break;case 12:if(h&2048){Li(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,E=d.id,w=d.onPostCommit;typeof w=="function"&&w(E,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){We(r,r.return,I)}}else Li(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,r.memoizedState!==null?d._visibility&4?Li(t,r,a,l):ml(t,r):d._visibility&4?Li(t,r,a,l):(d._visibility|=4,za(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&ld(r.alternate,r);break;case 24:Li(t,r,a,l),h&2048&&ud(r.alternate,r);break;default:Li(t,r,a,l)}}function za(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,E=r,w=a,I=l,j=E.flags;switch(E.tag){case 0:case 11:case 15:za(d,E,w,I,h),dl(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&4?za(d,E,w,I,h):ml(d,E):(X._visibility|=4,za(d,E,w,I,h)),h&&j&2048&&ld(E.alternate,E);break;case 24:za(d,E,w,I,h),h&&j&2048&&ud(E.alternate,E);break;default:za(d,E,w,I,h)}r=r.sibling}}function ml(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:ml(a,l),h&2048&&ld(l.alternate,l);break;case 24:ml(a,l),h&2048&&ud(l.alternate,l);break;default:ml(a,l)}r=r.sibling}}var gl=8192;function Ba(t){if(t.subtreeFlags&gl)for(t=t.child;t!==null;)$y(t),t=t.sibling}function $y(t){switch(t.tag){case 26:Ba(t),t.flags&gl&&t.memoizedState!==null&&Q1(Gn,t.memoizedState,t.memoizedProps);break;case 5:Ba(t);break;case 3:case 4:var r=Gn;Gn=wc(t.stateNode.containerInfo),Ba(t),Gn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=gl,gl=16777216,Ba(t),gl=r):Ba(t));break;default:Ba(t)}}function Qy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function pl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mt=l,Ky(l,t)}Qy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yy(t),t=t.sibling}function Yy(t){switch(t.tag){case 0:case 11:case 15:pl(t),t.flags&2048&&Vi(9,t,t.return);break;case 3:pl(t);break;case 12:pl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&4&&(t.return===null||t.return.tag!==13)?(r._visibility&=-5,uc(t)):pl(t);break;default:pl(t)}}function uc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mt=l,Ky(l,t)}Qy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Vi(8,r,r.return),uc(r);break;case 22:a=r.stateNode,a._visibility&4&&(a._visibility&=-5,uc(r));break;default:uc(r)}t=t.sibling}}function Ky(t,r){for(;Mt!==null;){var a=Mt;switch(a.tag){case 0:case 11:case 15:Vi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:rl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Mt=l;else e:for(a=t;Mt!==null;){l=Mt;var h=l.sibling,d=l.return;if(zy(l),l===a){Mt=null;break e}if(h!==null){h.return=d,Mt=h;break e}Mt=d}}}function a1(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,r,a,l){return new a1(t,r,a,l)}function cd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ji(t,r){var a=t.alternate;return a===null?(a=Ln(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&31457280,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Xy(t,r){t.flags&=31457282;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function cc(t,r,a,l,h,d){var E=0;if(l=t,typeof t=="function")cd(t)&&(E=1);else if(typeof t=="string")E=G1(t,a,it.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case g:return qs(a.children,h,d,r);case p:E=8,h|=24;break;case T:return t=Ln(12,a,r,h|2),t.elementType=T,t.lanes=d,t;case q:return t=Ln(13,a,r,h),t.elementType=q,t.lanes=d,t;case U:return t=Ln(19,a,r,h),t.elementType=U,t.lanes=d,t;case K:return Wy(a,h,d,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x:case P:E=10;break e;case R:E=9;break e;case V:E=11;break e;case $:E=14;break e;case W:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Ln(E,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function qs(t,r,a,l){return t=Ln(7,t,l,r),t.lanes=a,t}function Wy(t,r,a,l){t=Ln(22,t,l,r),t.elementType=K,t.lanes=a;var h={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var d=h._current;if(d===null)throw Error(s(456));if((h._pendingVisibility&2)===0){var E=Ai(d,2);E!==null&&(h._pendingVisibility|=2,rn(E,d,2))}},attach:function(){var d=h._current;if(d===null)throw Error(s(456));if((h._pendingVisibility&2)!==0){var E=Ai(d,2);E!==null&&(h._pendingVisibility&=-3,rn(E,d,2))}}};return t.stateNode=h,t}function hd(t,r,a){return t=Ln(6,t,null,r),t.lanes=a,t}function fd(t,r,a){return r=Ln(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Fr(t){t.flags|=4}function Zy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!P0(r)){if(r=Mn.current,r!==null&&((ze&4194176)===ze?hr!==null:(ze&62914560)!==ze&&(ze&536870912)===0||r!==hr))throw el=yf,gp;t.flags|=8192}}function hc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?mi():536870912,t.lanes|=r,Ha|=r)}function yl(t,r){if(!He)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function at(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&31457280,l|=h.flags&31457280,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function o1(t,r,a){var l=r.pendingProps;switch(gf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(r),null;case 1:return at(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),zr(Rt),wr(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Xo(r)?Fr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fn!==null&&(Ed(Fn),Fn=null))),at(r),null;case 26:return a=r.memoizedState,t===null?(Fr(r),a!==null?(at(r),Zy(r,a)):(at(r),r.flags&=-16777217)):a?a!==t.memoizedState?(Fr(r),at(r),Zy(r,a)):(at(r),r.flags&=-16777217):(t.memoizedProps!==l&&Fr(r),at(r),r.flags&=-16777217),null;case 27:la(r),a=Zt.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return at(r),null}t=it.current,Xo(r)?dp(r):(t=C0(h,l,a),r.stateNode=t,Fr(r))}return at(r),null;case 5:if(la(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return at(r),null}if(t=it.current,Xo(r))dp(r);else{switch(h=bc(Zt.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[It]=r,t[wt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(zt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Fr(r)}}return at(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Fr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Zt.current,Xo(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=nn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[It]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||b0(t.nodeValue,a)),t||ks(r)}else t=bc(t).createTextNode(l),t[It]=r,r.stateNode=t}return at(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Xo(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[It]=r}else Wo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),h=!1}else Fn!==null&&(Ed(Fn),Fn=null),h=!0;if(!h)return r.flags&256?(Pr(r),r):(Pr(r),null)}if(Pr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),hc(r,r.updateQueue),at(r),null;case 4:return wr(),t===null&&Dd(r.stateNode.containerInfo),at(r),null;case 10:return zr(r.type),at(r),null;case 19:if(tt(At),h=r.memoizedState,h===null)return at(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)yl(h,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=Yu(t),d!==null){for(r.flags|=128,yl(h,!1),t=d.updateQueue,r.updateQueue=t,hc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Xy(a,t),a=a.sibling;return $e(At,At.current&1|2),r.child}t=t.sibling}h.tail!==null&&un()>fc&&(r.flags|=128,l=!0,yl(h,!1),r.lanes=4194304)}else{if(!l)if(t=Yu(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,hc(r,t),yl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!He)return at(r),null}else 2*un()-h.renderingStartTime>fc&&a!==536870912&&(r.flags|=128,l=!0,yl(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=un(),r.sibling=null,t=At.current,$e(At,l?t&1|2:t&1),r):(at(r),null);case 22:case 23:return Pr(r),_f(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(at(r),r.subtreeFlags&6&&(r.flags|=8192)):at(r),a=r.updateQueue,a!==null&&hc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&tt(Ms),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),zr(Rt),at(r),null;case 25:return null}throw Error(s(156,r.tag))}function l1(t,r){switch(gf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return zr(Rt),wr(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return la(r),null;case 13:if(Pr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Wo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return tt(At),null;case 4:return wr(),null;case 10:return zr(r.type),null;case 22:case 23:return Pr(r),_f(),t!==null&&tt(Ms),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return zr(Rt),null;case 25:return null;default:return null}}function Jy(t,r){switch(gf(r),r.tag){case 3:zr(Rt),wr();break;case 26:case 27:case 5:la(r);break;case 4:wr();break;case 13:Pr(r);break;case 19:tt(At);break;case 10:zr(r.type);break;case 22:case 23:Pr(r),_f(),t!==null&&tt(Ms);break;case 24:zr(Rt)}}var u1={getCacheForType:function(t){var r=Gt(Rt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},c1=typeof WeakMap=="function"?WeakMap:Map,ot=0,Ze=null,Oe=null,ze=0,Je=0,_n=null,Gr=!1,qa=!1,dd=!1,$r=0,ht=0,Ui=0,Hs=0,md=0,jn=0,Ha=0,vl=null,dr=null,gd=!1,pd=0,fc=1/0,dc=null,zi=null,mc=!1,Fs=null,_l=0,yd=0,vd=null,El=0,_d=null;function En(){if((ot&2)!==0&&ze!==0)return ze&-ze;if(b.T!==null){var t=Ma;return t!==0?t:Rd()}return Eu()}function e0(){jn===0&&(jn=(ze&536870912)===0||He?ko():536870912);var t=Mn.current;return t!==null&&(t.flags|=32),jn}function rn(t,r,a){(t===Ze&&Je===2||t.cancelPendingCommit!==null)&&(Fa(t,0),Qr(t,ze,jn,!1)),dt(t,a),((ot&2)===0||t!==Ze)&&(t===Ze&&((ot&2)===0&&(Hs|=a),ht===4&&Qr(t,ze,jn,!1)),mr(t))}function t0(t,r,a){if((ot&6)!==0)throw Error(s(327));var l=!a&&(r&60)===0&&(r&t.expiredLanes)===0||di(t,r),h=l?d1(t,r):wd(t,r,!0),d=l;do{if(h===0){qa&&!l&&Qr(t,r,0,!1);break}else if(h===6)Qr(t,r,0,!Gr);else{if(a=t.current.alternate,d&&!h1(a)){h=wd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var w=t;h=vl;var I=w.current.memoizedState.isDehydrated;if(I&&(Fa(w,E).flags|=256),E=wd(w,E,!1),E!==2){if(dd&&!I){w.errorRecoveryDisabledLanes|=d,Hs|=d,h=4;break e}d=dr,dr=h,d!==null&&Ed(d)}h=E}if(d=!1,h!==2)continue}}if(h===1){Fa(t,0),Qr(t,r,0,!0);break}e:{switch(l=t,h){case 0:case 1:throw Error(s(345));case 4:if((r&4194176)===r){Qr(l,r,jn,!Gr);break e}break;case 2:dr=null;break;case 3:case 5:break;default:throw Error(s(329))}if(l.finishedWork=a,l.finishedLanes=r,(r&62914560)===r&&(d=pd+300-un(),10<d)){if(Qr(l,r,jn,!Gr),Sn(l,0)!==0)break e;l.timeoutHandle=x0(n0.bind(null,l,a,dr,dc,gd,r,jn,Hs,Ha,Gr,2,-0,0),d);break e}n0(l,a,dr,dc,gd,r,jn,Hs,Ha,Gr,0,-0,0)}}break}while(!0);mr(t)}function Ed(t){dr===null?dr=t:dr.push.apply(dr,t)}function n0(t,r,a,l,h,d,E,w,I,j,X,re,G){var Y=r.subtreeFlags;if((Y&8192||(Y&16785408)===16785408)&&(Al={stylesheets:null,count:0,unsuspend:$1},$y(r),r=Y1(),r!==null)){t.cancelPendingCommit=r(u0.bind(null,t,a,l,h,E,w,I,1,re,G)),Qr(t,d,E,!j);return}u0(t,a,l,h,E,w,I,X,re,G)}function h1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!pn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qr(t,r,a,l){r&=~md,r&=~Hs,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Jt(h),E=1<<d;l[d]=-1,h&=~E}a!==0&&gi(t,a,r)}function gc(){return(ot&6)===0?(Tl(0),!1):!0}function Td(){if(Oe!==null){if(Je===0)var t=Oe.return;else t=Oe,Ur=Us=null,Rf(t),ka=null,tl=0,t=Oe;for(;t!==null;)Jy(t.alternate,t),t=t.return;Oe=null}}function Fa(t,r){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,I1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Td(),Ze=t,Oe=a=ji(t.current,null),ze=r,Je=0,_n=null,Gr=!1,qa=di(t,r),dd=!1,Ha=jn=md=Hs=Ui=ht=0,dr=vl=null,gd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Jt(l),d=1<<h;r|=t[h],l&=~d}return $r=r,Uu(),a}function r0(t,r){Ie=null,b.H=fr,r===Jo?(r=vp(),Je=3):r===gp?(r=vp(),Je=4):Je=r===py?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,_n=r,Oe===null&&(ht=1,sc(t,Dn(r,t.current)))}function i0(){var t=b.H;return b.H=fr,t===null?fr:t}function s0(){var t=b.A;return b.A=u1,t}function bd(){ht=4,Gr||(ze&4194176)!==ze&&Mn.current!==null||(qa=!0),(Ui&134217727)===0&&(Hs&134217727)===0||Ze===null||Qr(Ze,ze,jn,!1)}function wd(t,r,a){var l=ot;ot|=2;var h=i0(),d=s0();(Ze!==t||ze!==r)&&(dc=null,Fa(t,r)),r=!1;var E=ht;e:do try{if(Je!==0&&Oe!==null){var w=Oe,I=_n;switch(Je){case 8:Td(),E=6;break e;case 3:case 2:case 6:Mn.current===null&&(r=!0);var j=Je;if(Je=0,_n=null,Ga(t,w,I,j),a&&qa){E=0;break e}break;default:j=Je,Je=0,_n=null,Ga(t,w,I,j)}}f1(),E=ht;break}catch(X){r0(t,X)}while(!0);return r&&t.shellSuspendCounter++,Ur=Us=null,ot=l,b.H=h,b.A=d,Oe===null&&(Ze=null,ze=0,Uu()),E}function f1(){for(;Oe!==null;)a0(Oe)}function d1(t,r){var a=ot;ot|=2;var l=i0(),h=s0();Ze!==t||ze!==r?(dc=null,fc=un()+500,Fa(t,r)):qa=di(t,r);e:do try{if(Je!==0&&Oe!==null){r=Oe;var d=_n;t:switch(Je){case 1:Je=0,_n=null,Ga(t,r,d,1);break;case 2:if(pp(d)){Je=0,_n=null,o0(r);break}r=function(){Je===2&&Ze===t&&(Je=7),mr(t)},d.then(r,r);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:pp(d)?(Je=0,_n=null,o0(r)):(Je=0,_n=null,Ga(t,r,d,7));break;case 5:var E=null;switch(Oe.tag){case 26:E=Oe.memoizedState;case 5:case 27:var w=Oe;if(!E||P0(E)){Je=0,_n=null;var I=w.sibling;if(I!==null)Oe=I;else{var j=w.return;j!==null?(Oe=j,pc(j)):Oe=null}break t}}Je=0,_n=null,Ga(t,r,d,5);break;case 6:Je=0,_n=null,Ga(t,r,d,6);break;case 8:Td(),ht=6;break e;default:throw Error(s(462))}}m1();break}catch(X){r0(t,X)}while(!0);return Ur=Us=null,b.H=l,b.A=h,ot=a,Oe!==null?0:(Ze=null,ze=0,Uu(),ht)}function m1(){for(;Oe!==null&&!Xh();)a0(Oe)}function a0(t){var r=Cy(t.alternate,t,$r);t.memoizedProps=t.pendingProps,r===null?pc(t):Oe=r}function o0(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=by(a,r,r.pendingProps,r.type,void 0,ze);break;case 11:r=by(a,r,r.pendingProps,r.type.render,r.ref,ze);break;case 5:Rf(r);default:Jy(a,r),r=Oe=Xy(r,$r),r=Cy(a,r,$r)}t.memoizedProps=t.pendingProps,r===null?pc(t):Oe=r}function Ga(t,r,a,l){Ur=Us=null,Rf(r),ka=null,tl=0;var h=r.return;try{if(n1(t,h,r,a,ze)){ht=1,sc(t,Dn(a,t.current)),Oe=null;return}}catch(d){if(h!==null)throw Oe=h,d;ht=1,sc(t,Dn(a,t.current)),Oe=null;return}r.flags&32768?(He||l===1?t=!0:qa||(ze&536870912)!==0?t=!1:(Gr=t=!0,(l===2||l===3||l===6)&&(l=Mn.current,l!==null&&l.tag===13&&(l.flags|=16384))),l0(r,t)):pc(r)}function pc(t){var r=t;do{if((r.flags&32768)!==0){l0(r,Gr);return}t=r.return;var a=o1(r.alternate,r,$r);if(a!==null){Oe=a;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);ht===0&&(ht=5)}function l0(t,r){do{var a=l1(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);ht=6,Oe=null}function u0(t,r,a,l,h,d,E,w,I,j){var X=b.T,re=le.p;try{le.p=2,b.T=null,g1(t,r,a,l,re,h,d,E,w,I,j)}finally{b.T=X,le.p=re}}function g1(t,r,a,l,h,d,E,w){do $a();while(Fs!==null);if((ot&6)!==0)throw Error(s(327));var I=t.finishedWork;if(l=t.finishedLanes,I===null)return null;if(t.finishedWork=null,t.finishedLanes=0,I===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var j=I.lanes|I.childLanes;if(j|=ff,vu(t,l,j,d,E,w),t===Ze&&(Oe=Ze=null,ze=0),(I.subtreeFlags&10256)===0&&(I.flags&10256)===0||mc||(mc=!0,yd=j,vd=a,_1(Sr,function(){return $a(),null})),a=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||a?(a=b.T,b.T=null,d=le.p,le.p=2,E=ot,ot|=4,i1(t,I),Hy(I,t),Ub(Vd,t.containerInfo),Cc=!!Md,Vd=Md=null,t.current=I,Uy(t,I.alternate,I),Co(),ot=E,le.p=d,b.T=a):t.current=I,mc?(mc=!1,Fs=t,_l=l):c0(t,j),j=t.pendingLanes,j===0&&(zi=null),Io(I.stateNode),mr(t),r!==null)for(h=t.onRecoverableError,I=0;I<r.length;I++)j=r[I],h(j.value,{componentStack:j.stack});return(_l&3)!==0&&$a(),j=t.pendingLanes,(l&4194218)!==0&&(j&42)!==0?t===_d?El++:(El=0,_d=t):El=0,Tl(0),null}function c0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,rl(r)))}function $a(){if(Fs!==null){var t=Fs,r=yd;yd=0;var a=_u(_l),l=b.T,h=le.p;try{if(le.p=32>a?32:a,b.T=null,Fs===null)var d=!1;else{a=vd,vd=null;var E=Fs,w=_l;if(Fs=null,_l=0,(ot&6)!==0)throw Error(s(331));var I=ot;if(ot|=4,Yy(E.current),Gy(E,E.current,w,a),ot=I,Tl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(hi,E)}catch{}d=!0}return d}finally{le.p=h,b.T=l,c0(t,r)}}return!1}function h0(t,r,a){r=Dn(a,r),r=Bf(t.stateNode,r,2),t=Mi(t,r,2),t!==null&&(dt(t,2),mr(t))}function We(t,r,a){if(t.tag===3)h0(t,t,a);else for(;r!==null;){if(r.tag===3){h0(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zi===null||!zi.has(l))){t=Dn(a,t),a=my(2),l=Mi(r,a,2),l!==null&&(gy(a,l,r,t),dt(l,2),mr(l));break}}r=r.return}}function Sd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new c1;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(dd=!0,h.add(a),t=p1.bind(null,t,r,a),r.then(t,t))}function p1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ze===t&&(ze&a)===a&&(ht===4||ht===3&&(ze&62914560)===ze&&300>un()-pd?(ot&2)===0&&Fa(t,0):md|=a,Ha===ze&&(Ha=0)),mr(t)}function f0(t,r){r===0&&(r=mi()),t=Ai(t,r),t!==null&&(dt(t,r),mr(t))}function y1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),f0(t,a)}function v1(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),f0(t,a)}function _1(t,r){return ms(t,r)}var yc=null,Qa=null,xd=!1,vc=!1,Ad=!1,Gs=0;function mr(t){t!==Qa&&t.next===null&&(Qa===null?yc=Qa=t:Qa=Qa.next=t),vc=!0,xd||(xd=!0,T1(E1))}function Tl(t,r){if(!Ad&&vc){Ad=!0;do for(var a=!1,l=yc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,w=l.pingedLanes;d=(1<<31-Jt(42|t)+1)-1,d&=h&~(E&~w),d=d&201326677?d&201326677|1:d?d|2:0}d!==0&&(a=!0,g0(l,d))}else d=ze,d=Sn(l,l===Ze?d:0),(d&3)===0||di(l,d)||(a=!0,g0(l,d));l=l.next}while(a);Ad=!1}}function E1(){vc=xd=!1;var t=0;Gs!==0&&(N1()&&(t=Gs),Gs=0);for(var r=un(),a=null,l=yc;l!==null;){var h=l.next,d=d0(l,r);d===0?(l.next=null,a===null?yc=h:a.next=h,h===null&&(Qa=a)):(a=l,(t!==0||(d&3)!==0)&&(vc=!0)),l=h}Tl(t)}function d0(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-Jt(d),w=1<<E,I=h[E];I===-1?((w&a)===0||(w&l)!==0)&&(h[E]=ha(w,r)):I<=r&&(t.expiredLanes|=w),d&=~w}if(r=Ze,a=ze,a=Sn(t,t===r?a:0),l=t.callbackNode,a===0||t===r&&Je===2||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ca(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||di(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&ca(l),_u(a)){case 2:case 8:a=Nt;break;case 32:a=Sr;break;case 268435456:a=No;break;default:a=Sr}return l=m0.bind(null,t),a=ms(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&ca(l),t.callbackPriority=2,t.callbackNode=null,2}function m0(t,r){var a=t.callbackNode;if($a()&&t.callbackNode!==a)return null;var l=ze;return l=Sn(t,t===Ze?l:0),l===0?null:(t0(t,l,r),d0(t,un()),t.callbackNode!=null&&t.callbackNode===a?m0.bind(null,t):null)}function g0(t,r){if($a())return null;t0(t,r,!0)}function T1(t){D1(function(){(ot&6)!==0?ms(bt,t):t()})}function Rd(){return Gs===0&&(Gs=ko()),Gs}function p0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:rr(""+t)}function y0(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function b1(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=p0((h[wt]||null).action),E=l.submitter;E&&(r=(r=E[wt]||null)?p0(r.formAction):E.getAttribute("formAction"),r!==null&&(d=r,E=null));var w=new va("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Gs!==0){var I=E?y0(h,E):new FormData(h);Pf(a,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(w.preventDefault(),I=E?y0(h,E):new FormData(h),Pf(a,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var Cd=0;Cd<up.length;Cd++){var Nd=up[Cd],w1=Nd.toLowerCase(),S1=Nd[0].toUpperCase()+Nd.slice(1);Hn(w1,"on"+S1)}Hn(ip,"onAnimationEnd"),Hn(sp,"onAnimationIteration"),Hn(ap,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(Bb,"onTransitionRun"),Hn(qb,"onTransitionStart"),Hn(Hb,"onTransitionCancel"),Hn(op,"onTransitionEnd"),cn("onMouseEnter",["mouseout","mouseover"]),cn("onMouseLeave",["mouseout","mouseover"]),cn("onPointerEnter",["pointerout","pointerover"]),cn("onPointerLeave",["pointerout","pointerover"]),mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bl));function v0(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var E=l.length-1;0<=E;E--){var w=l[E],I=w.instance,j=w.currentTarget;if(w=w.listener,I!==d&&h.isPropagationStopped())break e;d=w,h.currentTarget=j;try{d(h)}catch(X){ic(X)}h.currentTarget=null,d=I}else for(E=0;E<l.length;E++){if(w=l[E],I=w.instance,j=w.currentTarget,w=w.listener,I!==d&&h.isPropagationStopped())break e;d=w,h.currentTarget=j;try{d(h)}catch(X){ic(X)}h.currentTarget=null,d=I}}}}function Le(t,r){var a=r[ps];a===void 0&&(a=r[ps]=new Set);var l=t+"__bubble";a.has(l)||(_0(r,t,2,!1),a.add(l))}function Id(t,r,a){var l=0;r&&(l|=4),_0(a,t,l,r)}var _c="_reactListening"+Math.random().toString(36).slice(2);function Dd(t){if(!t[_c]){t[_c]=!0,Mo.forEach(function(a){a!=="selectionchange"&&(x1.has(a)||Id(a,!1,t),Id(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[_c]||(r[_c]=!0,Id("selectionchange",!1,r))}}function _0(t,r,a,l){switch(q0(r)){case 2:var h=W1;break;case 8:h=Z1;break;default:h=Fd}a=h.bind(null,r,a,t),h=void 0,!Cn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function kd(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var w=l.stateNode.containerInfo;if(w===h||w.nodeType===8&&w.parentNode===h)break;if(E===4)for(E=l.return;E!==null;){var I=E.tag;if((I===3||I===4)&&(I=E.stateNode.containerInfo,I===h||I.nodeType===8&&I.parentNode===h))return;E=E.return}for(;w!==null;){if(E=qn(w),E===null)return;if(I=E.tag,I===5||I===6||I===26||I===27){l=d=E;continue e}w=w.parentNode}}l=l.return}Su(function(){var j=d,X=ya(a),re=[];e:{var G=lp.get(t);if(G!==void 0){var Y=va,me=t;switch(t){case"keypress":if(sr(a)===0)break e;case"keydown":case"keyup":Y=Sa;break;case"focusin":me="focus",Y=Ta;break;case"focusout":me="blur",Y=Ta;break;case"beforeblur":case"afterblur":Y=Ta;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=rf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=ku;break;case ip:case sp:case ap:Y=ba;break;case op:Y=Mu;break;case"scroll":case"scrollend":Y=xu;break;case"wheel":Y=xa;break;case"copy":case"cut":case"paste":Y=wa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=$o;break;case"toggle":case"beforetoggle":Y=Pu}var Se=(r&4)!==0,ft=!Se&&(t==="scroll"||t==="scrollend"),B=Se?G!==null?G+"Capture":null:G;Se=[];for(var L=j,F;L!==null;){var ee=L;if(F=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||F===null||B===null||(ee=Ts(L,B),ee!=null&&Se.push(wl(L,ee,F))),ft)break;L=L.return}0<Se.length&&(G=new Y(G,me,null,a,X),re.push({event:G,listeners:Se}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",G&&a!==Rn&&(me=a.relatedTarget||a.fromElement)&&(qn(me)||me[xr]))break e;if((Y||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(me=a.relatedTarget||a.toElement,Y=j,me=me?qn(me):null,me!==null&&(ft=ge(me),Se=me.tag,me!==ft||Se!==5&&Se!==27&&Se!==6)&&(me=null)):(Y=null,me=j),Y!==me)){if(Se=Nn,ee="onMouseLeave",B="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Se=$o,ee="onPointerLeave",B="onPointerEnter",L="pointer"),ft=Y==null?G:_i(Y),F=me==null?G:_i(me),G=new Se(ee,L+"leave",Y,a,X),G.target=ft,G.relatedTarget=F,ee=null,qn(X)===j&&(Se=new Se(B,L+"enter",me,a,X),Se.target=F,Se.relatedTarget=ft,ee=Se),ft=ee,Y&&me)t:{for(Se=Y,B=me,L=0,F=Se;F;F=Ya(F))L++;for(F=0,ee=B;ee;ee=Ya(ee))F++;for(;0<L-F;)Se=Ya(Se),L--;for(;0<F-L;)B=Ya(B),F--;for(;L--;){if(Se===B||B!==null&&Se===B.alternate)break t;Se=Ya(Se),B=Ya(B)}Se=null}else Se=null;Y!==null&&E0(re,G,Y,Se,!1),me!==null&&ft!==null&&E0(re,ft,me,Se,!0)}}e:{if(G=j?_i(j):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var fe=Qg;else if(xt(G))if(Yg)fe=Lb;else{fe=Vb;var ke=Mb}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?j&&Uo(j.elementType)&&(fe=Qg):fe=Pb;if(fe&&(fe=fe(t,j))){Or(re,fe,a,X);break e}ke&&ke(t,G,j),t==="focusout"&&j&&G.type==="number"&&j.memoizedProps.value!=null&&pa(G,"number",G.value)}switch(ke=j?_i(j):window,t){case"focusin":(xt(ke)||ke.contentEditable==="true")&&(Aa=ke,uf=j,Ko=null);break;case"focusout":Ko=uf=Aa=null;break;case"mousedown":cf=!0;break;case"contextmenu":case"mouseup":case"dragend":cf=!1,np(re,a,X);break;case"selectionchange":if(zb)break;case"keydown":case"keyup":np(re,a,X)}var pe;if(lr)e:{switch(t){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else je?Q(t,a)&&(_e="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(_&&a.locale!=="ko"&&(je||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&je&&(pe=Bo()):(ir=X,xi="value"in ir?ir.value:ir.textContent,je=!0)),ke=Ec(j,_e),0<ke.length&&(_e=new Fo(_e,t,null,a,X),re.push({event:_e,listeners:ke}),pe?_e.data=pe:(pe=ae(a),pe!==null&&(_e.data=pe)))),(pe=y?St(t,a):Ue(t,a))&&(_e=Ec(j,"onBeforeInput"),0<_e.length&&(ke=new Fo("onBeforeInput","beforeinput",null,a,X),re.push({event:ke,listeners:_e}),ke.data=pe)),b1(re,t,j,a,X)}v0(re,r)})}function wl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Ec(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Ts(t,a),h!=null&&l.unshift(wl(t,h,d)),h=Ts(t,r),h!=null&&l.push(wl(t,h,d))),t=t.return}return l}function Ya(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function E0(t,r,a,l,h){for(var d=r._reactName,E=[];a!==null&&a!==l;){var w=a,I=w.alternate,j=w.stateNode;if(w=w.tag,I!==null&&I===l)break;w!==5&&w!==26&&w!==27||j===null||(I=j,h?(j=Ts(a,d),j!=null&&E.unshift(wl(a,j,I))):h||(j=Ts(a,d),j!=null&&E.push(wl(a,j,I)))),a=a.return}E.length!==0&&t.push({event:r,listeners:E})}var A1=/\r\n?/g,R1=/\u0000|\uFFFD/g;function T0(t){return(typeof t=="string"?t:""+t).replace(A1,`
`).replace(R1,"")}function b0(t,r){return r=T0(r),T0(t)===r}function Tc(){}function Xe(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||An(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&An(t,""+l);break;case"className":bi(t,"class",l);break;case"tabIndex":bi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bi(t,a,l);break;case"style":wu(t,l,d);break;case"data":if(r!=="object"){bi(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=rr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&Xe(t,r,"name",h.name,h,null),Xe(t,r,"formEncType",h.formEncType,h,null),Xe(t,r,"formMethod",h.formMethod,h,null),Xe(t,r,"formTarget",h.formTarget,h,null)):(Xe(t,r,"encType",h.encType,h,null),Xe(t,r,"method",h.method,h,null),Xe(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=rr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Tc);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=rr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),Ti(t,"popover",l);break;case"xlinkActuate":xn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":xn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":xn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":xn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":xn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":xn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":xn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":xn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":xn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ti(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=tf.get(a)||a,Ti(t,a,l))}}function Od(t,r,a,l,h,d){switch(a){case"style":wu(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?An(t,l):(typeof l=="number"||typeof l=="bigint")&&An(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ma.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[wt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ti(t,a,l)}}}function zt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Xe(t,r,d,E,a,null)}}h&&Xe(t,r,"srcSet",a.srcSet,a,null),l&&Xe(t,r,"src",a.src,a,null);return;case"input":Le("invalid",t);var w=d=E=h=null,I=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":E=X;break;case"checked":I=X;break;case"defaultChecked":j=X;break;case"value":d=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:Xe(t,r,l,X,a,null)}}_s(t,d,w,I,j,E,h,!1),vs(t);return;case"select":Le("invalid",t),l=E=d=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":d=w;break;case"defaultValue":E=w;break;case"multiple":l=w;default:Xe(t,r,h,w,a,null)}r=d,a=E,t.multiple=!!l,r!=null?qe(t,!!l,r,!1):a!=null&&qe(t,!!l,a,!0);return;case"textarea":Le("invalid",t),d=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(w=a[E],w!=null))switch(E){case"value":l=w;break;case"defaultValue":h=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Xe(t,r,E,w,a,null)}Si(t,l,h,d),vs(t);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xe(t,r,I,l,a,null)}return;case"dialog":Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<bl.length;l++)Le(bl[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Xe(t,r,j,l,a,null)}return;default:if(Uo(r)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&Od(t,r,X,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Xe(t,r,w,l,a,null))}function C1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,w=null,I=null,j=null,X=null;for(Y in a){var re=a[Y];if(a.hasOwnProperty(Y)&&re!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":I=re;default:l.hasOwnProperty(Y)||Xe(t,r,Y,null,l,re)}}for(var G in l){var Y=l[G];if(re=a[G],l.hasOwnProperty(G)&&(Y!=null||re!=null))switch(G){case"type":d=Y;break;case"name":h=Y;break;case"checked":j=Y;break;case"defaultChecked":X=Y;break;case"value":E=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:Y!==re&&Xe(t,r,G,Y,l,re)}}wi(t,E,w,I,j,X,d,h);return;case"select":Y=E=w=G=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":Y=I;default:l.hasOwnProperty(d)||Xe(t,r,d,null,l,I)}for(h in l)if(d=l[h],I=a[h],l.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":G=d;break;case"defaultValue":w=d;break;case"multiple":E=d;default:d!==I&&Xe(t,r,h,d,l,I)}r=w,a=E,l=Y,G!=null?qe(t,!!a,G,!1):!!l!=!!a&&(r!=null?qe(t,!!a,r,!0):qe(t,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Xe(t,r,w,null,l,h)}for(E in l)if(h=l[E],d=a[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":G=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Xe(t,r,E,h,l,d)}Es(t,G,Y);return;case"option":for(var me in a)if(G=a[me],a.hasOwnProperty(me)&&G!=null&&!l.hasOwnProperty(me))switch(me){case"selected":t.selected=!1;break;default:Xe(t,r,me,null,l,G)}for(I in l)if(G=l[I],Y=a[I],l.hasOwnProperty(I)&&G!==Y&&(G!=null||Y!=null))switch(I){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Xe(t,r,I,G,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)G=a[Se],a.hasOwnProperty(Se)&&G!=null&&!l.hasOwnProperty(Se)&&Xe(t,r,Se,null,l,G);for(j in l)if(G=l[j],Y=a[j],l.hasOwnProperty(j)&&G!==Y&&(G!=null||Y!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:Xe(t,r,j,G,l,Y)}return;default:if(Uo(r)){for(var ft in a)G=a[ft],a.hasOwnProperty(ft)&&G!==void 0&&!l.hasOwnProperty(ft)&&Od(t,r,ft,void 0,l,G);for(X in l)G=l[X],Y=a[X],!l.hasOwnProperty(X)||G===Y||G===void 0&&Y===void 0||Od(t,r,X,G,l,Y);return}}for(var B in a)G=a[B],a.hasOwnProperty(B)&&G!=null&&!l.hasOwnProperty(B)&&Xe(t,r,B,null,l,G);for(re in l)G=l[re],Y=a[re],!l.hasOwnProperty(re)||G===Y||G==null&&Y==null||Xe(t,r,re,G,l,Y)}var Md=null,Vd=null;function bc(t){return t.nodeType===9?t:t.ownerDocument}function w0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Pd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ld=null;function N1(){var t=window.event;return t&&t.type==="popstate"?t===Ld?!1:(Ld=t,!0):(Ld=null,!1)}var x0=typeof setTimeout=="function"?setTimeout:void 0,I1=typeof clearTimeout=="function"?clearTimeout:void 0,A0=typeof Promise=="function"?Promise:void 0,D1=typeof queueMicrotask=="function"?queueMicrotask:typeof A0<"u"?function(t){return A0.resolve(null).then(t).catch(k1)}:x0;function k1(t){setTimeout(function(){throw t})}function jd(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(l===0){t.removeChild(h),Dl(r);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=h}while(a);Dl(r)}function Ud(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ud(a),ys(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function O1(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[vi])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=$n(t.nextSibling),t===null)break}return null}function M1(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=$n(t.nextSibling),t===null))return null;return t}function $n(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}function R0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function C0(t,r,a){switch(r=bc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}var Un=new Map,N0=new Set;function wc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var Yr=le.d;le.d={f:V1,r:P1,D:L1,C:j1,L:U1,m:z1,X:q1,S:B1,M:H1};function V1(){var t=Yr.f(),r=gc();return t||r}function P1(t){var r=Ar(t);r!==null&&r.tag===5&&r.type==="form"?ny(r):Yr.r(t)}var Ka=typeof document>"u"?null:document;function I0(t,r,a){var l=Ka;if(l&&typeof r=="string"&&r){var h=ut(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),N0.has(h)||(N0.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),zt(r,"link",t),st(r),l.head.appendChild(r)))}}function L1(t){Yr.D(t),I0("dns-prefetch",t,null)}function j1(t,r){Yr.C(t,r),I0("preconnect",t,r)}function U1(t,r,a){Yr.L(t,r,a);var l=Ka;if(l&&t&&r){var h='link[rel="preload"][as="'+ut(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ut(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ut(a.imageSizes)+'"]')):h+='[href="'+ut(t)+'"]';var d=h;switch(r){case"style":d=Xa(t);break;case"script":d=Wa(t)}Un.has(d)||(t=A({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Un.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Sl(d))||r==="script"&&l.querySelector(xl(d))||(r=l.createElement("link"),zt(r,"link",t),st(r),l.head.appendChild(r)))}}function z1(t,r){Yr.m(t,r);var a=Ka;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+ut(l)+'"][href="'+ut(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Wa(t)}if(!Un.has(d)&&(t=A({rel:"modulepreload",href:t},r),Un.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(xl(d)))return}l=a.createElement("link"),zt(l,"link",t),st(l),a.head.appendChild(l)}}}function B1(t,r,a){Yr.S(t,r,a);var l=Ka;if(l&&t){var h=Ei(l).hoistableStyles,d=Xa(t);r=r||"default";var E=h.get(d);if(!E){var w={loading:0,preload:null};if(E=l.querySelector(Sl(d)))w.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Un.get(d))&&zd(t,a);var I=E=l.createElement("link");st(I),zt(I,"link",t),I._p=new Promise(function(j,X){I.onload=j,I.onerror=X}),I.addEventListener("load",function(){w.loading|=1}),I.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Sc(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:w},h.set(d,E)}}}function q1(t,r){Yr.X(t,r);var a=Ka;if(a&&t){var l=Ei(a).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=a.querySelector(xl(h)),d||(t=A({src:t,async:!0},r),(r=Un.get(h))&&Bd(t,r),d=a.createElement("script"),st(d),zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function H1(t,r){Yr.M(t,r);var a=Ka;if(a&&t){var l=Ei(a).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=a.querySelector(xl(h)),d||(t=A({src:t,async:!0,type:"module"},r),(r=Un.get(h))&&Bd(t,r),d=a.createElement("script"),st(d),zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function D0(t,r,a,l){var h=(h=Zt.current)?wc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Xa(a.href),a=Ei(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Xa(a.href);var d=Ei(h).hoistableStyles,E=d.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=h.querySelector(Sl(t)))&&!d._p&&(E.instance=d,E.state.loading=5),Un.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(t,a),d||F1(h,t,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Wa(a),a=Ei(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Xa(t){return'href="'+ut(t)+'"'}function Sl(t){return'link[rel="stylesheet"]['+t+"]"}function k0(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function F1(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),zt(r,"link",a),st(r),t.head.appendChild(r))}function Wa(t){return'[src="'+ut(t)+'"]'}function xl(t){return"script[async]"+t}function O0(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+ut(a.href)+'"]');if(l)return r.instance=l,st(l),l;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),st(l),zt(l,"style",h),Sc(l,a.precedence,t),r.instance=l;case"stylesheet":h=Xa(a.href);var d=t.querySelector(Sl(h));if(d)return r.state.loading|=4,r.instance=d,st(d),d;l=k0(a),(h=Un.get(h))&&zd(l,h),d=(t.ownerDocument||t).createElement("link"),st(d);var E=d;return E._p=new Promise(function(w,I){E.onload=w,E.onerror=I}),zt(d,"link",l),r.state.loading|=4,Sc(d,a.precedence,t),r.instance=d;case"script":return d=Wa(a.src),(h=t.querySelector(xl(d)))?(r.instance=h,st(h),h):(l=a,(h=Un.get(d))&&(l=A({},a),Bd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),st(h),zt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Sc(l,a.precedence,t));return r.instance}function Sc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var w=l[E];if(w.dataset.precedence===r)d=w;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function zd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Bd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var xc=null;function M0(t,r,a){if(xc===null){var l=new Map,h=xc=new Map;h.set(a,l)}else h=xc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[vi]||d[It]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(r)||"";E=t+E;var w=l.get(E);w?w.push(d):l.set(E,[d])}}return l}function V0(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function G1(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function P0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Al=null;function $1(){}function Q1(t,r,a){if(Al===null)throw Error(s(475));var l=Al;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=Xa(a.href),d=t.querySelector(Sl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Ac.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,st(d);return}d=t.ownerDocument||t,a=k0(a),(h=Un.get(h))&&zd(a,h),d=d.createElement("link"),st(d);var E=d;E._p=new Promise(function(w,I){E.onload=w,E.onerror=I}),zt(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Ac.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function Y1(){if(Al===null)throw Error(s(475));var t=Al;return t.stylesheets&&t.count===0&&qd(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&qd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Ac(){if(this.count--,this.count===0){if(this.stylesheets)qd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Rc=null;function qd(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Rc=new Map,r.forEach(K1,t),Rc=null,Ac.call(t))}function K1(t,r){if(!(r.state.loading&4)){var a=Rc.get(t);if(a)var l=a.get(null);else{a=new Map,Rc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=r.instance,E=h.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,h),a.set(E,h),this.count++,l=Ac.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Rl={$$typeof:P,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function X1(t,r,a,l,h,d,E,w){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fa(0),this.hiddenUpdates=fa(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function L0(t,r,a,l,h,d,E,w,I,j,X,re){return t=new X1(t,r,a,E,w,I,j,re),r=1,d===!0&&(r|=24),d=Ln(3,null,null,r),t.current=d,d.stateNode=t,r=Ef(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},ed(d),t}function j0(t){return t?(t=Na,t):Na}function U0(t,r,a,l,h,d){h=j0(h),l.context===null?l.context=h:l.pendingContext=h,l=Oi(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Mi(t,l,r),a!==null&&(rn(a,t,r),cl(a,t,r))}function z0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Hd(t,r){z0(t,r),(t=t.alternate)&&z0(t,r)}function B0(t){if(t.tag===13){var r=Ai(t,67108864);r!==null&&rn(r,t,67108864),Hd(t,67108864)}}var Cc=!0;function W1(t,r,a,l){var h=b.T;b.T=null;var d=le.p;try{le.p=2,Fd(t,r,a,l)}finally{le.p=d,b.T=h}}function Z1(t,r,a,l){var h=b.T;b.T=null;var d=le.p;try{le.p=8,Fd(t,r,a,l)}finally{le.p=d,b.T=h}}function Fd(t,r,a,l){if(Cc){var h=Gd(l);if(h===null)kd(t,r,l,Nc,a),H0(t,l);else if(ew(h,t,r,a,l))l.stopPropagation();else if(H0(t,l),r&4&&-1<J1.indexOf(t)){for(;h!==null;){var d=Ar(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=Bn(d.pendingLanes);if(E!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var I=1<<31-Jt(E);w.entanglements[1]|=I,E&=~I}mr(d),(ot&6)===0&&(fc=un()+500,Tl(0))}}break;case 13:w=Ai(d,2),w!==null&&rn(w,d,2),gc(),Hd(d,2)}if(d=Gd(l),d===null&&kd(t,r,l,Nc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else kd(t,r,l,null,a)}}function Gd(t){return t=ya(t),$d(t)}var Nc=null;function $d(t){if(Nc=null,t=qn(t),t!==null){var r=ge(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=Ae(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Nc=t,null}function q0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mu()){case bt:return 2;case Nt:return 8;case Sr:case gu:return 32;case No:return 268435456;default:return 32}default:return 32}}var Qd=!1,Bi=null,qi=null,Hi=null,Cl=new Map,Nl=new Map,Fi=[],J1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H0(t,r){switch(t){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Cl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(r.pointerId)}}function Il(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=Ar(r),r!==null&&B0(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function ew(t,r,a,l,h){switch(r){case"focusin":return Bi=Il(Bi,t,r,a,l,h),!0;case"dragenter":return qi=Il(qi,t,r,a,l,h),!0;case"mouseover":return Hi=Il(Hi,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return Cl.set(d,Il(Cl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Nl.set(d,Il(Nl.get(d)||null,t,r,a,l,h)),!0}return!1}function F0(t){var r=qn(t.target);if(r!==null){var a=ge(r);if(a!==null){if(r=a.tag,r===13){if(r=Ae(a),r!==null){t.blockedOn=r,yi(t.priority,function(){if(a.tag===13){var l=En(),h=Ai(a,l);h!==null&&rn(h,a,l),Hd(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Gd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Rn=l,a.target.dispatchEvent(l),Rn=null}else return r=Ar(a),r!==null&&B0(r),t.blockedOn=a,!1;r.shift()}return!0}function G0(t,r,a){Ic(t)&&a.delete(r)}function tw(){Qd=!1,Bi!==null&&Ic(Bi)&&(Bi=null),qi!==null&&Ic(qi)&&(qi=null),Hi!==null&&Ic(Hi)&&(Hi=null),Cl.forEach(G0),Nl.forEach(G0)}function Dc(t,r){t.blockedOn===r&&(t.blockedOn=null,Qd||(Qd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,tw)))}var kc=null;function $0(t){kc!==t&&(kc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){kc===t&&(kc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if($d(l||a)===null)continue;break}var d=Ar(a);d!==null&&(t.splice(r,3),r-=3,Pf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Dl(t){function r(I){return Dc(I,t)}Bi!==null&&Dc(Bi,t),qi!==null&&Dc(qi,t),Hi!==null&&Dc(Hi,t),Cl.forEach(r),Nl.forEach(r);for(var a=0;a<Fi.length;a++){var l=Fi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Fi.length&&(a=Fi[0],a.blockedOn===null);)F0(a),a.blockedOn===null&&Fi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],E=h[wt]||null;if(typeof d=="function")E||$0(a);else if(E){var w=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[wt]||null)w=E.formAction;else if($d(h)!==null)continue}else w=E.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),$0(a)}}}function Yd(t){this._internalRoot=t}Oc.prototype.render=Yd.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=En();U0(a,l,t,r,null,null)},Oc.prototype.unmount=Yd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;t.tag===0&&$a(),U0(t.current,2,null,t,null,null),gc(),r[xr]=null}};function Oc(t){this._internalRoot=t}Oc.prototype.unstable_scheduleHydration=function(t){if(t){var r=Eu();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Fi.length&&r!==0&&r<Fi[a].priority;a++);Fi.splice(a,0,t),a===0&&F0(t)}};var Q0=e.version;if(Q0!=="19.0.0")throw Error(s(527,Q0,"19.0.0"));le.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=ie(r),t=t!==null?de(t):null,t=t===null?null:t.stateNode,t};var nw={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:b,findFiberByHostInstance:qn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{hi=Mc.inject(nw),Ft=Mc}catch{}}return Ol.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=cy,d=hy,E=fy,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=L0(t,1,!1,null,null,a,l,h,d,E,w,null),t[xr]=r.current,Dd(t.nodeType===8?t.parentNode:t),new Yd(r)},Ol.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=cy,E=hy,w=fy,I=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),r=L0(t,1,!0,r,a??null,l,h,d,E,w,I,j),r.context=j0(null),a=r.current,l=En(),h=Oi(l),h.callback=null,Mi(a,h,l),r.current.lanes=l,dt(r,l),mr(r),t[xr]=r.current,Dd(t),new Oc(r)},Ol.version="19.0.0",Ol}var rv;function fw(){if(rv)return Wd.exports;rv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Wd.exports=hw(),Wd.exports}var dw=fw();const mw=j_(dw);var Ml={},iv;function gw(){if(iv)return Ml;iv=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.parse=f,Ml.serialize=p;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function f(R,P){const V=new u,q=R.length;if(q<2)return V;const U=(P==null?void 0:P.decode)||T;let $=0;do{const W=R.indexOf("=",$);if(W===-1)break;const K=R.indexOf(";",$),Z=K===-1?q:K;if(W>Z){$=R.lastIndexOf(";",W-1)+1;continue}const J=m(R,$,W),se=g(R,W,J),k=R.slice(J,se);if(V[k]===void 0){let C=m(R,W+1,Z),b=g(R,Z,C);const A=U(R.slice(C,b));V[k]=A}$=Z+1}while($<q);return V}function m(R,P,V){do{const q=R.charCodeAt(P);if(q!==32&&q!==9)return P}while(++P<V);return V}function g(R,P,V){for(;P>V;){const q=R.charCodeAt(--P);if(q!==32&&q!==9)return P+1}return V}function p(R,P,V){const q=(V==null?void 0:V.encode)||encodeURIComponent;if(!i.test(R))throw new TypeError(`argument name is invalid: ${R}`);const U=q(P);if(!e.test(U))throw new TypeError(`argument val is invalid: ${P}`);let $=R+"="+U;if(!V)return $;if(V.maxAge!==void 0){if(!Number.isInteger(V.maxAge))throw new TypeError(`option maxAge is invalid: ${V.maxAge}`);$+="; Max-Age="+V.maxAge}if(V.domain){if(!n.test(V.domain))throw new TypeError(`option domain is invalid: ${V.domain}`);$+="; Domain="+V.domain}if(V.path){if(!s.test(V.path))throw new TypeError(`option path is invalid: ${V.path}`);$+="; Path="+V.path}if(V.expires){if(!x(V.expires)||!Number.isFinite(V.expires.valueOf()))throw new TypeError(`option expires is invalid: ${V.expires}`);$+="; Expires="+V.expires.toUTCString()}if(V.httpOnly&&($+="; HttpOnly"),V.secure&&($+="; Secure"),V.partitioned&&($+="; Partitioned"),V.priority)switch(typeof V.priority=="string"?V.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${V.priority}`)}if(V.sameSite)switch(typeof V.sameSite=="string"?V.sameSite.toLowerCase():V.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${V.sameSite}`)}return $}function T(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function x(R){return o.call(R)==="[object Date]"}return Ml}gw();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sv="popstate";function pw(i={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return mm("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Gl(o)}return vw(e,n,null,i)}function nt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Kn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yw(){return Math.random().toString(36).substring(2,10)}function av(i,e){return{usr:i.state,key:i.key,idx:e}}function mm(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?po(e):e,state:n,key:e&&e.key||s||yw()}}function Gl({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function po(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function vw(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",g=null,p=T();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function T(){return(f.state||{idx:null}).idx}function x(){m="POP";let U=T(),$=U==null?null:U-p;p=U,g&&g({action:m,location:q.location,delta:$})}function R(U,$){m="PUSH";let W=mm(q.location,U,$);p=T()+1;let K=av(W,p),Z=q.createHref(W);try{f.pushState(K,"",Z)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;o.location.assign(Z)}u&&g&&g({action:m,location:q.location,delta:1})}function P(U,$){m="REPLACE";let W=mm(q.location,U,$);p=T();let K=av(W,p),Z=q.createHref(W);f.replaceState(K,"",Z),u&&g&&g({action:m,location:q.location,delta:0})}function V(U){let $=o.location.origin!=="null"?o.location.origin:o.location.href,W=typeof U=="string"?U:Gl(U);return W=W.replace(/ $/,"%20"),nt($,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,$)}let q={get action(){return m},get location(){return i(o,f)},listen(U){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(sv,x),g=U,()=>{o.removeEventListener(sv,x),g=null}},createHref(U){return e(o,U)},createURL:V,encodeLocation(U){let $=V(U);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:R,replace:P,go(U){return f.go(U)}};return q}function U_(i,e,n="/"){return _w(i,e,n,!1)}function _w(i,e,n,s){let o=typeof e=="string"?po(e):e,u=ti(o.pathname||"/",n);if(u==null)return null;let f=z_(i);Ew(f);let m=null;for(let g=0;m==null&&g<f.length;++g){let p=Dw(u);m=Nw(f[g],p,s)}return m}function z_(i,e=[],n=[],s=""){let o=(u,f,m)=>{let g={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};g.relativePath.startsWith("/")&&(nt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let p=Jr([s,g.relativePath]),T=n.concat(g);u.children&&u.children.length>0&&(nt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),z_(u.children,e,T,p)),!(u.path==null&&!u.index)&&e.push({path:p,score:Rw(p,u.index),routesMeta:T})};return i.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let g of B_(u.path))o(u,f,g)}),e}function B_(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=B_(s.join("/")),m=[];return m.push(...f.map(g=>g===""?u:[u,g].join("/"))),o&&m.push(...f),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function Ew(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:Cw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Tw=/^:[\w-]+$/,bw=3,ww=2,Sw=1,xw=10,Aw=-2,ov=i=>i==="*";function Rw(i,e){let n=i.split("/"),s=n.length;return n.some(ov)&&(s+=Aw),e&&(s+=ww),n.filter(o=>!ov(o)).reduce((o,u)=>o+(Tw.test(u)?bw:u===""?Sw:xw),s)}function Cw(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function Nw(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let g=s[m],p=m===s.length-1,T=u==="/"?e:e.slice(u.length)||"/",x=th({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},T),R=g.route;if(!x&&p&&n&&!s[s.length-1].route.index&&(x=th({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},T)),!x)return null;Object.assign(o,x.params),f.push({params:o,pathname:Jr([u,x.pathname]),pathnameBase:Vw(Jr([u,x.pathnameBase])),route:R}),x.pathnameBase!=="/"&&(u=Jr([u,x.pathnameBase]))}return f}function th(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=Iw(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((p,{paramName:T,isOptional:x},R)=>{if(T==="*"){let V=m[R]||"";f=u.slice(0,u.length-V.length).replace(/(.)\/+$/,"$1")}const P=m[R];return x&&!P?p[T]=void 0:p[T]=(P||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:f,pattern:i}}function Iw(i,e=!1,n=!0){Kn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Dw(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ti(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function kw(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?po(i):i;return{pathname:n?n.startsWith("/")?n:Ow(n,e):e,search:Pw(s),hash:Lw(o)}}function Ow(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function tm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Mw(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fm(i){let e=Mw(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Gm(i,e,n,s=!1){let o;typeof i=="string"?o=po(i):(o={...i},nt(!o.pathname||!o.pathname.includes("?"),tm("?","pathname","search",o)),nt(!o.pathname||!o.pathname.includes("#"),tm("#","pathname","hash",o)),nt(!o.search||!o.search.includes("#"),tm("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let x=e.length-1;if(!s&&f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),x-=1;o.pathname=R.join("/")}m=x>=0?e[x]:"/"}let g=kw(o,m),p=f&&f!=="/"&&f.endsWith("/"),T=(u||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||T)&&(g.pathname+="/"),g}var Jr=i=>i.join("/").replace(/\/\/+/g,"/"),Vw=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Pw=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Lw=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function jw(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var q_=["POST","PUT","PATCH","DELETE"];new Set(q_);var Uw=["GET",...q_];new Set(Uw);var yo=z.createContext(null);yo.displayName="DataRouter";var bh=z.createContext(null);bh.displayName="DataRouterState";var H_=z.createContext({isTransitioning:!1});H_.displayName="ViewTransition";var zw=z.createContext(new Map);zw.displayName="Fetchers";var Bw=z.createContext(null);Bw.displayName="Await";var Zn=z.createContext(null);Zn.displayName="Navigation";var nu=z.createContext(null);nu.displayName="Location";var br=z.createContext({outlet:null,matches:[],isDataRoute:!1});br.displayName="Route";var $m=z.createContext(null);$m.displayName="RouteError";function qw(i,{relative:e}={}){nt(vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=z.useContext(Zn),{hash:o,pathname:u,search:f}=ru(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Jr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function vo(){return z.useContext(nu)!=null}function oi(){return nt(vo(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(nu).location}var F_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function G_(i){z.useContext(Zn).static||z.useLayoutEffect(i)}function _o(){let{isDataRoute:i}=z.useContext(br);return i?tS():Hw()}function Hw(){nt(vo(),"useNavigate() may be used only in the context of a <Router> component.");let i=z.useContext(yo),{basename:e,navigator:n}=z.useContext(Zn),{matches:s}=z.useContext(br),{pathname:o}=oi(),u=JSON.stringify(Fm(s)),f=z.useRef(!1);return G_(()=>{f.current=!0}),z.useCallback((g,p={})=>{if(Kn(f.current,F_),!f.current)return;if(typeof g=="number"){n.go(g);return}let T=Gm(g,JSON.parse(u),o,p.relative==="path");i==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Jr([e,T.pathname])),(p.replace?n.replace:n.push)(T,p.state,p)},[e,n,u,o,i])}z.createContext(null);function ru(i,{relative:e}={}){let{matches:n}=z.useContext(br),{pathname:s}=oi(),o=JSON.stringify(Fm(n));return z.useMemo(()=>Gm(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function Fw(i,e){return $_(i,e)}function $_(i,e,n,s){var W;nt(vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=z.useContext(Zn),{matches:f}=z.useContext(br),m=f[f.length-1],g=m?m.params:{},p=m?m.pathname:"/",T=m?m.pathnameBase:"/",x=m&&m.route;{let K=x&&x.path||"";Q_(p,!x||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let R=oi(),P;if(e){let K=typeof e=="string"?po(e):e;nt(T==="/"||((W=K.pathname)==null?void 0:W.startsWith(T)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${K.pathname}" was given in the \`location\` prop.`),P=K}else P=R;let V=P.pathname||"/",q=V;if(T!=="/"){let K=T.replace(/^\//,"").split("/");q="/"+V.replace(/^\//,"").split("/").slice(K.length).join("/")}let U=!u&&n&&n.matches&&n.matches.length>0?n.matches:U_(i,{pathname:q});Kn(x||U!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Kn(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=Kw(U&&U.map(K=>Object.assign({},K,{params:Object.assign({},g,K.params),pathname:Jr([T,o.encodeLocation?o.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?T:Jr([T,o.encodeLocation?o.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),f,n,s);return e&&$?z.createElement(nu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},$):$}function Gw(){let i=eS(),e=jw(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=z.createElement(z.Fragment,null,z.createElement("p",null,"💿 Hey developer 👋"),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:u},"ErrorBoundary")," or"," ",z.createElement("code",{style:u},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:o},n):null,f)}var $w=z.createElement(Gw,null),Qw=class extends z.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?z.createElement(br.Provider,{value:this.props.routeContext},z.createElement($m.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Yw({routeContext:i,match:e,children:n}){let s=z.useContext(yo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(br.Provider,{value:i},n)}function Kw(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let g=o.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);nt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let f=!1,m=-1;if(n)for(let g=0;g<o.length;g++){let p=o[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=g),p.route.id){let{loaderData:T,errors:x}=n,R=p.route.loader&&!T.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||R){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,p,T)=>{let x,R=!1,P=null,V=null;n&&(x=u&&p.route.id?u[p.route.id]:void 0,P=p.route.errorElement||$w,f&&(m<0&&T===0?(Q_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,V=null):m===T&&(R=!0,V=p.route.hydrateFallbackElement||null)));let q=e.concat(o.slice(0,T+1)),U=()=>{let $;return x?$=P:R?$=V:p.route.Component?$=z.createElement(p.route.Component,null):p.route.element?$=p.route.element:$=g,z.createElement(Yw,{match:p,routeContext:{outlet:g,matches:q,isDataRoute:n!=null},children:$})};return n&&(p.route.ErrorBoundary||p.route.errorElement||T===0)?z.createElement(Qw,{location:n.location,revalidation:n.revalidation,component:P,error:x,children:U(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):U()},null)}function Qm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xw(i){let e=z.useContext(yo);return nt(e,Qm(i)),e}function Ww(i){let e=z.useContext(bh);return nt(e,Qm(i)),e}function Zw(i){let e=z.useContext(br);return nt(e,Qm(i)),e}function Ym(i){let e=Zw(i),n=e.matches[e.matches.length-1];return nt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function Jw(){return Ym("useRouteId")}function eS(){var s;let i=z.useContext($m),e=Ww("useRouteError"),n=Ym("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function tS(){let{router:i}=Xw("useNavigate"),e=Ym("useNavigate"),n=z.useRef(!1);return G_(()=>{n.current=!0}),z.useCallback(async(o,u={})=>{Kn(n.current,F_),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var lv={};function Q_(i,e,n){!e&&!lv[i]&&(lv[i]=!0,Kn(!1,n))}z.memo(nS);function nS({routes:i,future:e,state:n}){return $_(i,void 0,n,e)}function Y_({to:i,replace:e,state:n,relative:s}){nt(vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=z.useContext(Zn);Kn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=z.useContext(br),{pathname:f}=oi(),m=_o(),g=Gm(i,Fm(u),f,s==="path"),p=JSON.stringify(g);return z.useEffect(()=>{m(JSON.parse(p),{replace:e,state:n,relative:s})},[m,p,s,e,n]),null}function gr(i){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rS({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){nt(!vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),m=z.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=po(n));let{pathname:g="/",search:p="",hash:T="",state:x=null,key:R="default"}=n,P=z.useMemo(()=>{let V=ti(g,f);return V==null?null:{location:{pathname:V,search:p,hash:T,state:x,key:R},navigationType:s}},[f,g,p,T,x,R,s]);return Kn(P!=null,`<Router basename="${f}"> is not able to match the URL "${g}${p}${T}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:z.createElement(Zn.Provider,{value:m},z.createElement(nu.Provider,{children:e,value:P}))}function iS({children:i,location:e}){return Fw(gm(i),e)}function gm(i,e=[]){let n=[];return z.Children.forEach(i,(s,o)=>{if(!z.isValidElement(s))return;let u=[...e,o];if(s.type===z.Fragment){n.push.apply(n,gm(s.props.children,u));return}nt(s.type===gr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=gm(s.props.children,u)),n.push(f)}),n}var qc="get",Hc="application/x-www-form-urlencoded";function wh(i){return i!=null&&typeof i.tagName=="string"}function sS(i){return wh(i)&&i.tagName.toLowerCase()==="button"}function aS(i){return wh(i)&&i.tagName.toLowerCase()==="form"}function oS(i){return wh(i)&&i.tagName.toLowerCase()==="input"}function lS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function uS(i,e){return i.button===0&&(!e||e==="_self")&&!lS(i)}var Vc=null;function cS(){if(Vc===null)try{new FormData(document.createElement("form"),0),Vc=!1}catch{Vc=!0}return Vc}var hS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nm(i){return i!=null&&!hS.has(i)?(Kn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hc}"`),null):i}function fS(i,e){let n,s,o,u,f;if(aS(i)){let m=i.getAttribute("action");s=m?ti(m,e):null,n=i.getAttribute("method")||qc,o=nm(i.getAttribute("enctype"))||Hc,u=new FormData(i)}else if(sS(i)||oS(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?ti(g,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||qc,o=nm(i.getAttribute("formenctype"))||nm(m.getAttribute("enctype"))||Hc,u=new FormData(m,i),!cS()){let{name:p,type:T,value:x}=i;if(T==="image"){let R=p?`${p}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else p&&u.append(p,x)}}else{if(wh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qc,s=null,o=Hc,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function Km(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function dS(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function gS(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await dS(u,n);return f.links?f.links():[]}return[]}));return _S(s.flat(1).filter(mS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function uv(i,e,n,s,o,u){let f=(g,p)=>n[p]?g.route.id!==n[p].route.id:!0,m=(g,p)=>{var T;return n[p].pathname!==g.pathname||((T=n[p].route.path)==null?void 0:T.endsWith("*"))&&n[p].params["*"]!==g.params["*"]};return u==="assets"?e.filter((g,p)=>f(g,p)||m(g,p)):u==="data"?e.filter((g,p)=>{var x;let T=s.routes[g.route.id];if(!T||!T.hasLoader)return!1;if(f(g,p)||m(g,p))return!0;if(g.route.shouldRevalidate){let R=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((x=n[0])==null?void 0:x.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function pS(i,e,{includeHydrateFallback:n}={}){return yS(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function yS(i){return[...new Set(i)]}function vS(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function _S(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(vS(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function ES(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&ti(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function K_(){let i=z.useContext(yo);return Km(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function TS(){let i=z.useContext(bh);return Km(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Xm=z.createContext(void 0);Xm.displayName="FrameworkContext";function X_(){let i=z.useContext(Xm);return Km(i,"You must render this element inside a <HydratedRouter> element"),i}function bS(i,e){let n=z.useContext(Xm),[s,o]=z.useState(!1),[u,f]=z.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:p,onMouseLeave:T,onTouchStart:x}=e,R=z.useRef(null);z.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let q=$=>{$.forEach(W=>{f(W.isIntersecting)})},U=new IntersectionObserver(q,{threshold:.5});return R.current&&U.observe(R.current),()=>{U.disconnect()}}},[i]),z.useEffect(()=>{if(s){let q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(q)}}},[s]);let P=()=>{o(!0)},V=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,R,{}]:[u,R,{onFocus:Vl(m,P),onBlur:Vl(g,V),onMouseEnter:Vl(p,P),onMouseLeave:Vl(T,V),onTouchStart:Vl(x,P)}]:[!1,R,{}]}function Vl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function wS({page:i,...e}){let{router:n}=K_(),s=z.useMemo(()=>U_(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?z.createElement(xS,{page:i,matches:s,...e}):null}function SS(i){let{manifest:e,routeModules:n}=X_(),[s,o]=z.useState([]);return z.useEffect(()=>{let u=!1;return gS(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function xS({page:i,matches:e,...n}){let s=oi(),{manifest:o,routeModules:u}=X_(),{basename:f}=K_(),{loaderData:m,matches:g}=TS(),p=z.useMemo(()=>uv(i,e,g,o,s,"data"),[i,e,g,o,s]),T=z.useMemo(()=>uv(i,e,g,o,s,"assets"),[i,e,g,o,s]),x=z.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let V=new Set,q=!1;if(e.forEach($=>{var K;let W=o.routes[$.route.id];!W||!W.hasLoader||(!p.some(Z=>Z.route.id===$.route.id)&&$.route.id in m&&((K=u[$.route.id])!=null&&K.shouldRevalidate)||W.hasClientLoader?q=!0:V.add($.route.id))}),V.size===0)return[];let U=ES(i,f);return q&&V.size>0&&U.searchParams.set("_routes",e.filter($=>V.has($.route.id)).map($=>$.route.id).join(",")),[U.pathname+U.search]},[f,m,s,o,p,e,i,u]),R=z.useMemo(()=>pS(T,o),[T,o]),P=SS(T);return z.createElement(z.Fragment,null,x.map(V=>z.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),R.map(V=>z.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),P.map(({key:V,link:q})=>z.createElement("link",{key:V,...q})))}function AS(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var W_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{W_&&(window.__reactRouterVersion="7.4.0")}catch{}function RS({basename:i,children:e,window:n}){let s=z.useRef();s.current==null&&(s.current=pw({window:n,v5Compat:!0}));let o=s.current,[u,f]=z.useState({action:o.action,location:o.location}),m=z.useCallback(g=>{z.startTransition(()=>f(g))},[f]);return z.useLayoutEffect(()=>o.listen(m),[o,m]),z.createElement(rS,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Z_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tn=z.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:g,to:p,preventScrollReset:T,viewTransition:x,...R},P){let{basename:V}=z.useContext(Zn),q=typeof p=="string"&&Z_.test(p),U,$=!1;if(typeof p=="string"&&q&&(U=p,W_))try{let b=new URL(window.location.href),A=p.startsWith("//")?new URL(b.protocol+p):new URL(p),D=ti(A.pathname,V);A.origin===b.origin&&D!=null?p=D+A.search+A.hash:$=!0}catch{Kn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=qw(p,{relative:o}),[K,Z,J]=bS(s,R),se=DS(p,{replace:f,state:m,target:g,preventScrollReset:T,relative:o,viewTransition:x});function k(b){e&&e(b),b.defaultPrevented||se(b)}let C=z.createElement("a",{...R,...J,href:U||W,onClick:$||u?e:k,ref:AS(P,Z),target:g,"data-discover":!q&&n==="render"?"true":void 0});return K&&!q?z.createElement(z.Fragment,null,C,z.createElement(wS,{page:W})):C});Tn.displayName="Link";var CS=z.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:g,...p},T){let x=ru(f,{relative:p.relative}),R=oi(),P=z.useContext(bh),{navigator:V,basename:q}=z.useContext(Zn),U=P!=null&&PS(x)&&m===!0,$=V.encodeLocation?V.encodeLocation(x).pathname:x.pathname,W=R.pathname,K=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(W=W.toLowerCase(),K=K?K.toLowerCase():null,$=$.toLowerCase()),K&&q&&(K=ti(K,q)||K);const Z=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let J=W===$||!o&&W.startsWith($)&&W.charAt(Z)==="/",se=K!=null&&(K===$||!o&&K.startsWith($)&&K.charAt($.length)==="/"),k={isActive:J,isPending:se,isTransitioning:U},C=J?e:void 0,b;typeof s=="function"?b=s(k):b=[s,J?"active":null,se?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let A=typeof u=="function"?u(k):u;return z.createElement(Tn,{...p,"aria-current":C,className:b,ref:T,style:A,to:f,viewTransition:m},typeof g=="function"?g(k):g)});CS.displayName="NavLink";var NS=z.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=qc,action:m,onSubmit:g,relative:p,preventScrollReset:T,viewTransition:x,...R},P)=>{let V=MS(),q=VS(m,{relative:p}),U=f.toLowerCase()==="get"?"get":"post",$=typeof m=="string"&&Z_.test(m),W=K=>{if(g&&g(K),K.defaultPrevented)return;K.preventDefault();let Z=K.nativeEvent.submitter,J=(Z==null?void 0:Z.getAttribute("formmethod"))||f;V(Z||K.currentTarget,{fetcherKey:e,method:J,navigate:n,replace:o,state:u,relative:p,preventScrollReset:T,viewTransition:x})};return z.createElement("form",{ref:P,method:U,action:q,onSubmit:s?g:W,...R,"data-discover":!$&&i==="render"?"true":void 0})});NS.displayName="Form";function IS(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J_(i){let e=z.useContext(yo);return nt(e,IS(i)),e}function DS(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=_o(),g=oi(),p=ru(i,{relative:u});return z.useCallback(T=>{if(uS(T,e)){T.preventDefault();let x=n!==void 0?n:Gl(g)===Gl(p);m(i,{replace:x,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[g,m,p,n,s,e,i,o,u,f])}var kS=0,OS=()=>`__${String(++kS)}__`;function MS(){let{router:i}=J_("useSubmit"),{basename:e}=z.useContext(Zn),n=Jw();return z.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:g,body:p}=fS(s,e);if(o.navigate===!1){let T=o.fetcherKey||OS();await i.fetch(T,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function VS(i,{relative:e}={}){let{basename:n}=z.useContext(Zn),s=z.useContext(br);nt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...ru(i||".",{relative:e})},f=oi();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(T=>T==="")){m.delete("index"),g.filter(x=>x).forEach(x=>m.append("index",x));let T=m.toString();u.search=T?`?${T}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Jr([n,u.pathname])),Gl(u)}function PS(i,e={}){let n=z.useContext(H_);nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=J_("useViewTransitionState"),o=ru(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=ti(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=ti(n.nextLocation.pathname,s)||n.nextLocation.pathname;return th(o.pathname,f)!=null||th(o.pathname,u)!=null}new TextEncoder;const LS=()=>{};var cv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},jS=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},tE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,g=o+2<i.length,p=g?i[o+2]:0,T=u>>2,x=(u&3)<<4|m>>4;let R=(m&15)<<2|p>>6,P=p&63;g||(P=64,f||(R=64)),s.push(n[T],n[x],n[R],n[P])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(eE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):jS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const p=o<i.length?n[i.charAt(o)]:64;++o;const x=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||p==null||x==null)throw new US;const R=u<<2|m>>4;if(s.push(R),p!==64){const P=m<<4&240|p>>2;if(s.push(P),x!==64){const V=p<<6&192|x;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class US extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zS=function(i){const e=eE(i);return tE.encodeByteArray(e,!0)},nh=function(i){return zS(i).replace(/\./g,"")},nE=function(i){try{return tE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=()=>BS().__FIREBASE_DEFAULTS__,HS=()=>{if(typeof process>"u"||typeof cv>"u")return;const i=cv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},FS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&nE(i[1]);return e&&JSON.parse(e)},Sh=()=>{try{return LS()||qS()||HS()||FS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},rE=i=>{var e,n;return(n=(e=Sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},GS=i=>{const e=rE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},iE=()=>{var i;return(i=Sh())===null||i===void 0?void 0:i.config},sE=i=>{var e;return(e=Sh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[nh(JSON.stringify(n)),nh(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function KS(){var i;const e=(i=Sh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function ZS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JS(){const i=Xt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ex(){return!KS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tx(){try{return typeof indexedDB=="object"}catch{return!1}}function nx(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="FirebaseError";class li extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=rx,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iu.prototype.create)}}class iu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?ix(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new li(o,m,s)}}function ix(i,e){return i.replace(sx,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const sx=/\{\$([^}]+)}/g;function ax(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ws(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(hv(u)&&hv(f)){if(!Ws(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function hv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ox(i,e){const n=new lx(i,e);return n.subscribe.bind(n)}class lx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");ux(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=rm),o.error===void 0&&(o.error=rm),o.complete===void 0&&(o.complete=rm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ux(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function rm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(i){return i&&i._delegate?i._delegate:i}class Zs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new $S;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fx(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:hx(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hx(i){return i===Qs?void 0:i}function fx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Me||(Me={}));const mx={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},gx=Me.INFO,px={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},yx=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=px[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wm{constructor(e){this.name=e,this._logLevel=gx,this._logHandler=yx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const vx=(i,e)=>e.some(n=>i instanceof n);let fv,dv;function _x(){return fv||(fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ex(){return dv||(dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aE=new WeakMap,pm=new WeakMap,oE=new WeakMap,im=new WeakMap,Zm=new WeakMap;function Tx(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(Zi(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&aE.set(n,i)}).catch(()=>{}),Zm.set(e,i),e}function bx(i){if(pm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});pm.set(i,e)}let ym={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return pm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||oE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zi(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function wx(i){ym=i(ym)}function Sx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(sm(this),e,...n);return oE.set(s,e.sort?e.sort():[e]),Zi(s)}:Ex().includes(i)?function(...e){return i.apply(sm(this),e),Zi(aE.get(this))}:function(...e){return Zi(i.apply(sm(this),e))}}function xx(i){return typeof i=="function"?Sx(i):(i instanceof IDBTransaction&&bx(i),vx(i,_x())?new Proxy(i,ym):i)}function Zi(i){if(i instanceof IDBRequest)return Tx(i);if(im.has(i))return im.get(i);const e=xx(i);return e!==i&&(im.set(i,e),Zm.set(e,i)),e}const sm=i=>Zm.get(i);function Ax(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=Zi(f);return s&&f.addEventListener("upgradeneeded",g=>{s(Zi(f.result),g.oldVersion,g.newVersion,Zi(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const Rx=["get","getKey","getAll","getAllKeys","count"],Cx=["put","add","delete","clear"],am=new Map;function mv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(am.get(e))return am.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Cx.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Rx.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[n](...m),o&&g.done]))[0]};return am.set(e,u),u}wx(i=>({...i,get:(e,n,s)=>mv(e,n)||i.get(e,n,s),has:(e,n)=>!!mv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ix(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Ix(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vm="@firebase/app",gv="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new Wm("@firebase/app"),Dx="@firebase/app-compat",kx="@firebase/analytics-compat",Ox="@firebase/analytics",Mx="@firebase/app-check-compat",Vx="@firebase/app-check",Px="@firebase/auth",Lx="@firebase/auth-compat",jx="@firebase/database",Ux="@firebase/data-connect",zx="@firebase/database-compat",Bx="@firebase/functions",qx="@firebase/functions-compat",Hx="@firebase/installations",Fx="@firebase/installations-compat",Gx="@firebase/messaging",$x="@firebase/messaging-compat",Qx="@firebase/performance",Yx="@firebase/performance-compat",Kx="@firebase/remote-config",Xx="@firebase/remote-config-compat",Wx="@firebase/storage",Zx="@firebase/storage-compat",Jx="@firebase/firestore",eA="@firebase/vertexai",tA="@firebase/firestore-compat",nA="firebase",rA="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="[DEFAULT]",iA={[vm]:"fire-core",[Dx]:"fire-core-compat",[Ox]:"fire-analytics",[kx]:"fire-analytics-compat",[Vx]:"fire-app-check",[Mx]:"fire-app-check-compat",[Px]:"fire-auth",[Lx]:"fire-auth-compat",[jx]:"fire-rtdb",[Ux]:"fire-data-connect",[zx]:"fire-rtdb-compat",[Bx]:"fire-fn",[qx]:"fire-fn-compat",[Hx]:"fire-iid",[Fx]:"fire-iid-compat",[Gx]:"fire-fcm",[$x]:"fire-fcm-compat",[Qx]:"fire-perf",[Yx]:"fire-perf-compat",[Kx]:"fire-rc",[Xx]:"fire-rc-compat",[Wx]:"fire-gcs",[Zx]:"fire-gcs-compat",[Jx]:"fire-fst",[tA]:"fire-fst-compat",[eA]:"fire-vertex","fire-js":"fire-js",[nA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Map,sA=new Map,Em=new Map;function pv(i,e){try{i.container.addComponent(e)}catch(n){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function ao(i){const e=i.name;if(Em.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;Em.set(e,i);for(const n of rh.values())pv(n,i);for(const n of sA.values())pv(n,i);return!0}function Jm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Qn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new iu("app","Firebase",aA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=rA;function lE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:_m,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Ji.create("bad-app-name",{appName:String(o)});if(n||(n=iE()),!n)throw Ji.create("no-options");const u=rh.get(o);if(u){if(Ws(n,u.options)&&Ws(s,u.config))return u;throw Ji.create("duplicate-app",{appName:o})}const f=new dx(o);for(const g of Em.values())f.addComponent(g);const m=new oA(n,s,f);return rh.set(o,m),m}function uE(i=_m){const e=rh.get(i);if(!e&&i===_m&&iE())return lE();if(!e)throw Ji.create("no-app",{appName:i});return e}function es(i,e,n){var s;let o=(s=iA[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ni.warn(m.join(" "));return}ao(new Zs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="firebase-heartbeat-database",uA=1,$l="firebase-heartbeat-store";let om=null;function cE(){return om||(om=Ax(lA,uA,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore($l)}catch(n){console.warn(n)}}}}).catch(i=>{throw Ji.create("idb-open",{originalErrorMessage:i.message})})),om}async function cA(i){try{const n=(await cE()).transaction($l),s=await n.objectStore($l).get(hE(i));return await n.done,s}catch(e){if(e instanceof li)ni.warn(e.message);else{const n=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ni.warn(n.message)}}}async function yv(i,e){try{const s=(await cE()).transaction($l,"readwrite");await s.objectStore($l).put(e,hE(i)),await s.done}catch(n){if(n instanceof li)ni.warn(n.message);else{const s=Ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ni.warn(s.message)}}}function hE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=1024,fA=30;class dA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=vv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>fA){const f=pA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ni.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vv(),{heartbeatsToSend:s,unsentEntries:o}=mA(this._heartbeatsCache.heartbeats),u=nh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return ni.warn(n),""}}}function vv(){return new Date().toISOString().substring(0,10)}function mA(i,e=hA){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),_v(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),_v(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class gA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tx()?nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function _v(i){return nh(JSON.stringify({version:2,heartbeats:i})).length}function pA(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(i){ao(new Zs("platform-logger",e=>new Nx(e),"PRIVATE")),ao(new Zs("heartbeat",e=>new dA(e),"PRIVATE")),es(vm,gv,i),es(vm,gv,"esm2017"),es("fire-js","")}yA("");function eg(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function fE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vA=fE,dE=new iu("auth","Firebase",fE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Wm("@firebase/auth");function _A(i,...e){ih.logLevel<=Me.WARN&&ih.warn(`Auth (${Eo}): ${i}`,...e)}function Fc(i,...e){ih.logLevel<=Me.ERROR&&ih.error(`Auth (${Eo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(i,...e){throw ng(i,...e)}function Yn(i,...e){return ng(i,...e)}function tg(i,e,n){const s=Object.assign(Object.assign({},vA()),{[e]:n});return new iu("auth","Firebase",s).create(e,{appName:i.name})}function Xs(i){return tg(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function EA(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Er(i,"argument-error"),tg(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ng(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return dE.create(i,...e)}function Te(i,e,...n){if(!i)throw ng(e,...n)}function Xr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Fc(e),new Error(e)}function ri(i,e){i||Xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function TA(){return Ev()==="http:"||Ev()==="https:"}function Ev(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TA()||WS()||"connection"in navigator)?navigator.onLine:!0}function wA(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.shortDelay=e,this.longDelay=n,ri(n>e,"Short delay should be less than long delay!"),this.isMobile=YS()||ZS()}get(){return bA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(i,e){ri(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new au(3e4,6e4);function ig(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function To(i,e,n,s,o={}){return gE(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=su(Object.assign({key:i.config.apiKey},f)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const p=Object.assign({method:e,headers:g},u);return XS()||(p.referrerPolicy="no-referrer"),mE.fetch()(pE(i,i.config.apiHost,n,m),p)})}async function gE(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},SA),e);try{const o=new RA(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Pc(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(i,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Pc(i,"email-already-in-use",f);if(g==="USER_DISABLED")throw Pc(i,"user-disabled",f);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw tg(i,T,p);Er(i,T)}}catch(o){if(o instanceof li)throw o;Er(i,"network-request-failed",{message:String(o)})}}async function AA(i,e,n,s,o={}){const u=await To(i,e,n,s,o);return"mfaPendingCredential"in u&&Er(i,"multi-factor-auth-required",{_serverResponse:u}),u}function pE(i,e,n,s){const o=`${e}${n}?${s}`;return i.config.emulator?rg(i.config,o):`${i.config.apiScheme}://${o}`}class RA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Yn(this.auth,"network-request-failed")),xA.get())})}}function Pc(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Yn(i,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(i,e){return To(i,"POST","/v1/accounts:delete",e)}async function yE(i,e){return To(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NA(i,e=!1){const n=an(i),s=await n.getIdToken(e),o=sg(s);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:zl(lm(o.auth_time)),issuedAtTime:zl(lm(o.iat)),expirationTime:zl(lm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function lm(i){return Number(i)*1e3}function sg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Fc("JWT malformed, contained fewer than 3 sections"),null;try{const o=nE(n);return o?JSON.parse(o):(Fc("Failed to decode base64 JWT payload"),null)}catch(o){return Fc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Tv(i){const e=sg(i);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof li&&IA(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function IA({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(i){var e;const n=i.auth,s=await i.getIdToken(),o=await Ql(i,yE(n,{idToken:s}));Te(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?vE(u.providerUserInfo):[],m=OA(i.providerData,f),g=i.isAnonymous,p=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),T=g?p:!1,x={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new bm(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(i,x)}async function kA(i){const e=an(i);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OA(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function vE(i){return i.map(e=>{var{providerId:n}=e,s=eg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(i,e){const n=await gE(i,{},async()=>{const s=su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=pE(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",mE.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VA(i,e){return To(i,"POST","/v2/accounts:revokeToken",ig(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=Tv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await MA(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new no;return s&&(Te(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return Xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(i,e){Te(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Wr{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=eg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new bm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Ql(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NA(this,e)}reload(){return kA(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await sh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Xs(this.auth));const e=await this.getIdToken();return await Ql(this,CA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,g,p,T;const x=(s=n.displayName)!==null&&s!==void 0?s:void 0,R=(o=n.email)!==null&&o!==void 0?o:void 0,P=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,V=(f=n.photoURL)!==null&&f!==void 0?f:void 0,q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,U=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,$=(p=n.createdAt)!==null&&p!==void 0?p:void 0,W=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:K,emailVerified:Z,isAnonymous:J,providerData:se,stsTokenManager:k}=n;Te(K&&k,e,"internal-error");const C=no.fromJSON(this.name,k);Te(typeof K=="string",e,"internal-error"),$i(x,e.name),$i(R,e.name),Te(typeof Z=="boolean",e,"internal-error"),Te(typeof J=="boolean",e,"internal-error"),$i(P,e.name),$i(V,e.name),$i(q,e.name),$i(U,e.name),$i($,e.name),$i(W,e.name);const b=new Wr({uid:K,auth:e,email:R,emailVerified:Z,displayName:x,isAnonymous:J,photoURL:V,phoneNumber:P,tenantId:q,stsTokenManager:C,createdAt:$,lastLoginAt:W});return se&&Array.isArray(se)&&(b.providerData=se.map(A=>Object.assign({},A))),U&&(b._redirectEventId=U),b}static async _fromIdTokenResponse(e,n,s=!1){const o=new no;o.updateFromServerResponse(n);const u=new Wr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await sh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?vE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new no;m.updateFromIdToken(s);const g=new Wr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new bm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Map;function Zr(i){ri(i instanceof Function,"Expected a class definition");let e=bv.get(i);return e?(ri(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,bv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_E.type="NONE";const wv=_E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(i,e,n){return`firebase:${i}:${e}:${n}`}class ro{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Gc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Gc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ro(Zr(wv),e,s);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Zr(wv);const f=Gc(s,e.config.apiKey,e.name);let m=null;for(const p of n)try{const T=await p._get(f);if(T){const x=Wr._fromJSON(e,T);p!==u&&(m=x),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new ro(u,e,s):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new ro(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xE(e))return"Blackberry";if(AE(e))return"Webos";if(TE(e))return"Safari";if((e.includes("chrome/")||bE(e))&&!e.includes("edge/"))return"Chrome";if(SE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function EE(i=Xt()){return/firefox\//i.test(i)}function TE(i=Xt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bE(i=Xt()){return/crios\//i.test(i)}function wE(i=Xt()){return/iemobile/i.test(i)}function SE(i=Xt()){return/android/i.test(i)}function xE(i=Xt()){return/blackberry/i.test(i)}function AE(i=Xt()){return/webos/i.test(i)}function ag(i=Xt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function PA(i=Xt()){var e;return ag(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LA(){return JS()&&document.documentMode===10}function RE(i=Xt()){return ag(i)||SE(i)||AE(i)||xE(i)||/windows phone/i.test(i)||wE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(i,e=[]){let n;switch(i){case"Browser":n=Sv(Xt());break;case"Worker":n=`${Sv(Xt())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Eo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const g=e(u);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(i,e={}){return To(i,"GET","/v2/passwordPolicy",ig(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=6;class BA{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:zA,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(f=g.containsNumericCharacter)!==null&&f!==void 0?f:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xv(this),this.idTokenSubscription=new xv(this),this.beforeStateQueue=new jA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zr(n)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await ro.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yE(this,{idToken:e}),s=await Wr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Xs(this));const n=e?an(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UA(this),n=new BA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new iu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await VA(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await ro.create(this,[Zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_A(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xh(i){return an(i)}class xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=ox(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HA(i){og=i}function FA(i){return og.loadJS(i)}function GA(){return og.gapiScript}function $A(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(i,e){const n=Jm(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ws(u,e??{}))return o;Er(o,"already-initialized")}return n.initialize({options:e})}function YA(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Zr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function KA(i,e,n){const s=xh(i);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=NE(e),{host:f,port:m}=XA(e),g=m===null?"":`:${m}`,p={url:`${u}//${f}${g}/`},T=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(Ws(p,s.config.emulator)&&Ws(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,WA()}function NE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function XA(i){const e=NE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Av(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Av(f)}}}function Av(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function WA(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,n){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(i,e){return AA(i,"POST","/v1/accounts:signInWithIdp",ig(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="http://localhost";class Js extends IE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=eg(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new Js(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,io(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:ZA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=su(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends lg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends ou{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Js._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Kr.credential(n,s)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends ou{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com";Yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends ou{constructor(){super("twitter.com")}static credential(e,n){return Js._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ki.credential(n,s)}catch{return null}}}Ki.TWITTER_SIGN_IN_METHOD="twitter.com";Ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Wr._fromIdTokenResponse(e,s,o),f=Rv(s);return new oo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Rv(s);return new oo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Rv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends li{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ah.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new ah(e,n,s,o)}}function DE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ah._fromErrorAndOperation(i,u,e,s):u})}async function JA(i,e,n=!1){const s=await Ql(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return oo._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(i,e,n=!1){const{auth:s}=i;if(Qn(s.app))return Promise.reject(Xs(s));const o="reauthenticate";try{const u=await Ql(i,DE(s,o,e,i),n);Te(u.idToken,s,"internal-error");const f=sg(u.idToken);Te(f,s,"internal-error");const{sub:m}=f;return Te(i.uid===m,s,"user-mismatch"),oo._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Er(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(i,e,n=!1){if(Qn(i.app))return Promise.reject(Xs(i));const s="signIn",o=await DE(i,s,e),u=await oo._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function n2(i,e,n,s){return an(i).onIdTokenChanged(e,n,s)}function r2(i,e,n){return an(i).beforeAuthStateChanged(e,n)}const oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oh,"1"),this.storage.removeItem(oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=1e3,s2=10;class OE extends kE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);LA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,s2):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}OE.type="LOCAL";const a2=OE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME extends kE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ME.type="SESSION";const VE=ME;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Ah(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async p=>p(n.origin,u)),g=await o2(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const p=ug("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(x){const R=x;if(R.data.eventId===p)switch(R.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(){return window}function u2(i){yr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function c2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h2(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function f2(){return PE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firebaseLocalStorageDb",d2=1,lh="firebaseLocalStorage",jE="fbase_key";class lu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rh(i,e){return i.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function m2(){const i=indexedDB.deleteDatabase(LE);return new lu(i).toPromise()}function wm(){const i=indexedDB.open(LE,d2);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(lh,{keyPath:jE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(lh)?e(s):(s.close(),await m2(),e(await wm()))})})}async function Cv(i,e,n){const s=Rh(i,!0).put({[jE]:e,value:n});return new lu(s).toPromise()}async function g2(i,e){const n=Rh(i,!1).get(e),s=await new lu(n).toPromise();return s===void 0?null:s.value}function Nv(i,e){const n=Rh(i,!0).delete(e);return new lu(n).toPromise()}const p2=800,y2=3;class UE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>y2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ah._getInstance(f2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await c2(),!this.activeServiceWorker)return;this.sender=new l2(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wm();return await Cv(e,oh,"1"),await Nv(e,oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Cv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>g2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Rh(o,!1).getAll();return new lu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UE.type="LOCAL";const v2=UE;new au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(i,e){return e?Zr(e):(Te(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg extends IE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _2(i){return t2(i.auth,new cg(i),i.bypassAuthState)}function E2(i){const{auth:e,user:n}=i;return Te(n,e,"internal-error"),e2(n,new cg(i),i.bypassAuthState)}async function T2(i){const{auth:e,user:n}=i;return Te(n,e,"internal-error"),JA(n,new cg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _2;case"linkViaPopup":case"linkViaRedirect":return T2;case"reauthViaPopup":case"reauthViaRedirect":return E2;default:Er(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new au(2e3,1e4);async function w2(i,e,n){if(Qn(i.app))return Promise.reject(Yn(i,"operation-not-supported-in-this-environment"));const s=xh(i);EA(i,e,lg);const o=zE(s,n);return new Ys(s,"signInViaPopup",e,o).executeNotNull()}class Ys extends BE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Ys.currentPopupAction&&Ys.currentPopupAction.cancel(),Ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b2.get())};e()}}Ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="pendingRedirect",$c=new Map;class x2 extends BE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=$c.get(this.auth._key());if(!e){try{const s=await A2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}$c.set(this.auth._key(),e)}return this.bypassAuthState||$c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A2(i,e){const n=N2(e),s=C2(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function R2(i,e){$c.set(i._key(),e)}function C2(i){return Zr(i._redirectPersistence)}function N2(i){return Gc(S2,i.config.apiKey,i.name)}async function I2(i,e,n=!1){if(Qn(i.app))return Promise.reject(Xs(i));const s=xh(i),o=zE(s,e),f=await new x2(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=10*60*1e3;class k2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!qE(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iv(e))}saveEventToCache(e){this.cachedEventUids.add(Iv(e)),this.lastProcessedEventTime=Date.now()}}function Iv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function qE({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function O2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qE(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(i,e={}){return To(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P2=/^https?/;async function L2(i){if(i.config.emulator)return;const{authorizedDomains:e}=await M2(i);for(const n of e)try{if(j2(n))return}catch{}Er(i,"unauthorized-domain")}function j2(i){const e=Tm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!P2.test(n))return!1;if(V2.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new au(3e4,6e4);function Dv(){const i=yr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function z2(i){return new Promise((e,n)=>{var s,o,u;function f(){Dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dv(),n(Yn(i,"network-request-failed"))},timeout:U2.get()})}if(!((o=(s=yr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=yr().gapi)===null||u===void 0)&&u.load)f();else{const m=$A("iframefcb");return yr()[m]=()=>{gapi.load?f():n(Yn(i,"network-request-failed"))},FA(`${GA()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw Qc=null,e})}let Qc=null;function B2(i){return Qc=Qc||z2(i),Qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new au(5e3,15e3),H2="__/auth/iframe",F2="emulator/auth/iframe",G2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q2(i){const e=i.config;Te(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?rg(e,F2):`https://${i.config.authDomain}/${H2}`,s={apiKey:e.apiKey,appName:i.name,v:Eo},o=$2.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${su(s).slice(1)}`}async function Y2(i){const e=await B2(i),n=yr().gapi;return Te(n,i,"internal-error"),e.open({where:document.body,url:Q2(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G2,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Yn(i,"network-request-failed"),m=yr().setTimeout(()=>{u(f)},q2.get());function g(){yr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X2=500,W2=600,Z2="_blank",J2="http://localhost";class kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eR(i,e,n,s=X2,o=W2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},K2),{width:s.toString(),height:o.toString(),top:u,left:f}),p=Xt().toLowerCase();n&&(m=bE(p)?Z2:n),EE(p)&&(e=e||J2,g.scrollbars="yes");const T=Object.entries(g).reduce((R,[P,V])=>`${R}${P}=${V},`,"");if(PA(p)&&m!=="_self")return tR(e||"",m),new kv(null);const x=window.open(e||"",m,T);Te(x,i,"popup-blocked");try{x.focus()}catch{}return new kv(x)}function tR(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="__/auth/handler",rR="emulator/auth/handler",iR=encodeURIComponent("fac");async function Ov(i,e,n,s,o,u){Te(i.config.authDomain,i,"auth-domain-config-required"),Te(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Eo,eventId:o};if(e instanceof lg){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",ax(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,x]of Object.entries({}))f[T]=x}if(e instanceof ou){const T=e.getScopes().filter(x=>x!=="");T.length>0&&(f.scopes=T.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await i._getAppCheckToken(),p=g?`#${iR}=${encodeURIComponent(g)}`:"";return`${sR(i)}?${su(m).slice(1)}${p}`}function sR({config:i}){return i.emulator?rg(i,rR):`https://${i.authDomain}/${nR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VE,this._completeRedirectFn=I2,this._overrideRedirectResult=R2}async _openPopup(e,n,s,o){var u;ri((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await Ov(e,n,s,Tm(),o);return eR(e,f,ug())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Ov(e,n,s,Tm(),o);return u2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ri(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Y2(e),s=new k2(e);return n.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(um,{type:um},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[um];f!==void 0&&n(!!f),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RE()||TE()||ag()}}const oR=aR;var Mv="@firebase/auth",Vv="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cR(i){ao(new Zs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Te(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CE(i)},p=new qA(s,o,u,g);return YA(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ao(new Zs("auth-internal",e=>{const n=xh(e.getProvider("auth").getImmediate());return(s=>new lR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(Mv,Vv,uR(i)),es(Mv,Vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=5*60,fR=sE("authIdTokenMaxAge")||hR;let Pv=null;const dR=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>fR)return;const o=n==null?void 0:n.token;Pv!==o&&(Pv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mR(i=uE()){const e=Jm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=QA(i,{popupRedirectResolver:oR,persistence:[v2,a2,VE]}),s=sE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=dR(u.toString());r2(n,f,()=>f(n.currentUser)),n2(n,m=>f(m))}}const o=rE("auth");return o&&KA(n,`http://${o}`),n}function gR(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}HA({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Yn("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",gR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cR("Browser");var pR="firebase",yR="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(pR,yR,"app");var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ts,HE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,C){function b(){}b.prototype=C.prototype,k.D=C.prototype,k.prototype=new b,k.prototype.constructor=k,k.C=function(A,D,O){for(var N=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)N[Ge-2]=arguments[Ge];return C.prototype[D].apply(A,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,C,b){b||(b=0);var A=Array(16);if(typeof C=="string")for(var D=0;16>D;++D)A[D]=C.charCodeAt(b++)|C.charCodeAt(b++)<<8|C.charCodeAt(b++)<<16|C.charCodeAt(b++)<<24;else for(D=0;16>D;++D)A[D]=C[b++]|C[b++]<<8|C[b++]<<16|C[b++]<<24;C=k.g[0],b=k.g[1],D=k.g[2];var O=k.g[3],N=C+(O^b&(D^O))+A[0]+3614090360&4294967295;C=b+(N<<7&4294967295|N>>>25),N=O+(D^C&(b^D))+A[1]+3905402710&4294967295,O=C+(N<<12&4294967295|N>>>20),N=D+(b^O&(C^b))+A[2]+606105819&4294967295,D=O+(N<<17&4294967295|N>>>15),N=b+(C^D&(O^C))+A[3]+3250441966&4294967295,b=D+(N<<22&4294967295|N>>>10),N=C+(O^b&(D^O))+A[4]+4118548399&4294967295,C=b+(N<<7&4294967295|N>>>25),N=O+(D^C&(b^D))+A[5]+1200080426&4294967295,O=C+(N<<12&4294967295|N>>>20),N=D+(b^O&(C^b))+A[6]+2821735955&4294967295,D=O+(N<<17&4294967295|N>>>15),N=b+(C^D&(O^C))+A[7]+4249261313&4294967295,b=D+(N<<22&4294967295|N>>>10),N=C+(O^b&(D^O))+A[8]+1770035416&4294967295,C=b+(N<<7&4294967295|N>>>25),N=O+(D^C&(b^D))+A[9]+2336552879&4294967295,O=C+(N<<12&4294967295|N>>>20),N=D+(b^O&(C^b))+A[10]+4294925233&4294967295,D=O+(N<<17&4294967295|N>>>15),N=b+(C^D&(O^C))+A[11]+2304563134&4294967295,b=D+(N<<22&4294967295|N>>>10),N=C+(O^b&(D^O))+A[12]+1804603682&4294967295,C=b+(N<<7&4294967295|N>>>25),N=O+(D^C&(b^D))+A[13]+4254626195&4294967295,O=C+(N<<12&4294967295|N>>>20),N=D+(b^O&(C^b))+A[14]+2792965006&4294967295,D=O+(N<<17&4294967295|N>>>15),N=b+(C^D&(O^C))+A[15]+1236535329&4294967295,b=D+(N<<22&4294967295|N>>>10),N=C+(D^O&(b^D))+A[1]+4129170786&4294967295,C=b+(N<<5&4294967295|N>>>27),N=O+(b^D&(C^b))+A[6]+3225465664&4294967295,O=C+(N<<9&4294967295|N>>>23),N=D+(C^b&(O^C))+A[11]+643717713&4294967295,D=O+(N<<14&4294967295|N>>>18),N=b+(O^C&(D^O))+A[0]+3921069994&4294967295,b=D+(N<<20&4294967295|N>>>12),N=C+(D^O&(b^D))+A[5]+3593408605&4294967295,C=b+(N<<5&4294967295|N>>>27),N=O+(b^D&(C^b))+A[10]+38016083&4294967295,O=C+(N<<9&4294967295|N>>>23),N=D+(C^b&(O^C))+A[15]+3634488961&4294967295,D=O+(N<<14&4294967295|N>>>18),N=b+(O^C&(D^O))+A[4]+3889429448&4294967295,b=D+(N<<20&4294967295|N>>>12),N=C+(D^O&(b^D))+A[9]+568446438&4294967295,C=b+(N<<5&4294967295|N>>>27),N=O+(b^D&(C^b))+A[14]+3275163606&4294967295,O=C+(N<<9&4294967295|N>>>23),N=D+(C^b&(O^C))+A[3]+4107603335&4294967295,D=O+(N<<14&4294967295|N>>>18),N=b+(O^C&(D^O))+A[8]+1163531501&4294967295,b=D+(N<<20&4294967295|N>>>12),N=C+(D^O&(b^D))+A[13]+2850285829&4294967295,C=b+(N<<5&4294967295|N>>>27),N=O+(b^D&(C^b))+A[2]+4243563512&4294967295,O=C+(N<<9&4294967295|N>>>23),N=D+(C^b&(O^C))+A[7]+1735328473&4294967295,D=O+(N<<14&4294967295|N>>>18),N=b+(O^C&(D^O))+A[12]+2368359562&4294967295,b=D+(N<<20&4294967295|N>>>12),N=C+(b^D^O)+A[5]+4294588738&4294967295,C=b+(N<<4&4294967295|N>>>28),N=O+(C^b^D)+A[8]+2272392833&4294967295,O=C+(N<<11&4294967295|N>>>21),N=D+(O^C^b)+A[11]+1839030562&4294967295,D=O+(N<<16&4294967295|N>>>16),N=b+(D^O^C)+A[14]+4259657740&4294967295,b=D+(N<<23&4294967295|N>>>9),N=C+(b^D^O)+A[1]+2763975236&4294967295,C=b+(N<<4&4294967295|N>>>28),N=O+(C^b^D)+A[4]+1272893353&4294967295,O=C+(N<<11&4294967295|N>>>21),N=D+(O^C^b)+A[7]+4139469664&4294967295,D=O+(N<<16&4294967295|N>>>16),N=b+(D^O^C)+A[10]+3200236656&4294967295,b=D+(N<<23&4294967295|N>>>9),N=C+(b^D^O)+A[13]+681279174&4294967295,C=b+(N<<4&4294967295|N>>>28),N=O+(C^b^D)+A[0]+3936430074&4294967295,O=C+(N<<11&4294967295|N>>>21),N=D+(O^C^b)+A[3]+3572445317&4294967295,D=O+(N<<16&4294967295|N>>>16),N=b+(D^O^C)+A[6]+76029189&4294967295,b=D+(N<<23&4294967295|N>>>9),N=C+(b^D^O)+A[9]+3654602809&4294967295,C=b+(N<<4&4294967295|N>>>28),N=O+(C^b^D)+A[12]+3873151461&4294967295,O=C+(N<<11&4294967295|N>>>21),N=D+(O^C^b)+A[15]+530742520&4294967295,D=O+(N<<16&4294967295|N>>>16),N=b+(D^O^C)+A[2]+3299628645&4294967295,b=D+(N<<23&4294967295|N>>>9),N=C+(D^(b|~O))+A[0]+4096336452&4294967295,C=b+(N<<6&4294967295|N>>>26),N=O+(b^(C|~D))+A[7]+1126891415&4294967295,O=C+(N<<10&4294967295|N>>>22),N=D+(C^(O|~b))+A[14]+2878612391&4294967295,D=O+(N<<15&4294967295|N>>>17),N=b+(O^(D|~C))+A[5]+4237533241&4294967295,b=D+(N<<21&4294967295|N>>>11),N=C+(D^(b|~O))+A[12]+1700485571&4294967295,C=b+(N<<6&4294967295|N>>>26),N=O+(b^(C|~D))+A[3]+2399980690&4294967295,O=C+(N<<10&4294967295|N>>>22),N=D+(C^(O|~b))+A[10]+4293915773&4294967295,D=O+(N<<15&4294967295|N>>>17),N=b+(O^(D|~C))+A[1]+2240044497&4294967295,b=D+(N<<21&4294967295|N>>>11),N=C+(D^(b|~O))+A[8]+1873313359&4294967295,C=b+(N<<6&4294967295|N>>>26),N=O+(b^(C|~D))+A[15]+4264355552&4294967295,O=C+(N<<10&4294967295|N>>>22),N=D+(C^(O|~b))+A[6]+2734768916&4294967295,D=O+(N<<15&4294967295|N>>>17),N=b+(O^(D|~C))+A[13]+1309151649&4294967295,b=D+(N<<21&4294967295|N>>>11),N=C+(D^(b|~O))+A[4]+4149444226&4294967295,C=b+(N<<6&4294967295|N>>>26),N=O+(b^(C|~D))+A[11]+3174756917&4294967295,O=C+(N<<10&4294967295|N>>>22),N=D+(C^(O|~b))+A[2]+718787259&4294967295,D=O+(N<<15&4294967295|N>>>17),N=b+(O^(D|~C))+A[9]+3951481745&4294967295,k.g[0]=k.g[0]+C&4294967295,k.g[1]=k.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+O&4294967295}s.prototype.u=function(k,C){C===void 0&&(C=k.length);for(var b=C-this.blockSize,A=this.B,D=this.h,O=0;O<C;){if(D==0)for(;O<=b;)o(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<C;)if(A[D++]=k.charCodeAt(O++),D==this.blockSize){o(this,A),D=0;break}}else for(;O<C;)if(A[D++]=k[O++],D==this.blockSize){o(this,A),D=0;break}}this.h=D,this.o+=C},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var C=1;C<k.length-8;++C)k[C]=0;var b=8*this.o;for(C=k.length-8;C<k.length;++C)k[C]=b&255,b/=256;for(this.u(k),k=Array(16),C=b=0;4>C;++C)for(var A=0;32>A;A+=8)k[b++]=this.g[C]>>>A&255;return k};function u(k,C){var b=m;return Object.prototype.hasOwnProperty.call(b,k)?b[k]:b[k]=C(k)}function f(k,C){this.h=C;for(var b=[],A=!0,D=k.length-1;0<=D;D--){var O=k[D]|0;A&&O==C||(b[D]=O,A=!1)}this.g=b}var m={};function g(k){return-128<=k&&128>k?u(k,function(C){return new f([C|0],0>C?-1:0)}):new f([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return x;if(0>k)return U(p(-k));for(var C=[],b=1,A=0;k>=b;A++)C[A]=k/b|0,b*=4294967296;return new f(C,0)}function T(k,C){if(k.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(k.charAt(0)=="-")return U(T(k.substring(1),C));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=p(Math.pow(C,8)),A=x,D=0;D<k.length;D+=8){var O=Math.min(8,k.length-D),N=parseInt(k.substring(D,D+O),C);8>O?(O=p(Math.pow(C,O)),A=A.j(O).add(p(N))):(A=A.j(b),A=A.add(p(N)))}return A}var x=g(0),R=g(1),P=g(16777216);i=f.prototype,i.m=function(){if(q(this))return-U(this).m();for(var k=0,C=1,b=0;b<this.g.length;b++){var A=this.i(b);k+=(0<=A?A:4294967296+A)*C,C*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(V(this))return"0";if(q(this))return"-"+U(this).toString(k);for(var C=p(Math.pow(k,6)),b=this,A="";;){var D=Z(b,C).g;b=$(b,D.j(C));var O=((0<b.g.length?b.g[0]:b.h)>>>0).toString(k);if(b=D,V(b))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function V(k){if(k.h!=0)return!1;for(var C=0;C<k.g.length;C++)if(k.g[C]!=0)return!1;return!0}function q(k){return k.h==-1}i.l=function(k){return k=$(this,k),q(k)?-1:V(k)?0:1};function U(k){for(var C=k.g.length,b=[],A=0;A<C;A++)b[A]=~k.g[A];return new f(b,~k.h).add(R)}i.abs=function(){return q(this)?U(this):this},i.add=function(k){for(var C=Math.max(this.g.length,k.g.length),b=[],A=0,D=0;D<=C;D++){var O=A+(this.i(D)&65535)+(k.i(D)&65535),N=(O>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);A=N>>>16,O&=65535,N&=65535,b[D]=N<<16|O}return new f(b,b[b.length-1]&-2147483648?-1:0)};function $(k,C){return k.add(U(C))}i.j=function(k){if(V(this)||V(k))return x;if(q(this))return q(k)?U(this).j(U(k)):U(U(this).j(k));if(q(k))return U(this.j(U(k)));if(0>this.l(P)&&0>k.l(P))return p(this.m()*k.m());for(var C=this.g.length+k.g.length,b=[],A=0;A<2*C;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<k.g.length;D++){var O=this.i(A)>>>16,N=this.i(A)&65535,Ge=k.i(D)>>>16,Ce=k.i(D)&65535;b[2*A+2*D]+=N*Ce,W(b,2*A+2*D),b[2*A+2*D+1]+=O*Ce,W(b,2*A+2*D+1),b[2*A+2*D+1]+=N*Ge,W(b,2*A+2*D+1),b[2*A+2*D+2]+=O*Ge,W(b,2*A+2*D+2)}for(A=0;A<C;A++)b[A]=b[2*A+1]<<16|b[2*A];for(A=C;A<2*C;A++)b[A]=0;return new f(b,0)};function W(k,C){for(;(k[C]&65535)!=k[C];)k[C+1]+=k[C]>>>16,k[C]&=65535,C++}function K(k,C){this.g=k,this.h=C}function Z(k,C){if(V(C))throw Error("division by zero");if(V(k))return new K(x,x);if(q(k))return C=Z(U(k),C),new K(U(C.g),U(C.h));if(q(C))return C=Z(k,U(C)),new K(U(C.g),C.h);if(30<k.g.length){if(q(k)||q(C))throw Error("slowDivide_ only works with positive integers.");for(var b=R,A=C;0>=A.l(k);)b=J(b),A=J(A);var D=se(b,1),O=se(A,1);for(A=se(A,2),b=se(b,2);!V(A);){var N=O.add(A);0>=N.l(k)&&(D=D.add(b),O=N),A=se(A,1),b=se(b,1)}return C=$(k,D.j(C)),new K(D,C)}for(D=x;0<=k.l(C);){for(b=Math.max(1,Math.floor(k.m()/C.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),O=p(b),N=O.j(C);q(N)||0<N.l(k);)b-=A,O=p(b),N=O.j(C);V(O)&&(O=R),D=D.add(O),k=$(k,N)}return new K(D,k)}i.A=function(k){return Z(this,k).h},i.and=function(k){for(var C=Math.max(this.g.length,k.g.length),b=[],A=0;A<C;A++)b[A]=this.i(A)&k.i(A);return new f(b,this.h&k.h)},i.or=function(k){for(var C=Math.max(this.g.length,k.g.length),b=[],A=0;A<C;A++)b[A]=this.i(A)|k.i(A);return new f(b,this.h|k.h)},i.xor=function(k){for(var C=Math.max(this.g.length,k.g.length),b=[],A=0;A<C;A++)b[A]=this.i(A)^k.i(A);return new f(b,this.h^k.h)};function J(k){for(var C=k.g.length+1,b=[],A=0;A<C;A++)b[A]=k.i(A)<<1|k.i(A-1)>>>31;return new f(b,k.h)}function se(k,C){var b=C>>5;C%=32;for(var A=k.g.length-b,D=[],O=0;O<A;O++)D[O]=0<C?k.i(O+b)>>>C|k.i(O+b+1)<<32-C:k.i(O+b);return new f(D,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,HE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=T,ts=f}).apply(typeof Lv<"u"?Lv:typeof self<"u"?self:typeof window<"u"?window:{});var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FE,Pl,GE,Yc,Sm,$E,QE,YE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,_){return c==Array.prototype||c==Object.prototype||(c[y]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lc=="object"&&Lc];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var H=c[S];if(!(H in _))break e;_=_[H]}c=c[c.length-1],S=_[c],y=y(S),y!=S&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var _=0,S=!1,H={next:function(){if(!S&&_<c.length){var Q=_++;return{value:y(Q,c[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function T(c,y,_){return c.call.apply(c.bind,arguments)}function x(c,y,_){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,S),c.apply(y,H)}}return function(){return c.apply(y,arguments)}}function R(c,y,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:x,R.apply(null,arguments)}function P(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function V(c,y){function _(){}_.prototype=y.prototype,c.aa=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(S,H,Q){for(var ae=Array(arguments.length-2),je=2;je<arguments.length;je++)ae[je-2]=arguments[je];return y.prototype[H].apply(S,ae)}}function q(c){const y=c.length;if(0<y){const _=Array(y);for(let S=0;S<y;S++)_[S]=c[S];return _}return[]}function U(c,y){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(g(S)){const H=c.length||0,Q=S.length||0;c.length=H+Q;for(let ae=0;ae<Q;ae++)c[H+ae]=S[ae]}else c.push(S)}}class ${constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function W(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var J=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function se(c,y,_){for(const S in c)y.call(_,c[S],S,c)}function k(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function C(c){const y={};for(const _ in c)y[_]=c[_];return y}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(c,y){let _,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(_ in S)c[_]=S[_];for(let Q=0;Q<b.length;Q++)_=b[Q],Object.prototype.hasOwnProperty.call(S,_)&&(c[_]=S[_])}}function D(c){var y=1;c=c.split(":");const _=[];for(;0<y&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function O(c){m.setTimeout(()=>{throw c},0)}function N(){var c=Ae;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ge{constructor(){this.h=this.g=null}add(y,_){const S=Ce.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Ce=new $(()=>new oe,c=>c.reset());class oe{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,ge=!1,Ae=new Ge,M=()=>{const c=m.Promise.resolve(void 0);ve=()=>{c.then(ie)}};var ie=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(_){O(_)}var y=Ce;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ge=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,y),m.removeEventListener("test",_,y)}catch{}return c}();function Re(c,y){if(ue.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(J){e:{try{Z(y.nodeName);var H=!0;break e}catch{}H=!1}H||(y=null)}}else _=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}V(Re,ue);var we={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),Pe=0;function tt(c,y,_,S,H){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=H,this.key=++Pe,this.da=this.fa=!1}function $e(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function it(c){this.src=c,this.g={},this.h=0}it.prototype.add=function(c,y,_,S,H){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var ae=Zt(c,y,S,H);return-1<ae?(y=c[ae],_||(y.fa=!1)):(y=new tt(y,this.src,Q,!!S,H),y.fa=_,c.push(y)),y};function Wt(c,y){var _=y.type;if(_ in c.g){var S=c.g[_],H=Array.prototype.indexOf.call(S,y,void 0),Q;(Q=0<=H)&&Array.prototype.splice.call(S,H,1),Q&&($e(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Zt(c,y,_,S){for(var H=0;H<c.length;++H){var Q=c[H];if(!Q.da&&Q.listener==y&&Q.capture==!!_&&Q.ha==S)return H}return-1}var ln="closure_lm_"+(1e6*Math.random()|0),ci={};function wr(c,y,_,S,H){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)wr(c,y[Q],_,S,H);return null}return _=mu(_),c&&c[rt]?c.K(y,_,p(S)?!!S.capture:!1,H):Ro(c,y,_,!1,S,H)}function Ro(c,y,_,S,H,Q){if(!y)throw Error("Invalid event type");var ae=p(H)?!!H.capture:!!H,je=Co(c);if(je||(c[ln]=je=new it(c)),_=je.add(y,_,S,ae,Q),_.proxy)return _;if(S=la(),_.proxy=S,S.src=c,S.listener=_,c.addEventListener)le||(H=ae),H===void 0&&(H=!1),c.addEventListener(y.toString(),S,H);else if(c.attachEvent)c.attachEvent(ca(y.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function la(){function c(_){return y.call(c.src,c.listener,_)}const y=Xh;return c}function ua(c,y,_,S,H){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)ua(c,y[Q],_,S,H);else S=p(S)?!!S.capture:!!S,_=mu(_),c&&c[rt]?(c=c.i,y=String(y).toString(),y in c.g&&(Q=c.g[y],_=Zt(Q,_,S,H),-1<_&&($e(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete c.g[y],c.h--)))):c&&(c=Co(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Zt(y,_,S,H)),(_=-1<c?y[c]:null)&&ms(_))}function ms(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[rt])Wt(y.i,c);else{var _=c.type,S=c.proxy;y.removeEventListener?y.removeEventListener(_,S,c.capture):y.detachEvent?y.detachEvent(ca(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=Co(y))?(Wt(_,c),_.h==0&&(_.src=null,y[ln]=null)):$e(c)}}}function ca(c){return c in ci?ci[c]:ci[c]="on"+c}function Xh(c,y){if(c.da)c=!0;else{y=new Re(y,this);var _=c.listener,S=c.ha||c.src;c.fa&&ms(c),c=_.call(S,y)}return c}function Co(c){return c=c[ln],c instanceof it?c:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function mu(c){return typeof c=="function"?c:(c[un]||(c[un]=function(y){return c.handleEvent(y)}),c[un])}function bt(){de.call(this),this.i=new it(this),this.M=this,this.F=null}V(bt,de),bt.prototype[rt]=!0,bt.prototype.removeEventListener=function(c,y,_,S){ua(this,c,y,_,S)};function Nt(c,y){var _,S=c.F;if(S)for(_=[];S;S=S.F)_.push(S);if(c=c.M,S=y.type||y,typeof y=="string")y=new ue(y,c);else if(y instanceof ue)y.target=y.target||c;else{var H=y;y=new ue(S,c),A(y,H)}if(H=!0,_)for(var Q=_.length-1;0<=Q;Q--){var ae=y.g=_[Q];H=Sr(ae,S,!0,y)&&H}if(ae=y.g=c,H=Sr(ae,S,!0,y)&&H,H=Sr(ae,S,!1,y)&&H,_)for(Q=0;Q<_.length;Q++)ae=y.g=_[Q],H=Sr(ae,S,!1,y)&&H}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var _=c.g[y],S=0;S<_.length;S++)$e(_[S]);delete c.g[y],c.h--}}this.F=null},bt.prototype.K=function(c,y,_,S){return this.i.add(String(c),y,!1,_,S)},bt.prototype.L=function(c,y,_,S){return this.i.add(String(c),y,!0,_,S)};function Sr(c,y,_,S){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var H=!0,Q=0;Q<y.length;++Q){var ae=y[Q];if(ae&&!ae.da&&ae.capture==_){var je=ae.listener,St=ae.ha||ae.src;ae.fa&&Wt(c.i,ae),H=je.call(St,S)!==!1&&H}}return H&&!S.defaultPrevented}function gu(c,y,_){if(typeof c=="function")_&&(c=R(c,_));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function No(c){c.g=gu(()=>{c.g=null,c.i&&(c.i=!1,No(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Wh extends de{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:No(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(c){de.call(this),this.h=c,this.g={}}V(gs,de);var hi=[];function Ft(c){se(c.g,function(y,_){this.g.hasOwnProperty(_)&&ms(y)},c),c.g={}}gs.prototype.N=function(){gs.aa.N.call(this),Ft(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Io=m.JSON.stringify,Jn=m.JSON.parse,Jt=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Do(){}Do.prototype.h=null;function pu(c){return c.h||(c.h=c.i())}function yu(){}var er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fi(){ue.call(this,"d")}V(fi,ue);function Bn(){ue.call(this,"c")}V(Bn,ue);var Sn={},di=null;function ha(){return di=di||new bt}Sn.La="serverreachability";function ko(c){ue.call(this,Sn.La,c)}V(ko,ue);function mi(c){const y=ha();Nt(y,new ko(y))}Sn.STAT_EVENT="statevent";function fa(c,y){ue.call(this,Sn.STAT_EVENT,c),this.stat=y}V(fa,ue);function dt(c){const y=ha();Nt(y,new fa(y,c))}Sn.Ma="timingevent";function vu(c,y){ue.call(this,Sn.Ma,c),this.size=y}V(vu,ue);function gi(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function pi(){this.g=!0}pi.prototype.xa=function(){this.g=!1};function _u(c,y,_,S,H,Q){c.info(function(){if(c.g)if(Q)for(var ae="",je=Q.split("&"),St=0;St<je.length;St++){var Ue=je[St].split("=");if(1<Ue.length){var kt=Ue[0];Ue=Ue[1];var xt=kt.split("_");ae=2<=xt.length&&xt[1]=="type"?ae+(kt+"="+Ue+"&"):ae+(kt+"=redacted&")}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+y+`
`+_+`
`+ae})}function Eu(c,y,_,S,H,Q,ae){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+y+`
`+_+`
`+Q+" "+ae})}function yi(c,y,_,S){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+It(c,_)+(S?" "+S:"")})}function tr(c,y){c.info(function(){return"TIMEOUT: "+y})}pi.prototype.info=function(){};function It(c,y){if(!c.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var S=_[c];if(!(2>S.length)){var H=S[1];if(Array.isArray(H)&&!(1>H.length)){var Q=H[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ae=1;ae<H.length;ae++)H[ae]=""}}}}return Io(_)}catch{return y}}var wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ps;function da(){}V(da,Do),da.prototype.g=function(){return new XMLHttpRequest},da.prototype.i=function(){return{}},ps=new da;function nr(c,y,_,S){this.j=c,this.i=y,this.l=_,this.R=S||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oo}function Oo(){this.i=null,this.g="",this.h=!1}var vi={},ys={};function qn(c,y,_){c.L=1,c.v=Es(ut(y)),c.m=_,c.P=!0,Ar(c,null)}function Ar(c,y){c.F=Date.now(),st(c),c.A=ut(c.v);var _=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Nr(_.i,"t",S),c.C=0,_=c.j.J,c.h=new Oo,c.g=Mu(c.j,_?y:null,!c.m),0<c.O&&(c.M=new Wh(R(c.Y,c,c.g),c.O)),y=c.U,_=c.g,S=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(hi[0]=H.toString()),H=hi);for(var Q=0;Q<H.length;Q++){var ae=wr(_,H[Q],S||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),mi(),_u(c.i,c.u,c.A,c.l,c.R,c.m)}nr.prototype.ca=function(c){c=c.target;const y=this.M;y&&Nn(c)==3?y.j():this.Y(c)},nr.prototype.Y=function(c){try{if(c==this.g)e:{const xt=Nn(this.g);var y=this.g.Ba();const Or=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||Au(this.g)))){this.J||xt!=4||y==7||(y==8||0>=Or?mi(3):mi(2)),ma(this);var _=this.g.Z();this.X=_;t:if(_i(this)){var S=Au(this.g);c="";var H=S.length,Q=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),mn(this);var ae="";break t}this.h.i=new m.TextDecoder}for(y=0;y<H;y++)this.h.h=!0,c+=this.h.i.decode(S[y],{stream:!(Q&&y==H-1)});S.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,Eu(this.i,this.u,this.A,this.l,this.R,xt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,St=this.g;if((je=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(je)){var Ue=je;break t}}Ue=null}if(_=Ue)yi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gn(this,_);else{this.o=!1,this.s=3,dt(12),cn(this),mn(this);break e}}if(this.P){_=!0;let Lt;for(;!this.J&&this.C<ae.length;)if(Lt=Ei(this,ae),Lt==ys){xt==4&&(this.s=4,dt(14),_=!1),yi(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==vi){this.s=4,dt(15),yi(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else yi(this.i,this.l,Lt,null),gn(this,Lt);if(_i(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||ae.length!=0||this.h.h||(this.s=1,dt(16),_=!1),this.o=this.o&&_,!_)yi(this.i,this.l,ae,"[Invalid Chunked Response]"),cn(this),mn(this);else if(0<ae.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Rs(kt),kt.M=!0,dt(11))}}else yi(this.i,this.l,ae,null),gn(this,ae);xt==4&&cn(this),this.o&&!this.J&&(xt==4?Du(this.j,this):(this.o=!1,st(this)))}else rf(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),cn(this),mn(this)}}}catch{}finally{}};function _i(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ei(c,y){var _=c.C,S=y.indexOf(`
`,_);return S==-1?ys:(_=Number(y.substring(_,S)),isNaN(_)?vi:(S+=1,S+_>y.length?ys:(y=y.slice(S,S+_),c.C=S+_,y)))}nr.prototype.cancel=function(){this.J=!0,cn(this)};function st(c){c.S=Date.now()+c.I,Mo(c,c.I)}function Mo(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=gi(R(c.ba,c),y)}function ma(c){c.B&&(m.clearTimeout(c.B),c.B=null)}nr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(tr(this.i,this.A),this.L!=2&&(mi(),dt(17)),cn(this),this.s=2,mn(this)):Mo(this,this.S-c)};function mn(c){c.j.G==0||c.J||Du(c.j,c)}function cn(c){ma(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Ft(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function gn(c,y){try{var _=c.j;if(_.G!=0&&(_.g==c||Ti(_.h,c))){if(!c.K&&Ti(_.h,c)&&_.G==3){try{var S=_.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Sa(_),ba(_);else break e;Go(_),dt(18)}}else _.za=H[1],0<_.za-_.T&&37500>H[2]&&_.F&&_.v==0&&!_.C&&(_.C=gi(R(_.Za,_),6e3));if(1>=Tu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else kr(_,11)}else if((c.K||_.g==c)&&Sa(_),!W(y))for(H=_.Da.g.parse(y),y=0;y<H.length;y++){let Ue=H[y];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const kt=Ue[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const xt=Ue[4];xt!=null&&(_.Aa=xt,_.j.info("SVER="+_.Aa));const Or=Ue[5];Or!=null&&typeof Or=="number"&&0<Or&&(S=1.5*Or,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Lt=c.g;if(Lt){const ur=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ur){var Q=S.h;Q.g||ur.indexOf("spdy")==-1&&ur.indexOf("quic")==-1&&ur.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(bi(Q,Q.h),Q.h=null))}if(S.D){const Qo=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(S.ya=Qo,qe(S.I,S.D,Qo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ae=c;if(S.qa=Ou(S,S.J?S.ia:null,S.W),ae.K){xn(S.h,ae);var je=ae,St=S.L;St&&(je.I=St),je.B&&(ma(je),st(je)),S.g=ae}else Nu(S);0<_.i.length&&wa(_)}else Ue[0]!="stop"&&Ue[0]!="close"||kr(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?kr(_,7):Ho(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}mi(4)}catch{}}var Zh=class{constructor(c,y){this.g=c,this.map=y}};function Vo(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Po(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tu(c){return c.h?1:c.g?c.g.size:0}function Ti(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function bi(c,y){c.g?c.g.add(y):c.h=y}function xn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Vo.prototype.cancel=function(){if(this.i=en(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function en(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.D);return y}return q(c.i)}function bu(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var y=[],_=c.length,S=0;S<_;S++)y.push(c[S]);return y}y=[],_=0;for(S in c)y[_++]=c[S];return y}function Jh(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var y=[];c=c.length;for(var _=0;_<c;_++)y.push(_);return y}y=[],_=0;for(const S in c)y[_++]=S;return y}}}function vs(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var _=Jh(c),S=bu(c),H=S.length,Q=0;Q<H;Q++)y.call(void 0,S[Q],_&&_[Q],c)}var Lo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ga(c,y){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var S=c[_].indexOf("="),H=null;if(0<=S){var Q=c[_].substring(0,S);H=c[_].substring(S+1)}else Q=c[_];y(Q,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Rr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Rr){this.h=c.h,wi(this,c.j),this.o=c.o,this.g=c.g,_s(this,c.s),this.l=c.l;var y=c.i,_=new rr;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),pa(this,_),this.m=c.m}else c&&(y=String(c).match(Lo))?(this.h=!1,wi(this,y[1]||"",!0),this.o=Si(y[2]||""),this.g=Si(y[3]||"",!0),_s(this,y[4]),this.l=Si(y[5]||"",!0),pa(this,y[6]||"",!0),this.m=Si(y[7]||"")):(this.h=!1,this.i=new rr(null,this.h))}Rr.prototype.toString=function(){var c=[],y=this.j;y&&c.push(An(y,jo,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(An(y,jo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(An(_,_.charAt(0)=="/"?Uo:wu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",An(_,nf)),c.join("")};function ut(c){return new Rr(c)}function wi(c,y,_){c.j=_?Si(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function _s(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function pa(c,y,_){y instanceof rr?(c.i=y,zo(c.i,c.h)):(_||(y=An(y,tf)),c.i=new rr(y,c.h))}function qe(c,y,_){c.i.set(y,_)}function Es(c){return qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Si(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function An(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,ef),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ef(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jo=/[#\/\?@]/g,wu=/[#\?:]/g,Uo=/[#\?]/g,tf=/[#\?@]/g,nf=/#/g;function rr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Rn(c){c.g||(c.g=new Map,c.h=0,c.i&&ga(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}i=rr.prototype,i.add=function(c,y){Rn(this),this.i=null,c=Ir(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function ya(c,y){Rn(c),y=Ir(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Cr(c,y){return Rn(c),y=Ir(c,y),c.g.has(y)}i.forEach=function(c,y){Rn(this),this.g.forEach(function(_,S){_.forEach(function(H){c.call(y,H,S,this)},this)},this)},i.na=function(){Rn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let S=0;S<y.length;S++){const H=c[S];for(let Q=0;Q<H.length;Q++)_.push(y[S])}return _},i.V=function(c){Rn(this);let y=[];if(typeof c=="string")Cr(this,c)&&(y=y.concat(this.g.get(Ir(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)y=y.concat(c[_])}return y},i.set=function(c,y){return Rn(this),this.i=null,c=Ir(this,c),Cr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Nr(c,y,_){ya(c,y),0<_.length&&(c.i=null,c.g.set(Ir(c,y),q(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var S=y[_];const Q=encodeURIComponent(String(S)),ae=this.V(S);for(S=0;S<ae.length;S++){var H=Q;ae[S]!==""&&(H+="="+encodeURIComponent(String(ae[S]))),c.push(H)}}return this.i=c.join("&")};function Ir(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function zo(c,y){y&&!c.j&&(Rn(c),c.i=null,c.g.forEach(function(_,S){var H=S.toLowerCase();S!=H&&(ya(this,S),Nr(this,H,_))},c)),c.j=y}function Su(c,y){const _=new pi;if(m.Image){const S=new Image;S.onload=P(Cn,_,"TestLoadImage: loaded",!0,y,S),S.onerror=P(Cn,_,"TestLoadImage: error",!1,y,S),S.onabort=P(Cn,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=P(Cn,_,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else y(!1)}function Ts(c,y){const _=new pi,S=new AbortController,H=setTimeout(()=>{S.abort(),Cn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:S.signal}).then(Q=>{clearTimeout(H),Q.ok?Cn(_,"TestPingServer: ok",!0,y):Cn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Cn(_,"TestPingServer: error",!1,y)})}function Cn(c,y,_,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(_)}catch{}}function bs(){this.g=new Jt}function ir(c,y,_){const S=_||"";try{vs(c,function(H,Q){let ae=H;p(H)&&(ae=Io(H)),y.push(S+Q+"="+encodeURIComponent(ae))})}catch(H){throw y.push(S+"type="+encodeURIComponent("_badmap")),H}}function xi(c){this.l=c.Ub||null,this.j=c.eb||!1}V(xi,Do),xi.prototype.g=function(){return new Dr(this.l,this.j)},xi.prototype.i=function(c){return function(){return c}}({});function Dr(c,y){bt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Dr,bt),i=Dr.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,ar(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sr(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ar(this)),this.g&&(this.readyState=3,ar(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?sr(this):ar(this),this.readyState==3&&Bo(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,sr(this))},i.Qa=function(c){this.g&&(this.response=c,sr(this))},i.ga=function(){this.g&&sr(this)};function sr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ar(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function ar(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qo(c){let y="";return se(c,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function Dt(c,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=qo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):qe(c,y,_))}function Qe(c){bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Qe,bt);var va=/^https?$/i,ws=["POST","PUT"];i=Qe.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ps.g(),this.v=this.o?pu(this.o):pu(ps),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){xu(this,Q);return}if(c=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)_.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())_.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(ws,y,void 0))||S||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of _)this.g.setRequestHeader(Q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ss(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){xu(this,Q)}};function xu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,_a(c),or(c)}function _a(c){c.A||(c.A=!0,Nt(c,"complete"),Nt(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Nt(this,"complete"),Nt(this,"abort"),or(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),or(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ea(this):this.bb())},i.bb=function(){Ea(this)};function Ea(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Nn(c)!=4||c.Z()!=2)){if(c.u&&Nn(c)==4)gu(c.Ea,0,c);else if(Nt(c,"readystatechange"),Nn(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=ae===0){var H=String(c.D).match(Lo)[1]||null;!H&&m.self&&m.self.location&&(H=m.self.location.protocol.slice(0,-1)),S=!va.test(H?H.toLowerCase():"")}_=S}if(_)Nt(c,"complete"),Nt(c,"success");else{c.m=6;try{var Q=2<Nn(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",_a(c)}}finally{or(c)}}}}function or(c,y){if(c.g){Ss(c);const _=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Nt(c,"ready");try{_.onreadystatechange=S}catch{}}}function Ss(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Nn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Jn(y)}};function Au(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function rf(c){const y={};c=(c.g&&2<=Nn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(W(c[S]))continue;var _=D(c[S]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=y[H]||[];y[H]=Q,Q.push(_)}k(y,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function Ta(c){this.Aa=0,this.i=[],this.j=new pi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xs("baseRetryDelayMs",5e3,c),this.cb=xs("retryDelaySeedMs",1e4,c),this.Wa=xs("forwardChannelMaxRetries",2,c),this.wa=xs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Vo(c&&c.concurrentRequestLimit),this.Da=new bs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ta.prototype,i.la=8,i.G=1,i.connect=function(c,y,_,S){dt(0),this.W=c,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=Ou(this,null,this.W),wa(this)};function Ho(c){if(Ru(c),c.G==3){var y=c.U++,_=ut(c.I);if(qe(_,"SID",c.K),qe(_,"RID",y),qe(_,"TYPE","terminate"),As(c,_),y=new nr(c,c.j,y),y.L=2,y.v=Es(ut(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=y.v,_=!0),_||(y.g=Mu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),st(y)}ku(c)}function ba(c){c.g&&(Rs(c),c.g.cancel(),c.g=null)}function Ru(c){ba(c),c.u&&(m.clearTimeout(c.u),c.u=null),Sa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function wa(c){if(!Po(c.h)&&!c.s){c.s=!0;var y=c.Ga;ve||M(),ge||(ve(),ge=!0),Ae.add(y,c),c.B=0}}function sf(c,y){return Tu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=gi(R(c.Ga,c,y),$o(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new nr(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=C(Q),A(Q,this.S)):Q=this.S),this.m!==null||this.O||(H.H=Q,Q=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Cu(this,H,y),_=ut(this.I),qe(_,"RID",c),qe(_,"CVER",22),this.D&&qe(_,"X-HTTP-Session-Id",this.D),As(this,_),Q&&(this.O?y="headers="+encodeURIComponent(String(qo(Q)))+"&"+y:this.m&&Dt(_,this.m,Q)),bi(this.h,H),this.Ua&&qe(_,"TYPE","init"),this.P?(qe(_,"$req",y),qe(_,"SID","null"),H.T=!0,qn(H,_,null)):qn(H,_,y),this.G=2}}else this.G==3&&(c?Fo(this,c):this.i.length==0||Po(this.h)||Fo(this))};function Fo(c,y){var _;y?_=y.l:_=c.U++;const S=ut(c.I);qe(S,"SID",c.K),qe(S,"RID",_),qe(S,"AID",c.T),As(c,S),c.m&&c.o&&Dt(S,c.m,c.o),_=new nr(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Cu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),bi(c.h,_),qn(_,S,y)}function As(c,y){c.H&&se(c.H,function(_,S){qe(y,S,_)}),c.l&&vs({},function(_,S){qe(y,S,_)})}function Cu(c,y,_){_=Math.min(c.i.length,_);var S=c.l?R(c.l.Na,c.l,c):null;e:{var H=c.i;let Q=-1;for(;;){const ae=["count="+_];Q==-1?0<_?(Q=H[0].g,ae.push("ofs="+Q)):Q=0:ae.push("ofs="+Q);let je=!0;for(let St=0;St<_;St++){let Ue=H[St].g;const kt=H[St].map;if(Ue-=Q,0>Ue)Q=Math.max(0,H[St].g-100),je=!1;else try{ir(kt,ae,"req"+Ue+"_")}catch{S&&S(kt)}}if(je){S=ae.join("&");break e}}}return c=c.i.splice(0,_),y.D=c,S}function Nu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;ve||M(),ge||(ve(),ge=!0),Ae.add(y,c),c.v=0}}function Go(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=gi(R(c.Fa,c),$o(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=gi(R(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),ba(this),Iu(this))};function Rs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Iu(c){c.g=new nr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=ut(c.qa);qe(y,"RID","rpc"),qe(y,"SID",c.K),qe(y,"AID",c.T),qe(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&qe(y,"TO",c.ja),qe(y,"TYPE","xmlhttp"),As(c,y),c.m&&c.o&&Dt(y,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Es(ut(y)),_.m=null,_.P=!0,Ar(_,c)}i.Za=function(){this.C!=null&&(this.C=null,ba(this),Go(this),dt(19))};function Sa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Du(c,y){var _=null;if(c.g==y){Sa(c),Rs(c),c.g=null;var S=2}else if(Ti(c.h,y))_=y.D,xn(c.h,y),S=1;else return;if(c.G!=0){if(y.o)if(S==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var H=c.B;S=ha(),Nt(S,new vu(S,_)),wa(c)}else Nu(c);else if(H=y.s,H==3||H==0&&0<y.X||!(S==1&&sf(c,y)||S==2&&Go(c)))switch(_&&0<_.length&&(y=c.h,y.i=y.i.concat(_)),H){case 1:kr(c,5);break;case 4:kr(c,10);break;case 3:kr(c,6);break;default:kr(c,2)}}}function $o(c,y){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*y}function kr(c,y){if(c.j.info("Error code "+y),y==2){var _=R(c.fb,c),S=c.Xa;const H=!S;S=new Rr(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||wi(S,"https"),Es(S),H?Su(S.toString(),_):Ts(S.toString(),_)}else dt(2);c.G=0,c.l&&c.l.sa(y),ku(c),Ru(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function ku(c){if(c.G=0,c.ka=[],c.l){const y=en(c.h);(y.length!=0||c.i.length!=0)&&(U(c.ka,y),U(c.ka,c.i),c.h.i.length=0,q(c.i),c.i.length=0),c.l.ra()}}function Ou(c,y,_){var S=_ instanceof Rr?ut(_):new Rr(_);if(S.g!="")y&&(S.g=y+"."+S.g),_s(S,S.s);else{var H=m.location;S=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;var Q=new Rr(null);S&&wi(Q,S),y&&(Q.g=y),H&&_s(Q,H),_&&(Q.l=_),S=Q}return _=c.D,y=c.ya,_&&y&&qe(S,_,y),qe(S,"VER",c.la),As(c,S),S}function Mu(c,y,_){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Qe(new xi({eb:_})):new Qe(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vu(){}i=Vu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function xa(){}xa.prototype.g=function(c,y){return new tn(c,y)};function tn(c,y){bt.call(this),this.g=new Ta(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!W(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!W(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new lr(this)}V(tn,bt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ho(this.g)},tn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Io(c),c=_);y.i.push(new Zh(y.Ya++,c)),y.G==3&&wa(y)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,tn.aa.N.call(this)};function Pu(c){fi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}V(Pu,fi);function Lu(){Bn.call(this),this.status=1}V(Lu,Bn);function lr(c){this.g=c}V(lr,Vu),lr.prototype.ua=function(){Nt(this.g,"a")},lr.prototype.ta=function(c){Nt(this.g,new Pu(c))},lr.prototype.sa=function(c){Nt(this.g,new Lu)},lr.prototype.ra=function(){Nt(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,YE=function(){return new xa},QE=function(){return ha()},$E=Sn,Sm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,Yc=wt,xr.COMPLETE="complete",GE=xr,yu.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Pl=yu,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,FE=Qe}).apply(typeof Lc<"u"?Lc:typeof self<"u"?self:typeof window<"u"?window:{});const jv="@firebase/firestore",Uv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Wm("@firebase/firestore");function Za(){return ea.logLevel}function ce(i,...e){if(ea.logLevel<=Me.DEBUG){const n=e.map(hg);ea.debug(`Firestore (${bo}): ${i}`,...n)}}function ii(i,...e){if(ea.logLevel<=Me.ERROR){const n=e.map(hg);ea.error(`Firestore (${bo}): ${i}`,...n)}}function lo(i,...e){if(ea.logLevel<=Me.WARN){const n=e.map(hg);ea.warn(`Firestore (${bo}): ${i}`,...n)}}function hg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(i="Unexpected state"){const e=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: `+i;throw ii(e),new Error(e)}function Ye(i,e){i||Ee()}function xe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class _R{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ER{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ei,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ei)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ye(typeof s.accessToken=="string"),new KE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new Yt(e)}}class TR{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class bR{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new TR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wR{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Qn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0);const s=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new zv(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string"),this.R=n.token,new zv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=SR(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function De(i,e){return i<e?-1:i>e?1:0}function xm(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return De(s,o);{const u=XE(),f=xR(u.encode(Bv(i,n)),u.encode(Bv(e,n)));return f!==0?f:De(s,o)}}n+=s>65535?2:1}return De(i.length,e.length)}function Bv(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function xR(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return De(i[n],e[n]);return De(i.length,e.length)}function uo(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=-62135596800,Hv=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Hv);return new Tt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qv)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hv}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new Tt(0,0))}static max(){return new be(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="__name__";class pr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ee(),s===void 0?s=e.length-n:s>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return pr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=pr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return De(e.length,n.length)}static compareSegments(e,n){const s=pr.isNumericId(e),o=pr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?pr.extractNumericId(e).compare(pr.extractNumericId(n)):xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ts.fromString(e.substring(4,e.length-2))}}class et extends pr{construct(e,n,s){return new et(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new et(n)}static emptyPath(){return new et([])}}const AR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends pr{construct(e,n,s){return new qt(e,n,s)}static isValidIdentifier(e){return AR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fv}static keyField(){return new qt([Fv])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new he(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(n)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(et.fromString(e))}static fromName(e){return new ye(et.fromString(e).popFirst(5))}static empty(){return new ye(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=-1;function RR(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=be.fromTimestamp(s===1e9?new Tt(n+1,0):new Tt(n,s));return new rs(o,ye.empty(),e)}function CR(i){return new rs(i.readTime,i.key,Yl)}class rs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new rs(be.min(),ye.empty(),Yl)}static max(){return new rs(be.max(),ye.empty(),Yl)}}function NR(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(i.documentKey,e.documentKey),n!==0?n:De(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(i){if(i.code!==te.FAILED_PRECONDITION||i.message!==IR)throw i;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,s)=>{n(e)})}static reject(e){return new ne((n,s)=>{s(e)})}static waitFor(e){return new ne((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},g=>s(g))}),f=!0,u===o&&n()})}static or(e){let n=ne.resolve(!1);for(const s of e)n=n.next(o=>o?ne.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ne((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;n(e[p]).next(T=>{f[p]=T,++m,m===u&&s(f)},T=>o(T))}})}static doWhile(e,n){return new ne((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function kR(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function So(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ch.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=-1;function Nh(i){return i==null}function uh(i){return i===0&&1/i==-1/0}function OR(i){return typeof i=="number"&&Number.isInteger(i)&&!uh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="";function MR(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Gv(e)),e=VR(i.get(n),e);return Gv(e)}function VR(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case ZE:n+="";break;default:n+=u}}return n}function Gv(i){return i+ZE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function cs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function JE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jc(this.root,e,this.comparator,!0)}}class jc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Bt.RED,this.left=o??Bt.EMPTY,this.right=u??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Bt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Bt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,s,o,u){return this}insert(e,n,s){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Ct(qt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new eT("Invalid base64 string: "+u):u}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const PR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(i){if(Ye(!!i),typeof i=="string"){let e=0;const n=PR.exec(i);if(Ye(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:gt(i.seconds),nanos:gt(i.nanos)}}function gt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ss(i){return typeof i=="string"?Ht.fromBase64String(i):Ht.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="server_timestamp",nT="__type__",rT="__previous_value__",iT="__local_write_time__";function dg(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[nT])===null||n===void 0?void 0:n.stringValue)===tT}function Ih(i){const e=i.mapValue.fields[rT];return dg(e)?Ih(e):e}function Kl(i){const e=is(i.mapValue.fields[iT].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n,s,o,u,f,m,g,p){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p}}const ch="(default)";class Xl{constructor(e,n){this.projectId=e,this.database=n||ch}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===ch}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="__type__",jR="__max__",Uc={mapValue:{}},aT="__vector__",hh="value";function as(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?dg(i)?4:zR(i)?9007199254740991:UR(i)?10:11:Ee()}function Tr(i,e){if(i===e)return!0;const n=as(i);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Kl(i).isEqual(Kl(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=is(o.timestampValue),m=is(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return ss(o.bytesValue).isEqual(ss(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return gt(o.geoPointValue.latitude)===gt(u.geoPointValue.latitude)&&gt(o.geoPointValue.longitude)===gt(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return gt(o.integerValue)===gt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=gt(o.doubleValue),m=gt(u.doubleValue);return f===m?uh(f)===uh(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return uo(i.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if($v(f)!==$v(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!Tr(f[g],m[g])))return!1;return!0}(i,e);default:return Ee()}}function Wl(i,e){return(i.values||[]).find(n=>Tr(n,e))!==void 0}function co(i,e){if(i===e)return 0;const n=as(i),s=as(e);if(n!==s)return De(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(i.booleanValue,e.booleanValue);case 2:return function(u,f){const m=gt(u.integerValue||u.doubleValue),g=gt(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(i,e);case 3:return Yv(i.timestampValue,e.timestampValue);case 4:return Yv(Kl(i),Kl(e));case 5:return xm(i.stringValue,e.stringValue);case 6:return function(u,f){const m=ss(u),g=ss(f);return m.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),g=f.split("/");for(let p=0;p<m.length&&p<g.length;p++){const T=De(m[p],g[p]);if(T!==0)return T}return De(m.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const m=De(gt(u.latitude),gt(f.latitude));return m!==0?m:De(gt(u.longitude),gt(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Kv(i.arrayValue,e.arrayValue);case 10:return function(u,f){var m,g,p,T;const x=u.fields||{},R=f.fields||{},P=(m=x[hh])===null||m===void 0?void 0:m.arrayValue,V=(g=R[hh])===null||g===void 0?void 0:g.arrayValue,q=De(((p=P==null?void 0:P.values)===null||p===void 0?void 0:p.length)||0,((T=V==null?void 0:V.values)===null||T===void 0?void 0:T.length)||0);return q!==0?q:Kv(P,V)}(i.mapValue,e.mapValue);case 11:return function(u,f){if(u===Uc.mapValue&&f===Uc.mapValue)return 0;if(u===Uc.mapValue)return 1;if(f===Uc.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=f.fields||{},T=Object.keys(p);g.sort(),T.sort();for(let x=0;x<g.length&&x<T.length;++x){const R=xm(g[x],T[x]);if(R!==0)return R;const P=co(m[g[x]],p[T[x]]);if(P!==0)return P}return De(g.length,T.length)}(i.mapValue,e.mapValue);default:throw Ee()}}function Yv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return De(i,e);const n=is(i),s=is(e),o=De(n.seconds,s.seconds);return o!==0?o:De(n.nanos,s.nanos)}function Kv(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=co(n[o],s[o]);if(u)return u}return De(n.length,s.length)}function ho(i){return Am(i)}function Am(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=is(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ss(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return ye.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Am(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Am(n.fields[f])}`;return o+"}"}(i.mapValue):Ee()}function Kc(i){switch(as(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ih(i);return e?16+Kc(e):16;case 5:return 2*i.stringValue.length;case 6:return ss(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Kc(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return cs(s.fields,(u,f)=>{o+=u.length+Kc(f)}),o}(i.mapValue);default:throw Ee()}}function Xv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Rm(i){return!!i&&"integerValue"in i}function mg(i){return!!i&&"arrayValue"in i}function Wv(i){return!!i&&"nullValue"in i}function Zv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Xc(i){return!!i&&"mapValue"in i}function UR(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[sT])===null||n===void 0?void 0:n.stringValue)===aT}function Bl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return cs(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Bl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bl(i.arrayValue.values[n]);return e}return Object.assign({},i)}function zR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===jR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(n)}setAll(e){let n=qt.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Bl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Xc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){cs(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new dn(Bl(this.value))}}function oT(i){const e=[];return cs(i.fields,(n,s)=>{const o=new qt([n]);if(Xc(s)){const u=oT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Kt(e,0,be.min(),be.min(),be.min(),dn.empty(),0)}static newFoundDocument(e,n,s,o){return new Kt(e,1,n,be.min(),s,o,0)}static newNoDocument(e,n){return new Kt(e,2,n,be.min(),be.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,be.min(),be.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.position=e,this.inclusive=n}}function Jv(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=ye.comparator(ye.fromName(f.referenceValue),n.key):s=co(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function e_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Tr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function BR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{}class Et extends lT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new HR(e,n,s):n==="array-contains"?new $R(e,s):n==="in"?new QR(e,s):n==="not-in"?new YR(e,s):n==="array-contains-any"?new KR(e,s):new Et(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new FR(e,s):new GR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(co(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends lT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Xn(e,n)}matches(e){return uT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function uT(i){return i.op==="and"}function cT(i){return qR(i)&&uT(i)}function qR(i){for(const e of i.filters)if(e instanceof Xn)return!1;return!0}function Cm(i){if(i instanceof Et)return i.field.canonicalString()+i.op.toString()+ho(i.value);if(cT(i))return i.filters.map(e=>Cm(e)).join(",");{const e=i.filters.map(n=>Cm(n)).join(",");return`${i.op}(${e})`}}function hT(i,e){return i instanceof Et?function(s,o){return o instanceof Et&&s.op===o.op&&s.field.isEqual(o.field)&&Tr(s.value,o.value)}(i,e):i instanceof Xn?function(s,o){return o instanceof Xn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&hT(f,o.filters[m]),!0):!1}(i,e):void Ee()}function fT(i){return i instanceof Et?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(i):i instanceof Xn?function(n){return n.op.toString()+" {"+n.getFilters().map(fT).join(" ,")+"}"}(i):"Filter"}class HR extends Et{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class FR extends Et{constructor(e,n){super(e,"in",n),this.keys=dT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GR extends Et{constructor(e,n){super(e,"not-in",n),this.keys=dT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ye.fromName(s.referenceValue))}class $R extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mg(n)&&Wl(n.arrayValue,this.value)}}class QR extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wl(this.value.arrayValue,n)}}class YR extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Wl(this.value.arrayValue,n)}}class KR extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Wl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function t_(i,e=null,n=[],s=[],o=null,u=null,f=null){return new XR(i,e,n,s,o,u,f)}function gg(i){const e=xe(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Cm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ho(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ho(s)).join(",")),e.le=n}return e.le}function pg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!BR(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!hT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!e_(i.startAt,e.startAt)&&e_(i.endAt,e.endAt)}function Nm(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function WR(i,e,n,s,o,u,f,m){return new xo(i,e,n,s,o,u,f,m)}function yg(i){return new xo(i)}function n_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function mT(i){return i.collectionGroup!==null}function ql(i){const e=xe(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ct(qt.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(m=m.add(p.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new Zl(u,s))}),n.has(qt.keyField().canonicalString())||e.he.push(new Zl(qt.keyField(),s))}return e.he}function vr(i){const e=xe(i);return e.Pe||(e.Pe=ZR(e,ql(i))),e.Pe}function ZR(i,e){if(i.limitType==="F")return t_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Zl(o.field,u)});const n=i.endAt?new fh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new fh(i.startAt.position,i.startAt.inclusive):null;return t_(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Im(i,e){const n=i.filters.concat([e]);return new xo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Dm(i,e,n){return new xo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Dh(i,e){return pg(vr(i),vr(e))&&i.limitType===e.limitType}function gT(i){return`${gg(vr(i))}|lt:${i.limitType}`}function Ja(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>fT(o)).join(", ")}]`),Nh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>ho(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>ho(o)).join(",")),`Target(${s})`}(vr(i))}; limitType=${i.limitType})`}function kh(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of ql(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(f,m,g){const p=Jv(f,m,g);return f.inclusive?p<=0:p<0}(s.startAt,ql(s),o)||s.endAt&&!function(f,m,g){const p=Jv(f,m,g);return f.inclusive?p>=0:p>0}(s.endAt,ql(s),o))}(i,e)}function JR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function pT(i){return(e,n)=>{let s=!1;for(const o of ql(i)){const u=eC(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function eC(i,e,n){const s=i.field.isKeyField()?ye.comparator(e.key,n.key):function(u,f,m){const g=f.data.field(u),p=m.data.field(u);return g!==null&&p!==null?co(g,p):Ee()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new lt(ye.comparator);function si(){return tC}const yT=new lt(ye.comparator);function Ll(...i){let e=yT;for(const n of i)e=e.insert(n.key,n);return e}function vT(i){let e=yT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ks(){return Hl()}function _T(){return Hl()}function Hl(){return new ia(i=>i.toString(),(i,e)=>i.isEqual(e))}const nC=new lt(ye.comparator),rC=new Ct(ye.comparator);function Ve(...i){let e=rC;for(const n of i)e=e.add(n);return e}const iC=new Ct(De);function sC(){return iC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uh(e)?"-0":e}}function ET(i){return{integerValue:""+i}}function aC(i,e){return OR(e)?ET(e):vg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this._=void 0}}function oC(i,e,n){return i instanceof dh?function(o,u){const f={fields:{[nT]:{stringValue:tT},[iT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&dg(u)&&(u=Ih(u)),u&&(f.fields[rT]=u),{mapValue:f}}(n,e):i instanceof Jl?bT(i,e):i instanceof eu?wT(i,e):function(o,u){const f=TT(o,u),m=r_(f)+r_(o.Ie);return Rm(f)&&Rm(o.Ie)?ET(m):vg(o.serializer,m)}(i,e)}function lC(i,e,n){return i instanceof Jl?bT(i,e):i instanceof eu?wT(i,e):n}function TT(i,e){return i instanceof mh?function(s){return Rm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class dh extends Oh{}class Jl extends Oh{constructor(e){super(),this.elements=e}}function bT(i,e){const n=ST(e);for(const s of i.elements)n.some(o=>Tr(o,s))||n.push(s);return{arrayValue:{values:n}}}class eu extends Oh{constructor(e){super(),this.elements=e}}function wT(i,e){let n=ST(e);for(const s of i.elements)n=n.filter(o=>!Tr(o,s));return{arrayValue:{values:n}}}class mh extends Oh{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function r_(i){return gt(i.integerValue||i.doubleValue)}function ST(i){return mg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function uC(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof Jl&&o instanceof Jl||s instanceof eu&&o instanceof eu?uo(s.elements,o.elements,Tr):s instanceof mh&&o instanceof mh?Tr(s.Ie,o.Ie):s instanceof dh&&o instanceof dh}(i.transform,e.transform)}class cC{constructor(e,n){this.version=e,this.transformResults=n}}class zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Mh{}function xT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new _g(i.key,zn.none()):new uu(i.key,i.data,zn.none());{const n=i.data,s=dn.empty();let o=new Ct(qt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new hs(i.key,s,new bn(o.toArray()),zn.none())}}function hC(i,e,n){i instanceof uu?function(o,u,f){const m=o.value.clone(),g=s_(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof hs?function(o,u,f){if(!Wc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=s_(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(AT(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(i,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Fl(i,e,n,s){return i instanceof uu?function(u,f,m,g){if(!Wc(u.precondition,f))return m;const p=u.value.clone(),T=a_(u.fieldTransforms,g,f);return p.setAll(T),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(i,e,n,s):i instanceof hs?function(u,f,m,g){if(!Wc(u.precondition,f))return m;const p=a_(u.fieldTransforms,g,f),T=f.data;return T.setAll(AT(u)),T.setAll(p),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(x=>x.field))}(i,e,n,s):function(u,f,m){return Wc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function fC(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=TT(s.transform,o||null);u!=null&&(n===null&&(n=dn.empty()),n.set(s.field,u))}return n||null}function i_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&uo(s,o,(u,f)=>uC(u,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class uu extends Mh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class hs extends Mh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function AT(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function s_(i,e,n){const s=new Map;Ye(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,lC(f,m,n[o]))}return s}function a_(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,oC(u,f,e))}return s}class _g extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dC extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&hC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Fl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Fl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=_T();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=xT(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(be.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ve())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,s)=>i_(n,s))&&uo(this.baseMutations,e.baseMutations,(n,s)=>i_(n,s))}}class Eg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ye(e.mutations.length===s.length);let o=function(){return nC}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Eg(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Be;function yC(i){switch(i){case te.OK:return Ee();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ee()}}function RT(i){if(i===void 0)return ii("GRPC error has no .code"),te.UNKNOWN;switch(i){case _t.OK:return te.OK;case _t.CANCELLED:return te.CANCELLED;case _t.UNKNOWN:return te.UNKNOWN;case _t.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case _t.INTERNAL:return te.INTERNAL;case _t.UNAVAILABLE:return te.UNAVAILABLE;case _t.UNAUTHENTICATED:return te.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case _t.NOT_FOUND:return te.NOT_FOUND;case _t.ALREADY_EXISTS:return te.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return te.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case _t.ABORTED:return te.ABORTED;case _t.OUT_OF_RANGE:return te.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return te.UNIMPLEMENTED;case _t.DATA_LOSS:return te.DATA_LOSS;default:return Ee()}}(Be=_t||(_t={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new ts([4294967295,4294967295],0);function o_(i){const e=XE().encode(i),n=new HE;return n.update(e),new Uint8Array(n.digest())}function l_(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ts([n,s],0),new ts([o,u],0)]}class Tg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new jl(`Invalid padding: ${n}`);if(s<0)throw new jl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new jl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new jl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=ts.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(ts.fromNumber(s)));return o.compare(vC)===1&&(o=new ts([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=o_(e),[s,o]=l_(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);if(!this.Re(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Tg(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const n=o_(e),[s,o]=l_(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);this.Ve(f)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Vh(be.min(),o,new lt(De),si(),Ve())}}class cu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new cu(s,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class CT{constructor(e,n){this.targetId=e,this.ge=n}}class NT{constructor(e,n,s=Ht.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class u_{constructor(){this.pe=0,this.ye=c_(),this.we=Ht.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ve(),n=Ve(),s=Ve();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ee()}}),new cu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=c_()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ye(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class _C{constructor(e){this.ke=e,this.qe=new Map,this.Qe=si(),this.$e=zc(),this.Ue=zc(),this.Ke=new lt(De)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:Ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(Nm(u))if(s===0){const f=new ye(u.path);this.ze(n,f,Kt.newNoDocument(f,be.min()))}else Ye(s===1);else{const f=this.et(n);if(f!==s){const m=this.tt(e),g=m?this.nt(m,e,f):1;if(g!==0){this.Ye(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,p)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=ss(s).toUint8Array()}catch(g){if(g instanceof eT)return lo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Tg(f,o,u)}catch(g){return lo(g instanceof jl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&Nm(m.target)){const g=new ye(m.target.path);this._t(g).has(f)||this.ut(f,g)||this.ze(f,g,Kt.newNoDocument(g,e))}u.ve&&(n.set(f,u.Fe()),u.Me())}});let s=Ve();this.Ue.forEach((u,f)=>{let m=!0;f.forEachWhile(g=>{const p=this.Xe(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(e));const o=new Vh(e,n,this.Ke,this.Qe,s);return this.Qe=si(),this.$e=zc(),this.Ue=zc(),this.Ke=new lt(De),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new u_,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ct(De),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ct(De),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new u_),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function zc(){return new lt(ye.comparator)}function c_(){return new lt(ye.comparator)}const EC={asc:"ASCENDING",desc:"DESCENDING"},TC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bC={and:"AND",or:"OR"};class wC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function km(i,e){return i.useProto3Json||Nh(e)?e:{value:e}}function gh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function SC(i,e){return gh(i,e.toTimestamp())}function _r(i){return Ye(!!i),be.fromTimestamp(function(n){const s=is(n);return new Tt(s.seconds,s.nanos)}(i))}function bg(i,e){return Om(i,e).canonicalString()}function Om(i,e){const n=function(o){return new et(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function DT(i){const e=et.fromString(i);return Ye(PT(e)),e}function Mm(i,e){return bg(i.databaseId,e.path)}function cm(i,e){const n=DT(e);if(n.get(1)!==i.databaseId.projectId)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ye(OT(n))}function kT(i,e){return bg(i.databaseId,e)}function xC(i){const e=DT(i);return e.length===4?et.emptyPath():OT(e)}function Vm(i){return new et(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function OT(i){return Ye(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function h_(i,e,n){return{name:Mm(i,e),fields:n.value.mapValue.fields}}function AC(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(p,T){return p.useProto3Json?(Ye(T===void 0||typeof T=="string"),Ht.fromBase64String(T||"")):(Ye(T===void 0||T instanceof Buffer||T instanceof Uint8Array),Ht.fromUint8Array(T||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(p){const T=p.code===void 0?te.UNKNOWN:RT(p.code);return new he(T,p.message||"")}(f);n=new NT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=cm(i,s.document.name),u=_r(s.document.updateTime),f=s.document.createTime?_r(s.document.createTime):be.min(),m=new dn({mapValue:{fields:s.document.fields}}),g=Kt.newFoundDocument(o,u,f,m),p=s.targetIds||[],T=s.removedTargetIds||[];n=new Zc(p,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=cm(i,s.document),u=s.readTime?_r(s.readTime):be.min(),f=Kt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Zc([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=cm(i,s.document),u=s.removedTargetIds||[];n=new Zc([],u,o,null)}else{if(!("filter"in e))return Ee();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new pC(o,u),m=s.targetId;n=new CT(m,f)}}return n}function RC(i,e){let n;if(e instanceof uu)n={update:h_(i,e.key,e.value)};else if(e instanceof _g)n={delete:Mm(i,e.key)};else if(e instanceof hs)n={update:h_(i,e.key,e.data),updateMask:PC(e.fieldMask)};else{if(!(e instanceof dC))return Ee();n={verify:Mm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof dh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Jl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof eu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof mh)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Ee()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:SC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ee()}(i,e.precondition)),n}function CC(i,e){return i&&i.length>0?(Ye(e!==void 0),i.map(n=>function(o,u){let f=o.updateTime?_r(o.updateTime):_r(u);return f.isEqual(be.min())&&(f=_r(u)),new cC(f,o.transformResults||[])}(n,e))):[]}function NC(i,e){return{documents:[kT(i,e.path)]}}function IC(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=kT(i,o);const u=function(p){if(p.length!==0)return VT(Xn.create(p,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(p){if(p.length!==0)return p.map(T=>function(R){return{field:eo(R.field),direction:OC(R.dir)}}(T))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=km(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:n,parent:o}}function DC(i){let e=xC(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ye(s===1);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=function(x){const R=MT(x);return R instanceof Xn&&cT(R)?R.getFilters():[R]}(n.where));let f=[];n.orderBy&&(f=function(x){return x.map(R=>function(V){return new Zl(to(V.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(R))}(n.orderBy));let m=null;n.limit&&(m=function(x){let R;return R=typeof x=="object"?x.value:x,Nh(R)?null:R}(n.limit));let g=null;n.startAt&&(g=function(x){const R=!!x.before,P=x.values||[];return new fh(P,R)}(n.startAt));let p=null;return n.endAt&&(p=function(x){const R=!x.before,P=x.values||[];return new fh(P,R)}(n.endAt)),WR(e,o,f,u,m,"F",g,p)}function kC(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MT(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=to(n.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=to(n.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=to(n.unaryFilter.field);return Et.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=to(n.unaryFilter.field);return Et.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(i):i.fieldFilter!==void 0?function(n){return Et.create(to(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Xn.create(n.compositeFilter.filters.map(s=>MT(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee()}}(n.compositeFilter.op))}(i):Ee()}function OC(i){return EC[i]}function MC(i){return TC[i]}function VC(i){return bC[i]}function eo(i){return{fieldPath:i.canonicalString()}}function to(i){return qt.fromServerFormat(i.fieldPath)}function VT(i){return i instanceof Et?function(n){if(n.op==="=="){if(Zv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(Wv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(Wv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:MC(n.op),value:n.value}}}(i):i instanceof Xn?function(n){const s=n.getFilters().map(o=>VT(o));return s.length===1?s[0]:{compositeFilter:{op:VC(n.op),filters:s}}}(i):Ee()}function PC(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,s,o,u=be.min(),f=be.min(),m=Ht.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.Tt=e}}function jC(i){const e=DC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.Tn=new zC}addToCollectionParentIndex(e,n){return this.Tn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(rs.min())}updateCollectionGroup(e,n,s){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class zC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ct(et.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ct(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LT=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(LT,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new fo(0)}static Kn(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="LruGarbageCollector",BC=1048576;function m_([i,e],[n,s]){const o=De(i,n);return o===0?De(e,s):o}class qC{constructor(e){this.Hn=e,this.buffer=new Ct(m_),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();m_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ce(d_,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){So(n)?ce(d_,"Ignoring IndexedDB error during garbage collection: ",n):await wo(n)}await this.er(3e5)})}}class FC{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Ch.ae);const s=new qC(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(f_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f_):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,f,m,g,p;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,f=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(s=x,m=Date.now(),this.removeTargets(e,s,n))).next(x=>(u=x,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(x=>(p=Date.now(),Za()<=Me.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${x} documents in `+(p-g)+`ms
Total Duration: ${p-T}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x})))}}function GC(i,e){return new FC(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.changes=new ia(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ne.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Fl(s.mutation,o,bn.empty(),Tt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ve()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ve()){const o=Ks();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=Ll();return u.forEach((m,g)=>{f=f.insert(m,g.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Ks();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ve()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=si();const f=Hl(),m=function(){return Hl()}();return n.forEach((g,p)=>{const T=s.get(p.key);o.has(p.key)&&(T===void 0||T.mutation instanceof hs)?u=u.insert(p.key,p):T!==void 0?(f.set(p.key,T.mutation.getFieldMask()),Fl(T.mutation,p,T.mutation.getFieldMask(),Tt.now())):f.set(p.key,bn.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((p,T)=>f.set(p,T)),n.forEach((p,T)=>{var x;return m.set(p,new QC(T,(x=f.get(p))!==null&&x!==void 0?x:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Hl();let o=new lt((f,m)=>f-m),u=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(g=>{const p=n.get(g);if(p===null)return;let T=s.get(g)||bn.empty();T=m.applyToLocalView(p,T),s.set(g,T);const x=(o.get(m.batchId)||Ve()).add(g);o=o.insert(m.batchId,x)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,T=g.value,x=_T();T.forEach(R=>{if(!u.has(R)){const P=xT(n.get(R),s.get(R));P!==null&&x.set(R,P),u=u.add(R)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,x))}return ne.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return ye.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ne.resolve(Ks());let m=Yl,g=u;return f.next(p=>ne.forEach(p,(T,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),u.get(T)?ne.resolve():this.remoteDocumentCache.getEntry(e,T).next(R=>{g=g.insert(T,R)}))).next(()=>this.populateOverlays(e,p,u)).next(()=>this.computeViews(e,g,p,Ve())).next(T=>({batchId:m,changes:vT(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(s=>{let o=Ll();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Ll();return this.indexManager.getCollectionParents(e,u).next(m=>ne.forEach(m,g=>{const p=function(x,R){return new xo(R,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next(T=>{T.forEach((x,R)=>{f=f.insert(x,R)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((g,p)=>{const T=p.getKey();f.get(T)===null&&(f=f.insert(T,Kt.newInvalidDocument(T)))});let m=Ll();return f.forEach((g,p)=>{const T=u.get(g);T!==void 0&&Fl(T.mutation,p,bn.empty(),Tt.now()),kh(n,p)&&(m=m.insert(g,p))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return ne.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:_r(o.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:jC(o.bundledQuery),readTime:_r(o.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.overlays=new lt(ye.comparator),this.Rr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ks();return ne.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),ne.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),ne.resolve()}getOverlaysForCollection(e,n,s){const o=Ks(),u=n.length+1,f=new ye(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new lt((p,T)=>p-T);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let T=u.get(p.largestBatchId);T===null&&(T=Ks(),u=u.insert(p.largestBatchId,T)),T.set(p.getKey(),p)}}const m=Ks(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,T)=>m.set(p,T)),!(m.size()>=o)););return ne.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new gC(n,s));let u=this.Rr.get(n);u===void 0&&(u=Ve(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.Vr=new Ct(Pt.mr),this.gr=new Ct(Pt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Pt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Pt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new ye(new et([])),s=new Pt(n,e),o=new Pt(n,e+1),u=[];return this.gr.forEachInRange([s,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new ye(new et([])),s=new Pt(n,e),o=new Pt(n,e+1);let u=Ve();return this.gr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Pt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Pt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return ye.comparator(e.key,n.key)||De(e.Cr,n.Cr)}static pr(e,n){return De(e.Cr,n.Cr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ct(Pt.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new mC(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new Pt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(f)}lookupMutationBatch(e,n){return ne.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?fg:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Pt(n,0),o=new Pt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],f=>{const m=this.Or(f.Cr);u.push(m)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ct(De);return n.forEach(o=>{const u=new Pt(o,0),f=new Pt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{s=s.add(m.Cr)})}),ne.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ye.isDocumentKey(u)||(u=u.child(""));const f=new Pt(new ye(u),0);let m=new Ct(De);return this.Mr.forEachWhile(g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Cr)),!0)},f),ne.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ye(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return ne.forEach(n.mutations,o=>{const u=new Pt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Pt(n,0),o=this.Mr.firstAfterOrEqual(s);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.kr=e,this.docs=function(){return new lt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ne.resolve(s?s.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let s=si();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Kt.newInvalidDocument(o))}),ne.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=si();const f=n.path,m=new ye(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:T}}=g.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||NR(CR(T),s)<=0||(o.has(T.key)||kh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ee()}qr(e,n){return ne.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new eN(this)}getSize(e){return ne.resolve(this.size)}}class eN extends $C{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),ne.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.persistence=e,this.Qr=new ia(n=>gg(n),pg),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.$r=0,this.Ur=new wg,this.targetCount=0,this.Kr=fo.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),ne.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.zn(n),ne.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ne.waitFor(u).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return ne.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),ne.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return ne.resolve(s)}containsKey(e,n){return ne.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Ch(0),this.zr=!1,this.zr=!0,this.jr=new WC,this.referenceDelegate=e(this),this.Hr=new tN(this),this.indexManager=new UC,this.remoteDocumentCache=function(o){return new JC(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new LC(n),this.Yr=new KC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new ZC(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);const o=new nN(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return ne.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class nN extends DR{constructor(e){super(),this.currentSequenceNumber=e}}class Sg{constructor(e){this.persistence=e,this.ti=new wg,this.ni=null}static ri(e){return new Sg(e)}get ii(){if(this.ni)return this.ni;throw Ee()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),ne.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),ne.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,s=>{const o=ye.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,be.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return ne.or([()=>ne.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class ph{constructor(e,n){this.persistence=e,this.oi=new ia(s=>MR(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=GC(this,n)}static ri(e,n){return new ph(e,n)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return ne.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?ne.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,n).next(m=>{m||(s++,u.removeEntry(f,be.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),ne.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kc(e.data.value)),n}ar(e,n,s){return ne.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=Ve(),o=Ve();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new xg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return ex()?8:kR(Xt())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new rN;return this._s(e,n,f).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,f,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(Za()<=Me.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(Za()<=Me.DEBUG&&ce("QueryEngine","Query:",Ja(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(Za()<=Me.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(n))):ne.resolve())}rs(e,n){if(n_(n))return ne.resolve(null);let s=vr(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Dm(n,null,"F"),s=vr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=Ve(...u);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const p=this.cs(n,m);return this.ls(n,p,f,g.readTime)?this.rs(e,Dm(n,null,"F")):this.hs(e,p,n,g)}))})))}ss(e,n,s,o){return n_(n)||o.isEqual(be.min())?ne.resolve(null):this.ns.getDocuments(e,s).next(u=>{const f=this.cs(n,u);return this.ls(n,f,s,o)?ne.resolve(null):(Za()<=Me.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ja(n)),this.hs(e,f,n,RR(o,Yl)).next(m=>m))})}cs(e,n){let s=new Ct(pT(e));return n.forEach((o,u)=>{kh(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return Za()<=Me.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.ns.getDocumentsMatchingQuery(e,n,rs.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="LocalStore",sN=3e8;class aN{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new lt(De),this.Is=new ia(u=>gg(u),pg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YC(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function oN(i,e,n,s){return new aN(i,e,n,s)}async function UT(i,e){const n=xe(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let g=Ve();for(const p of o){f.push(p.batchId);for(const T of p.mutations)g=g.add(T.key)}for(const p of u){m.push(p.batchId);for(const T of p.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next(p=>({Rs:p,removedBatchIds:f,addedBatchIds:m}))})})}function lN(i,e){const n=xe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,g,p,T){const x=p.batch,R=x.keys();let P=ne.resolve();return R.forEach(V=>{P=P.next(()=>T.getEntry(g,V)).next(q=>{const U=p.docVersions.get(V);Ye(U!==null),q.version.compareTo(U)<0&&(x.applyToRemoteDocument(q,p),q.isValidDocument()&&(q.setReadTime(p.commitVersion),T.addEntry(q)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(g,x))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Ve();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function zT(i){const e=xe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function uN(i,e){const n=xe(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((T,x)=>{const R=o.get(x);if(!R)return;m.push(n.Hr.removeMatchingKeys(u,T.removedDocuments,x).next(()=>n.Hr.addMatchingKeys(u,T.addedDocuments,x)));let P=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(x)!==null?P=P.withResumeToken(Ht.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,s)),o=o.insert(x,P),function(q,U,$){return q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=sN?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(R,P,T)&&m.push(n.Hr.updateTargetData(u,P))});let g=si(),p=Ve();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(cN(u,f,e.documentUpdates).next(T=>{g=T.Vs,p=T.fs})),!s.isEqual(be.min())){const T=n.Hr.getLastRemoteSnapshotVersion(u).next(x=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(T)}return ne.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,p)).next(()=>g)}).then(u=>(n.Ts=o,u))}function cN(i,e,n){let s=Ve(),o=Ve();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let f=si();return n.forEach((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(be.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):ce(Ag,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)}),{Vs:f,fs:o}})}function hN(i,e){const n=xe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=fg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function fN(i,e){const n=xe(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,ne.resolve(o)):n.Hr.allocateTargetId(s).next(f=>(o=new Xi(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function Pm(i,e,n){const s=xe(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!So(f))throw f;ce(Ag,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function g_(i,e,n){const s=xe(i);let o=be.min(),u=Ve();return s.persistence.runTransaction("Execute query","readwrite",f=>function(g,p,T){const x=xe(g),R=x.Is.get(T);return R!==void 0?ne.resolve(x.Ts.get(R)):x.Hr.getTargetData(p,T)}(s,f,vr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,m.targetId).next(g=>{u=g})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,e,n?o:be.min(),n?u:Ve())).next(m=>(dN(s,JR(e),m),{documents:m,gs:u})))}function dN(i,e,n){let s=i.Es.get(e)||be.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class p_{constructor(){this.activeTargetIds=sC()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mN{constructor(){this.ho=new p_,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new p_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="ConnectivityMonitor";class v_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ce(y_,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ce(y_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc=null;function Lm(){return Bc===null?Bc=function(){return 268435456+Math.round(2147483648*Math.random())}():Bc++,"0x"+Bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="RestConnection",pN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yN{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===ch?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const f=Lm(),m=this.bo(e,n.toUriEncodedString());ce(hm,`Sending RPC '${e}' ${f}:`,m,s);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,u),this.vo(e,m,g,s).then(p=>(ce(hm,`Received RPC '${e}' ${f}: `,p),p),p=>{throw lo(hm,`RPC '${e}' ${f} failed with error: `,p,"url: ",m,"request:",s),p})}Co(e,n,s,o,u,f){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=pN[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class _N extends yN{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=Lm();return new Promise((f,m)=>{const g=new FE;g.setWithCredentials(!0),g.listenOnce(GE.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Yc.NO_ERROR:const T=g.getResponseJson();ce(Qt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case Yc.TIMEOUT:ce(Qt,`RPC '${e}' ${u} timed out`),m(new he(te.DEADLINE_EXCEEDED,"Request time out"));break;case Yc.HTTP_ERROR:const x=g.getStatus();if(ce(Qt,`RPC '${e}' ${u} failed with status:`,x,"response text:",g.getResponseText()),x>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const P=R==null?void 0:R.error;if(P&&P.status&&P.message){const V=function(U){const $=U.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf($)>=0?$:te.UNKNOWN}(P.status);m(new he(V,P.message))}else m(new he(te.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new he(te.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{ce(Qt,`RPC '${e}' ${u} completed.`)}});const p=JSON.stringify(o);ce(Qt,`RPC '${e}' ${u} sending request:`,o),g.send(n,"POST",p,s,15)})}Wo(e,n,s){const o=Lm(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=YE(),m=QE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=u.join("");ce(Qt,`Creating RPC '${e}' stream ${o}: ${T}`,g);const x=f.createWebChannel(T,g);let R=!1,P=!1;const V=new vN({Fo:U=>{P?ce(Qt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(R||(ce(Qt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),R=!0),ce(Qt,`RPC '${e}' stream ${o} sending:`,U),x.send(U))},Mo:()=>x.close()}),q=(U,$,W)=>{U.listen($,K=>{try{W(K)}catch(Z){setTimeout(()=>{throw Z},0)}})};return q(x,Pl.EventType.OPEN,()=>{P||(ce(Qt,`RPC '${e}' stream ${o} transport opened.`),V.Qo())}),q(x,Pl.EventType.CLOSE,()=>{P||(P=!0,ce(Qt,`RPC '${e}' stream ${o} transport closed`),V.Uo())}),q(x,Pl.EventType.ERROR,U=>{P||(P=!0,lo(Qt,`RPC '${e}' stream ${o} transport errored:`,U),V.Uo(new he(te.UNAVAILABLE,"The operation could not be completed")))}),q(x,Pl.EventType.MESSAGE,U=>{var $;if(!P){const W=U.data[0];Ye(!!W);const K=W,Z=(K==null?void 0:K.error)||(($=K[0])===null||$===void 0?void 0:$.error);if(Z){ce(Qt,`RPC '${e}' stream ${o} received error:`,Z);const J=Z.status;let se=function(b){const A=_t[b];if(A!==void 0)return RT(A)}(J),k=Z.message;se===void 0&&(se=te.INTERNAL,k="Unknown error status: "+J+" with message "+Z.message),P=!0,V.Uo(new he(se,k)),x.close()}else ce(Qt,`RPC '${e}' stream ${o} received:`,W),V.Ko(W)}}),q(m,$E.STAT_EVENT,U=>{U.stat===Sm.PROXY?ce(Qt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Sm.NOPROXY&&ce(Qt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{V.$o()},0),V}}function fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(i){return new wC(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="PersistentStream";class qT{constructor(e,n,s,o,u,f,m,g){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new BT(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(ii(n.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new he(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ce(__,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(ce(__,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EN extends qT{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=AC(this.serializer,e),s=function(u){if(!("targetChange"in u))return be.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?be.min():f.readTime?_r(f.readTime):be.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=Vm(this.serializer),n.addTarget=function(u,f){let m;const g=f.target;if(m=Nm(g)?{documents:NC(u,g)}:{query:IC(u,g).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=IT(u,f.resumeToken);const p=km(u,f.expectedCount);p!==null&&(m.expectedCount=p)}else if(f.snapshotVersion.compareTo(be.min())>0){m.readTime=gh(u,f.snapshotVersion.toTimestamp());const p=km(u,f.expectedCount);p!==null&&(m.expectedCount=p)}return m}(this.serializer,e);const s=kC(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=Vm(this.serializer),n.removeTarget=e,this.I_(n)}}class TN extends qT{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=CC(e.writeResults,e.commitTime),s=_r(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=Vm(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>RC(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{}class wN extends bN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.So(e,Om(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(te.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,Om(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new he(te.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class SN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ii(n),this.N_=!1):ce("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="RemoteStore";class xN{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{s.enqueueAndForget(async()=>{sa(this)&&(ce(ta,"Restarting streams for network reachability change."),await async function(g){const p=xe(g);p.W_.add(4),await hu(p),p.j_.set("Unknown"),p.W_.delete(4),await Lh(p)}(this))})}),this.j_=new SN(s,o)}}async function Lh(i){if(sa(i))for(const e of i.G_)await e(!0)}async function hu(i){for(const e of i.G_)await e(!1)}function HT(i,e){const n=xe(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Ig(n)?Ng(n):Ao(n).c_()&&Cg(n,e))}function Rg(i,e){const n=xe(i),s=Ao(n);n.K_.delete(e),s.c_()&&FT(n,e),n.K_.size===0&&(s.c_()?s.P_():sa(n)&&n.j_.set("Unknown"))}function Cg(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(i).y_(e)}function FT(i,e){i.H_.Ne(e),Ao(i).w_(e)}function Ng(i){i.H_=new _C({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),Ao(i).start(),i.j_.B_()}function Ig(i){return sa(i)&&!Ao(i).u_()&&i.K_.size>0}function sa(i){return xe(i).W_.size===0}function GT(i){i.H_=void 0}async function AN(i){i.j_.set("Online")}async function RN(i){i.K_.forEach((e,n)=>{Cg(i,e)})}async function CN(i,e){GT(i),Ig(i)?(i.j_.q_(e),Ng(i)):i.j_.set("Unknown")}async function NN(i,e,n){if(i.j_.set("Online"),e instanceof NT&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){ce(ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yh(i,s)}else if(e instanceof Zc?i.H_.We(e):e instanceof CT?i.H_.Ze(e):i.H_.je(e),!n.isEqual(be.min()))try{const s=await zT(i.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.K_.get(p);T&&u.K_.set(p,T.withResumeToken(g.resumeToken,f))}}),m.targetMismatches.forEach((g,p)=>{const T=u.K_.get(g);if(!T)return;u.K_.set(g,T.withResumeToken(Ht.EMPTY_BYTE_STRING,T.snapshotVersion)),FT(u,g);const x=new Xi(T.target,g,p,T.sequenceNumber);Cg(u,x)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){ce(ta,"Failed to raise snapshot:",s),await yh(i,s)}}async function yh(i,e,n){if(!So(e))throw e;i.W_.add(1),await hu(i),i.j_.set("Offline"),n||(n=()=>zT(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ce(ta,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await Lh(i)})}function $T(i,e){return e().catch(n=>yh(i,n,e))}async function jh(i){const e=xe(i),n=os(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:fg;for(;IN(e);)try{const o=await hN(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,DN(e,o)}catch(o){await yh(e,o)}QT(e)&&YT(e)}function IN(i){return sa(i)&&i.U_.length<10}function DN(i,e){i.U_.push(e);const n=os(i);n.c_()&&n.S_&&n.b_(e.mutations)}function QT(i){return sa(i)&&!os(i).u_()&&i.U_.length>0}function YT(i){os(i).start()}async function kN(i){os(i).C_()}async function ON(i){const e=os(i);for(const n of i.U_)e.b_(n.mutations)}async function MN(i,e,n){const s=i.U_.shift(),o=Eg.from(s,e,n);await $T(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await jh(i)}async function VN(i,e){e&&os(i).S_&&await async function(s,o){if(function(f){return yC(f)&&f!==te.ABORTED}(o.code)){const u=s.U_.shift();os(s).h_(),await $T(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await jh(s)}}(i,e),QT(i)&&YT(i)}async function E_(i,e){const n=xe(i);n.asyncQueue.verifyOperationInProgress(),ce(ta,"RemoteStore received new credentials");const s=sa(n);n.W_.add(3),await hu(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Lh(n)}async function PN(i,e){const n=xe(i);e?(n.W_.delete(2),await Lh(n)):e||(n.W_.add(2),await hu(n),n.j_.set("Unknown"))}function Ao(i){return i.J_||(i.J_=function(n,s,o){const u=xe(n);return u.M_(),new EN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:AN.bind(null,i),No:RN.bind(null,i),Lo:CN.bind(null,i),p_:NN.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Ig(i)?Ng(i):i.j_.set("Unknown")):(await i.J_.stop(),GT(i))})),i.J_}function os(i){return i.Y_||(i.Y_=function(n,s,o){const u=xe(n);return u.M_(),new TN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:kN.bind(null,i),Lo:VN.bind(null,i),D_:ON.bind(null,i),v_:MN.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await jh(i)):(await i.Y_.stop(),i.U_.length>0&&(ce(ta,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new Dg(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kg(i,e){if(ii("AsyncQueue",`${e}: ${i}`),So(i))return new he(te.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{static emptySet(e){return new so(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=Ll(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof so)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new so;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.Z_=new lt(ye.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ee():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class mo{constructor(e,n,s,o,u,f,m,g,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new mo(e,n,so.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class jN{constructor(){this.queries=b_(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=xe(n),u=o.queries;o.queries=b_(),u.forEach((f,m)=>{for(const g of m.ta)g.onError(s)})})(this,new he(te.ABORTED,"Firestore shutting down"))}}function b_(){return new ia(i=>gT(i),Dh)}async function KT(i,e){const n=xe(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new LN,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=kg(f,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Og(n)}async function XT(i,e){const n=xe(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ta.indexOf(e);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function UN(i,e){const n=xe(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(s=!0);f.ea=o}}s&&Og(n)}function zN(i,e,n){const s=xe(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Og(i){i.ia.forEach(e=>{e.next()})}var jm,w_;(w_=jm||(jm={}))._a="default",w_.Cache="cache";class WT{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this.key=e}}class JT{constructor(e){this.key=e}}class BN{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ve(),this.mutatedKeys=Ve(),this.ya=pT(e),this.wa=new so(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new T_,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,x)=>{const R=o.get(T),P=kh(this.query,x)?x:null,V=!!R&&this.mutatedKeys.has(R.key),q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let U=!1;R&&P?R.data.isEqual(P.data)?V!==q&&(s.track({type:3,doc:P}),U=!0):this.va(R,P)||(s.track({type:2,doc:P}),U=!0,(g&&this.ya(P,g)>0||p&&this.ya(P,p)<0)&&(m=!0)):!R&&P?(s.track({type:0,doc:P}),U=!0):R&&!P&&(s.track({type:1,doc:R}),U=!0,(g||p)&&(m=!0)),U&&(P?(f=f.add(P),u=q?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{wa:f,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((T,x)=>function(P,V){const q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return q(P)-q(V)}(T.type,x.type)||this.ya(T.doc,x.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,p=g!==this.ga;return this.ga=g,f.length!==0||p?{snapshot:new mo(this.query,e.wa,u,f,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new T_,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ve(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new JT(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new ZT(s))}),n}Oa(e){this.fa=e.gs,this.pa=Ve();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return mo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Mg="SyncEngine";class qN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class HN{constructor(e){this.key=e,this.Ba=!1}}class FN{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new ia(m=>gT(m),Dh),this.qa=new Map,this.Qa=new Set,this.$a=new lt(ye.comparator),this.Ua=new Map,this.Ka=new wg,this.Wa={},this.Ga=new Map,this.za=fo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function GN(i,e,n=!0){const s=sb(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await eb(s,e,n,!0),o}async function $N(i,e){const n=sb(i);await eb(n,e,!0,!1)}async function eb(i,e,n,s){const o=await fN(i.localStore,vr(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await QN(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&HT(i.remoteStore,o),m}async function QN(i,e,n,s,o){i.Ha=(x,R,P)=>async function(q,U,$,W){let K=U.view.ba($);K.ls&&(K=await g_(q.localStore,U.query,!1).then(({documents:k})=>U.view.ba(k,K)));const Z=W&&W.targetChanges.get(U.targetId),J=W&&W.targetMismatches.get(U.targetId)!=null,se=U.view.applyChanges(K,q.isPrimaryClient,Z,J);return x_(q,U.targetId,se.Ma),se.snapshot}(i,x,R,P);const u=await g_(i.localStore,e,!0),f=new BN(e,u.gs),m=f.ba(u.documents),g=cu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),p=f.applyChanges(m,i.isPrimaryClient,g);x_(i,n,p.Ma);const T=new qN(e,n,f);return i.ka.set(e,T),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),p.snapshot}async function YN(i,e,n){const s=xe(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(f=>!Dh(f,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Pm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Rg(s.remoteStore,o.targetId),Um(s,o.targetId)}).catch(wo)):(Um(s,o.targetId),await Pm(s.localStore,o.targetId,!0))}async function KN(i,e){const n=xe(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Rg(n.remoteStore,s.targetId))}async function XN(i,e,n){const s=rI(i);try{const o=await function(f,m){const g=xe(f),p=Tt.now(),T=m.reduce((P,V)=>P.add(V.key),Ve());let x,R;return g.persistence.runTransaction("Locally write mutations","readwrite",P=>{let V=si(),q=Ve();return g.ds.getEntries(P,T).next(U=>{V=U,V.forEach(($,W)=>{W.isValidDocument()||(q=q.add($))})}).next(()=>g.localDocuments.getOverlayedDocuments(P,V)).next(U=>{x=U;const $=[];for(const W of m){const K=fC(W,x.get(W.key).overlayedDocument);K!=null&&$.push(new hs(W.key,K,oT(K.value.mapValue),zn.exists(!0)))}return g.mutationQueue.addMutationBatch(P,p,$,m)}).next(U=>{R=U;const $=U.applyToLocalDocumentSet(x,q);return g.documentOverlayCache.saveOverlays(P,U.batchId,$)})}).then(()=>({batchId:R.batchId,changes:vT(x)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,g){let p=f.Wa[f.currentUser.toKey()];p||(p=new lt(De)),p=p.insert(m,g),f.Wa[f.currentUser.toKey()]=p}(s,o.batchId,n),await fu(s,o.changes),await jh(s.remoteStore)}catch(o){const u=kg(o,"Failed to persist write");n.reject(u)}}async function tb(i,e){const n=xe(i);try{const s=await uN(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Ua.get(u);f&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?Ye(f.Ba):o.removedDocuments.size>0&&(Ye(f.Ba),f.Ba=!1))}),await fu(n,s,e)}catch(s){await wo(s)}}function S_(i,e,n){const s=xe(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const g=xe(f);g.onlineState=m;let p=!1;g.queries.forEach((T,x)=>{for(const R of x.ta)R.sa(m)&&(p=!0)}),p&&Og(g)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WN(i,e,n){const s=xe(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let f=new lt(ye.comparator);f=f.insert(u,Kt.newNoDocument(u,be.min()));const m=Ve().add(u),g=new Vh(be.min(),new Map,new lt(De),f,m);await tb(s,g),s.$a=s.$a.remove(u),s.Ua.delete(e),Vg(s)}else await Pm(s.localStore,e,!1).then(()=>Um(s,e,n)).catch(wo)}async function ZN(i,e){const n=xe(i),s=e.batch.batchId;try{const o=await lN(n.localStore,e);rb(n,s,null),nb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await fu(n,o)}catch(o){await wo(o)}}async function JN(i,e,n){const s=xe(i);try{const o=await function(f,m){const g=xe(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let T;return g.mutationQueue.lookupMutationBatch(p,m).next(x=>(Ye(x!==null),T=x.keys(),g.mutationQueue.removeMutationBatch(p,x))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,T,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,T)).next(()=>g.localDocuments.getDocuments(p,T))})}(s.localStore,e);rb(s,e,n),nb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await fu(s,o)}catch(o){await wo(o)}}function nb(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function rb(i,e,n){const s=xe(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function Um(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||ib(i,s)})}function ib(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(Rg(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),Vg(i))}function x_(i,e,n){for(const s of n)s instanceof ZT?(i.Ka.addReference(s.key,e),eI(i,s)):s instanceof JT?(ce(Mg,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||ib(i,s.key)):Ee()}function eI(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(ce(Mg,"New document in limbo: "+n),i.Qa.add(s),Vg(i))}function Vg(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new ye(et.fromString(e)),s=i.za.next();i.Ua.set(s,new HN(n)),i.$a=i.$a.insert(n,s),HT(i.remoteStore,new Xi(vr(yg(n.path)),s,"TargetPurposeLimboResolution",Ch.ae))}}async function fu(i,e,n){const s=xe(i),o=[],u=[],f=[];s.ka.isEmpty()||(s.ka.forEach((m,g)=>{f.push(s.Ha(g,e,n).then(p=>{var T;if((p||n)&&s.isPrimaryClient){const x=p?!p.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(p){o.push(p);const x=xg.Yi(g.targetId,p);u.push(x)}}))}),await Promise.all(f),s.La.p_(o),await async function(g,p){const T=xe(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ne.forEach(p,R=>ne.forEach(R.Hi,P=>T.persistence.referenceDelegate.addReference(x,R.targetId,P)).next(()=>ne.forEach(R.Ji,P=>T.persistence.referenceDelegate.removeReference(x,R.targetId,P)))))}catch(x){if(!So(x))throw x;ce(Ag,"Failed to update sequence numbers: "+x)}for(const x of p){const R=x.targetId;if(!x.fromCache){const P=T.Ts.get(R),V=P.snapshotVersion,q=P.withLastLimboFreeSnapshotVersion(V);T.Ts=T.Ts.insert(R,q)}}}(s.localStore,u))}async function tI(i,e){const n=xe(i);if(!n.currentUser.isEqual(e)){ce(Mg,"User change. New user:",e.toKey());const s=await UT(n.localStore,e);n.currentUser=e,function(u,f){u.Ga.forEach(m=>{m.forEach(g=>{g.reject(new he(te.CANCELLED,f))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await fu(n,s.Rs)}}function nI(i,e){const n=xe(i),s=n.Ua.get(e);if(s&&s.Ba)return Ve().add(s.key);{let o=Ve();const u=n.qa.get(e);if(!u)return o;for(const f of u){const m=n.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function sb(i){const e=xe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=tb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WN.bind(null,e),e.La.p_=UN.bind(null,e.eventManager),e.La.Ja=zN.bind(null,e.eventManager),e}function rI(i){const e=xe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JN.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ph(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return oN(this.persistence,new iN,e.initialUser,this.serializer)}Xa(e){return new jT(Sg.ri,this.serializer)}Za(e){return new mN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class iI extends vh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Ye(this.persistence.referenceDelegate instanceof ph);const s=this.persistence.referenceDelegate.garbageCollector;return new HC(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new jT(s=>ph.ri(s,n),this.serializer)}}class zm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>S_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tI.bind(null,this.syncEngine),await PN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jN}()}createDatastore(e){const n=Ph(e.databaseInfo.databaseId),s=function(u){return new _N(u)}(e.databaseInfo);return function(u,f,m,g){return new wN(u,f,m,g)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new xN(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>S_(this.syncEngine,n,0),function(){return v_.D()?new v_:new gN}())}createSyncEngine(e,n){return function(o,u,f,m,g,p,T){const x=new FN(o,u,f,m,g,p);return T&&(x.ja=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=xe(o);ce(ta,"RemoteStore shutting down."),u.W_.add(5),await hu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zm.provider={build:()=>new zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class sI{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Yt.UNAUTHENTICATED,this.clientId=WE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{ce(ls,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ce(ls,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=kg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function dm(i,e){i.asyncQueue.verifyOperationInProgress(),ce(ls,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await UT(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function A_(i,e){i.asyncQueue.verifyOperationInProgress();const n=await aI(i);ce(ls,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>E_(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>E_(e.remoteStore,o)),i._onlineComponents=e}async function aI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ce(ls,"Using user provided OfflineComponentProvider");try{await dm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await dm(i,new vh)}}else ce(ls,"Using default OfflineComponentProvider"),await dm(i,new iI(void 0));return i._offlineComponents}async function ob(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ce(ls,"Using user provided OnlineComponentProvider"),await A_(i,i._uninitializedComponentsProvider._online)):(ce(ls,"Using default OnlineComponentProvider"),await A_(i,new zm))),i._onlineComponents}function oI(i){return ob(i).then(e=>e.syncEngine)}async function lb(i){const e=await ob(i),n=e.eventManager;return n.onListen=GN.bind(null,e.syncEngine),n.onUnlisten=YN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$N.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KN.bind(null,e.syncEngine),n}function lI(i,e,n={}){const s=new ei;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,p){const T=new ab({next:R=>{T.su(),f.enqueueAndForget(()=>XT(u,x));const P=R.docs.has(m);!P&&R.fromCache?p.reject(new he(te.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&R.fromCache&&g&&g.source==="server"?p.reject(new he(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(R)},error:R=>p.reject(R)}),x=new WT(yg(m.path),T,{includeMetadataChanges:!0,Ta:!0});return KT(u,x)}(await lb(i),i.asyncQueue,e,n,s)),s.promise}function uI(i,e,n={}){const s=new ei;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,p){const T=new ab({next:R=>{T.su(),f.enqueueAndForget(()=>XT(u,x)),R.fromCache&&g.source==="server"?p.reject(new he(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(R)},error:R=>p.reject(R)}),x=new WT(m,T,{includeMetadataChanges:!0,Ta:!0});return KT(u,x)}(await lb(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(i,e,n){if(!n)throw new he(te.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function cI(i,e,n,s){if(e===!0&&s===!0)throw new he(te.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function C_(i){if(!ye.isDocumentKey(i))throw new he(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function N_(i){if(ye.isDocumentKey(i))throw new he(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Uh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ee()}function Wn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uh(i);throw new he(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="firestore.googleapis.com",I_=!0;class D_{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hb,this.ssl=I_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:I_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BC)throw new he(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ub((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new vR;switch(s.type){case"firstParty":return new bR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=R_.get(n);s&&(ce("ComponentProvider","Removing Datastore"),R_.delete(n),s.terminate())}(this),Promise.resolve()}}function hI(i,e,n,s={}){var o;const u=(i=Wn(i,zh))._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==hb&&u.host!==m&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!Ws(g,f)&&(i._setSettings(g),s.mockUserToken)){let p,T;if(typeof s.mockUserToken=="string")p=s.mockUserToken,T=Yt.MOCK_USER;else{p=QS(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new he(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Yt(x)}i._authCredentials=new _R(new KE(p,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new aa(this.firestore,e,this._query)}}class sn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class ns extends aa{constructor(e,n,s){super(e,n,yg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new ye(e))}withConverter(e){return new ns(this.firestore,e,this._path)}}function us(i,e,...n){if(i=an(i),cb("collection","path",e),i instanceof zh){const s=et.fromString(e,...n);return N_(s),new ns(i,null,s)}{if(!(i instanceof sn||i instanceof ns))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(et.fromString(e,...n));return N_(s),new ns(i.firestore,null,s)}}function fs(i,e,...n){if(i=an(i),arguments.length===1&&(e=WE.newId()),cb("doc","path",e),i instanceof zh){const s=et.fromString(e,...n);return C_(s),new sn(i,null,new ye(s))}{if(!(i instanceof sn||i instanceof ns))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(et.fromString(e,...n));return C_(s),new sn(i.firestore,i instanceof ns?i.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="AsyncQueue";class O_{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new BT(this,"async_queue_retry"),this.Su=()=>{const s=fm();s&&ce(k_,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new ei;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!So(e))throw e;ce(k_,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw ii("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=Dg.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Ee()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class oa extends zh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new O_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O_(e),this._firestoreClient=void 0,await e}}}function fI(i,e){const n=typeof i=="object"?i:uE(),s=typeof i=="string"?i:ch,o=Jm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=GS("firestore");u&&hI(o,...u)}return o}function Pg(i){if(i._terminated)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||dI(i),i._firestoreClient}function dI(i){var e,n,s;const o=i._freezeSettings(),u=function(m,g,p,T){return new LR(m,g,p,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,ub(T.experimentalLongPollingOptions),T.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new sI(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new go(Ht.fromBase64String(e))}catch(n){throw new he(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new go(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=/^__.*__$/;class gI{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new uu(e,this.data,n,this.fieldTransforms)}}class fb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function db(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class zg{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new zg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return _h(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(db(this.Lu)&&mI.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class pI{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ph(e)}ju(e,n,s,o=!1){return new zg({Lu:e,methodName:n,zu:s,path:qt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qh(i){const e=i._freezeSettings(),n=Ph(i._databaseId);return new pI(i._databaseId,!!e.ignoreUndefinedProperties,n)}function mb(i,e,n,s,o,u={}){const f=i.ju(u.merge||u.mergeFields?2:0,e,n,o);Bg("Data must be an object, but it was:",f,s);const m=gb(s,f);let g,p;if(u.merge)g=new bn(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const x of u.mergeFields){const R=Bm(e,x,n);if(!f.contains(R))throw new he(te.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);yb(T,R)||T.push(R)}g=new bn(T),p=f.fieldTransforms.filter(x=>g.covers(x.field))}else g=null,p=f.fieldTransforms;return new gI(new dn(m),g,p)}class Hh extends Lg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}function yI(i,e,n,s){const o=i.ju(1,e,n);Bg("Data must be an object, but it was:",o,s);const u=[],f=dn.empty();cs(s,(g,p)=>{const T=qg(e,g,n);p=an(p);const x=o.Uu(T);if(p instanceof Hh)u.push(T);else{const R=du(p,x);R!=null&&(u.push(T),f.set(T,R))}});const m=new bn(u);return new fb(f,m,o.fieldTransforms)}function vI(i,e,n,s,o,u){const f=i.ju(1,e,n),m=[Bm(e,s,n)],g=[o];if(u.length%2!=0)throw new he(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push(Bm(e,u[R])),g.push(u[R+1]);const p=[],T=dn.empty();for(let R=m.length-1;R>=0;--R)if(!yb(p,m[R])){const P=m[R];let V=g[R];V=an(V);const q=f.Uu(P);if(V instanceof Hh)p.push(P);else{const U=du(V,q);U!=null&&(p.push(P),T.set(P,U))}}const x=new bn(p);return new fb(T,x,f.fieldTransforms)}function _I(i,e,n,s=!1){return du(n,i.ju(s?4:3,e))}function du(i,e){if(pb(i=an(i)))return Bg("Unsupported field value:",e,i),gb(i,e);if(i instanceof Lg)return function(s,o){if(!db(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let g=du(m,o.Ku(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=an(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return aC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Tt.fromDate(s);return{timestampValue:gh(o.serializer,u)}}if(s instanceof Tt){const u=new Tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gh(o.serializer,u)}}if(s instanceof jg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof go)return{bytesValue:IT(o.serializer,s._byteString)};if(s instanceof sn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:bg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ug)return function(f,m){return{mapValue:{fields:{[sT]:{stringValue:aT},[hh]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw m.Wu("VectorValues must only contain numeric values.");return vg(m.serializer,p)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${Uh(s)}`)}(i,e)}function gb(i,e){const n={};return JE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(i,(s,o)=>{const u=du(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function pb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Tt||i instanceof jg||i instanceof go||i instanceof sn||i instanceof Lg||i instanceof Ug)}function Bg(i,e,n){if(!pb(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=Uh(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function Bm(i,e,n){if((e=an(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return qg(i,e);throw _h("Field path arguments must be of type string or ",i,!1,void 0,n)}const EI=new RegExp("[~\\*/\\[\\]]");function qg(i,e,n){if(e.search(EI)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Bh(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function _h(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new he(te.INVALID_ARGUMENT,m+i+g)}function yb(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TI extends vb{data(){return super.data()}}function Fh(i,e){return typeof e=="string"?qg(i,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hg{}class _b extends Hg{}function na(i,e,...n){let s=[];e instanceof Hg&&s.push(e),s=s.concat(n),function(u){const f=u.filter(g=>g instanceof Fg).length,m=u.filter(g=>g instanceof Gh).length;if(f>1||f>0&&m>0)throw new he(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class Gh extends _b{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Gh(e,n,s)}_apply(e){const n=this._parse(e);return Eb(e._query,n),new aa(e.firestore,e.converter,Im(e._query,n))}_parse(e){const n=qh(e.firestore);return function(u,f,m,g,p,T,x){let R;if(p.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new he(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){V_(x,T);const V=[];for(const q of x)V.push(M_(g,u,q));R={arrayValue:{values:V}}}else R=M_(g,u,x)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||V_(x,T),R=_I(m,f,x,T==="in"||T==="not-in");return Et.create(p,T,R)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wn(i,e,n){const s=e,o=Fh("where",i);return Gh._create(o,s,n)}class Fg extends Hg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)Eb(f,g),f=Im(f,g)}(e._query,n),new aa(e.firestore,e.converter,Im(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gg extends _b{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gg(e,n)}_apply(e){const n=function(o,u,f){if(o.startAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zl(u,f)}(e._query,this._field,this._direction);return new aa(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new xo(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function tu(i,e="asc"){const n=e,s=Fh("orderBy",i);return Gg._create(s,n)}function M_(i,e,n){if(typeof(n=an(n))=="string"){if(n==="")throw new he(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mT(e)&&n.indexOf("/")!==-1)throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(et.fromString(n));if(!ye.isDocumentKey(s))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Xv(i,new ye(s))}if(n instanceof sn)return Xv(i,n._key);throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uh(n)}.`)}function V_(i,e){if(!Array.isArray(i)||i.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Eb(i,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wI{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return cs(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[hh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>gt(f.doubleValue));return new Ug(u)}convertGeoPoint(e){return new jg(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ih(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=is(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=et.fromString(e);Ye(PT(s));const o=new Xl(s.get(1),s.get(3)),u=new ye(s.popFirst(5));return o.isEqual(n)||ii(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bb extends vb{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Fh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Jc extends bb{data(e={}){return super.data(e)}}class SI{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ul(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Jc(this._firestore,this._userDataWriter,s.key,s,new Ul(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const g=new Jc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ul(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new Jc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ul(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,T=-1;return m.type!==0&&(p=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),T=f.indexOf(m.doc.key)),{type:xI(m.type),doc:g,oldIndex:p,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(i){i=Wn(i,sn);const e=Wn(i.firestore,oa);return lI(Pg(e),i._key).then(n=>II(e,i,n))}class wb extends wI{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function ra(i){i=Wn(i,aa);const e=Wn(i.firestore,oa),n=Pg(e),s=new wb(e);return bI(i._query),uI(n,i._query).then(o=>new SI(e,s,i,o))}function RI(i,e,n){i=Wn(i,sn);const s=Wn(i.firestore,oa),o=Tb(i.converter,e);return Qh(s,[mb(qh(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,zn.none())])}function $h(i,e,n,...s){i=Wn(i,sn);const o=Wn(i.firestore,oa),u=qh(o);let f;return f=typeof(e=an(e))=="string"||e instanceof Bh?vI(u,"updateDoc",i._key,e,n,s):yI(u,"updateDoc",i._key,e),Qh(o,[f.toMutation(i._key,zn.exists(!0))])}function CI(i){return Qh(Wn(i.firestore,oa),[new _g(i._key,zn.none())])}function NI(i,e){const n=Wn(i.firestore,oa),s=fs(i),o=Tb(i.converter,e);return Qh(n,[mb(qh(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,zn.exists(!1))]).then(()=>s)}function Qh(i,e){return function(s,o){const u=new ei;return s.asyncQueue.enqueueAndForget(async()=>XN(await oI(s),o,u)),u.promise}(Pg(i),e)}function II(i,e,n){const s=n.docs.get(e._key),o=new wb(i);return new bb(i,o,e._key,s,new Ul(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){bo=o})(Eo),ao(new Zs("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new oa(new ER(s.getProvider("auth-internal")),new wR(f,s.getProvider("app-check-internal")),function(p,T){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new he(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(p.options.projectId,T)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),es(jv,Uv,e),es(jv,Uv,"esm2017")})();const DI={apiKey:"AIzaSyDWBKFIUCL6pLHfhSZK6C3IzCTHIXgvKcA",authDomain:"cost-genie.firebaseapp.com",projectId:"cost-genie",storageBucket:"cost-genie.firebasestorage.app",messagingSenderId:"1083729143550",appId:"1:1083729143550:web:9df486d92b87c3b0f3e7af"},Sb=lE(DI),eh=mR(Sb),on=fI(Sb);async function kI(i,e,n){const s={userId:i.uid,email:i.email||"",yearlySalary:e,state:n};return await RI(fs(on,"users",i.uid),s),s}async function ds(i){const e=fs(on,"users",i),n=await AI(e);return n.exists()?n.data():null}async function OI(i,e){const n=fs(on,"users",i);return await $h(n,e),ds(i)}async function MI(i){const e=us(on,"costs"),n={...i,createdAt:Tt.now()},s=await NI(e,n);return{...n,id:s.id,createdAt:n.createdAt.toDate()}}async function VI(i,e){const n=fs(on,"costs",i);return await $h(n,e),{id:i,...e}}async function xb(i,e){const n=fs(on,"costs",i);return await $h(n,{favorite:e}),{id:i,favorite:e}}async function Ab(i,e){const n=fs(on,"costs",i);return await $h(n,{need:e}),{id:i,need:e}}async function $g(i){const e=fs(on,"costs",i);return await CI(e),{id:i,deleted:!0}}const Rb=z.createContext(null);function ui(){const i=z.useContext(Rb);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i}function PI({children:i}){const[e,n]=z.useState(null),[s,o]=z.useState(!0);z.useEffect(()=>eh.onAuthStateChanged(p=>{n(p),o(!1)}),[]);const u=async()=>{const g=new Kr;await w2(eh,g)},f=()=>eh.signOut(),m={currentUser:e,loading:s,signInWithGoogle:u,signOut:f,logout:f};return v.jsx(Rb.Provider,{value:m,children:!s&&i})}var Cb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},P_=Wi.createContext&&Wi.createContext(Cb),LI=["attr","size","title"];function jI(i,e){if(i==null)return{};var n=UI(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function UI(i,e){if(i==null)return{};var n={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;n[s]=i[s]}return n}function Eh(){return Eh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Eh.apply(this,arguments)}function L_(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,s)}return n}function Th(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L_(Object(n),!0).forEach(function(s){zI(i,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):L_(Object(n)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(n,s))})}return i}function zI(i,e,n){return e=BI(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function BI(i){var e=qI(i,"string");return typeof e=="symbol"?e:e+""}function qI(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Nb(i){return i&&i.map((e,n)=>Wi.createElement(e.tag,Th({key:n},e.attr),Nb(e.child)))}function HI(i){return e=>Wi.createElement(FI,Eh({attr:Th({},i.attr)},e),Nb(i.child))}function FI(i){var e=n=>{var{attr:s,size:o,title:u}=i,f=jI(i,LI),m=o||n.size||"1em",g;return n.className&&(g=n.className),i.className&&(g=(g?g+" ":"")+i.className),Wi.createElement("svg",Eh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,f,{className:g,style:Th(Th({color:i.color||n.color},n.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&Wi.createElement("title",null,u),i.children)};return P_!==void 0?Wi.createElement(P_.Consumer,null,n=>e(n)):e(Cb)}function GI(i){return HI({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(i)}function $I(){const{signInWithGoogle:i}=ui(),e=_o(),n=async()=>{try{await i(),e("/dashboard")}catch(s){console.error("Error signing in with Google:",s)}};return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:v.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-xl shadow-lg",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Welcome to Cost Genie"}),v.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Track your expenses and understand their impact on your income"})]}),v.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[v.jsx(GI,{className:"h-5 w-5 mr-2"}),"Sign in with Google"]})]})})}const Ib={Alabama:5,Alaska:0,Arizona:2.5,Arkansas:4.4,California:13.3,Colorado:4.4,Connecticut:6.99,Delaware:6.6,Florida:0,Georgia:5.39,Hawaii:11,Idaho:5.8,Illinois:4.95,Indiana:3.05,Iowa:6,Kansas:5.7,Kentucky:5,Louisiana:4.25,Maine:7.15,Maryland:5.75,Massachusetts:5,Michigan:4.25,Minnesota:9.85,Mississippi:5,Missouri:5.4,Montana:6.75,Nebraska:6.84,Nevada:0,"New Hampshire":0,"New Jersey":10.75,"New Mexico":5.9,"New York":10.9,"North Carolina":4.5,"North Dakota":2.9,Ohio:3.99,Oklahoma:5,Oregon:9.9,Pennsylvania:3.07,"Rhode Island":5.99,"South Carolina":7,"South Dakota":0,Tennessee:0,Texas:0,Utah:4.55,Vermont:8.75,Virginia:5.75,Washington:0,"West Virginia":6.5,Wisconsin:7.65,Wyoming:0},QI=12,YI=7.65;function ai(i,e){const n=Ib[i];if(n===void 0)return null;const s=e*(n/100),o=e*(QI/100),u=e*(YI/100);return e-s-o-u}function Db(){return Object.keys(Ib)}function KI(){const{currentUser:i}=ui(),e=_o(),[n,s]=z.useState(""),[o,u]=z.useState(""),[f,m]=z.useState(null),[g,p]=z.useState(!0),[T,x]=z.useState(""),R=Db();z.useEffect(()=>{(async()=>{if(i)try{const q=await ds(i.uid);if(q){if(s(q.yearlySalary.toString()),u(q.state||""),q.state&&q.yearlySalary){const U=ai(q.state,q.yearlySalary);m(U)}e("/dashboard")}}catch(q){console.error("Error loading profile:",q)}finally{p(!1)}})()},[i,e]),z.useEffect(()=>{if(n&&o){const V=Number(n);if(!isNaN(V)&&V>0){const q=ai(o,V);m(q)}else m(null)}else m(null)},[n,o]);const P=async V=>{if(V.preventDefault(),!!i){if(!o){x("Please select your state.");return}try{x(""),await kI(i,Number(n),o),e("/dashboard")}catch(q){console.error("Error saving profile:",q),x("Failed to save profile. Please try again.")}}};return g?v.jsx("div",{children:"Loading..."}):v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Complete Your Profile"}),v.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your yearly salary and state to get started"})]}),v.jsxs("form",{className:"mt-8 space-y-6",onSubmit:P,children:[T&&v.jsx("div",{className:"text-red-600 text-center",children:T}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"yearly-salary",className:"block text-sm font-medium text-gray-700",children:"Yearly Salary (Gross)"}),v.jsx("input",{id:"yearly-salary",name:"salary",type:"number",required:!0,className:"mt-1 appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Enter your yearly salary",value:n,onChange:V=>s(V.target.value)})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"State"}),v.jsxs("select",{id:"state",name:"state",required:!0,className:"mt-1 appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",value:o,onChange:V=>u(V.target.value),children:[v.jsx("option",{value:"",children:"Select your state"}),R.map(V=>v.jsx("option",{value:V,children:V},V))]})]}),f!==null&&v.jsxs("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-200",children:[v.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Estimated After-Tax Income:"}),v.jsxs("p",{className:"mt-1 text-lg font-bold text-blue-900",children:["$",f.toFixed(2)]}),v.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"*This is a simplified estimate based on state income tax only. Federal taxes, deductions, and credits are not included."})]})]}),v.jsx("div",{children:v.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save Profile"})})]})]})})}const kb=({financialData:i,compact:e=!1,maxRecommendations:n})=>{const o=(()=>{const{spending:p}=i,T=[];if(p.combined.percentage>90?T.push({id:"critical-spending",type:"danger",title:"Critical spending level",description:"Your expenses are extremely high relative to your income, leaving little room for savings or emergencies.",action:"Look for immediate ways to reduce expenses or increase income."}):p.combined.percentage>80?T.push({id:"high-spending",type:"danger",title:"High spending level",description:"Your expenses are very high relative to your income.",action:"Consider reducing non-essential spending and creating a budget."}):p.combined.percentage<50&&T.push({id:"healthy-saving",type:"success",title:"Healthy saving habits",description:"Your spending is below 50% of your income, which is great for saving and investing!",action:"Consider putting the extra money into emergency funds, retirement accounts, or investments."}),p.needs.percentage>50?T.push({id:"high-essentials",type:"warning",title:"High essential costs",description:"Essential needs exceed 50% of your income.",action:"Look for ways to reduce essential costs where possible, such as refinancing, finding better deals, or downsizing."}):p.needs.percentage<20&&p.needs.count>0&&T.push({id:"low-essentials",type:"success",title:"Low essential costs",description:"Your essential costs are well-managed at less than 20% of your income.",action:"Great job keeping essentials low! This gives you flexibility for other financial goals."}),p.favorites.percentage>30&&T.push({id:"high-discretionary",type:"warning",title:"High discretionary spending",description:"Your favorite expenses take up a significant portion of your income.",action:"Consider prioritizing which favorite expenses are most important to you."}),p.needs.count===0&&T.push({id:"track-essentials",type:"info",title:"Track essential expenses",description:"You haven't marked any expenses as essential needs.",action:"Mark your regular essential expenses like rent, utilities, and groceries as needs for better tracking."}),p.needs.count>0&&p.favorites.count>0&&T.push({id:"budget-rule",type:"info",title:"Consider the 50/30/20 budget rule",description:"Financial experts often recommend spending 50% on needs, 30% on wants, and saving 20% of your income.",action:"Compare your spending patterns to this guideline to see if adjustments would help."}),n&&T.length>n){const x={danger:0,warning:1,info:2,success:3};return T.sort((R,P)=>x[R.type]-x[P.type]),T.slice(0,n)}return T})();if(o.length===0)return null;const u=p=>{switch(p){case"success":return v.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"warning":return v.jsx("svg",{className:"w-5 h-5 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"danger":return v.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":default:return v.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}},f=p=>{switch(p){case"success":return"bg-green-50 dark:bg-green-900/20";case"warning":return"bg-orange-50 dark:bg-orange-900/20";case"danger":return"bg-red-50 dark:bg-red-900/20";case"info":default:return"bg-blue-50 dark:bg-blue-900/20"}},m=p=>{switch(p){case"success":return"border-green-400 dark:border-green-700";case"warning":return"border-orange-400 dark:border-orange-700";case"danger":return"border-red-400 dark:border-red-700";case"info":default:return"border-blue-400 dark:border-blue-700"}},g=p=>{switch(p){case"success":return"text-green-800 dark:text-green-300";case"warning":return"text-orange-800 dark:text-orange-300";case"danger":return"text-red-800 dark:text-red-300";case"info":default:return"text-blue-800 dark:text-blue-300"}};return e?v.jsx("div",{className:"space-y-2",children:o.map(p=>v.jsxs("div",{className:"flex items-start",children:[v.jsx("div",{className:"mt-0.5 mr-2",children:u(p.type)}),v.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:p.description})]},p.id))}):v.jsxs("div",{className:"space-y-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Financial Recommendations"}),o.map(p=>v.jsx("div",{className:`p-4 rounded-lg border-l-4 ${f(p.type)} ${m(p.type)}`,children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:u(p.type)}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:`text-sm font-medium ${g(p.type)}`,children:p.title}),v.jsx("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:v.jsx("p",{children:p.description})}),p.action&&v.jsx("div",{className:"mt-2",children:v.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[v.jsx("span",{className:"font-semibold",children:"Suggestion:"})," ",p.action]})})]})]})},p.id))]})},Yh=({costAnalysis:i,afterTaxIncome:e,frequency:n})=>{const s=o=>n===o?"bg-blue-100 dark:bg-blue-900/40 border border-blue-500 dark:border-blue-400":"";return v.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[v.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Cost Analysis",v.jsxs("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400 ml-2",children:["(% of ",e!==void 0?"after-tax":"gross"," income)"]})]}),v.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[v.jsxs("div",{className:s("once"),children:[v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"One-time Cost"}),v.jsxs("p",{className:"text-sm font-semibold dark:text-white",children:["$",i.oneTime.amount.toFixed(2),v.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 ml-1",children:["(",i.oneTime.percentage.toFixed(3),"% of yearly income)"]})]})]}),v.jsxs("div",{className:s("weekly"),children:[v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Every Week"}),v.jsxs("p",{className:"text-sm font-semibold dark:text-white",children:["$",i.weekly.amount.toFixed(2),v.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 ml-1",children:["(",i.weekly.percentage.toFixed(3),"% of yearly income)"]})]})]}),v.jsxs("div",{className:s("monthly"),children:[v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Every Month"}),v.jsxs("p",{className:"text-sm font-semibold dark:text-white",children:["$",i.monthly.amount.toFixed(2),v.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 ml-1",children:["(",i.monthly.percentage.toFixed(3),"% of yearly income)"]})]})]}),v.jsxs("div",{className:s("daily"),children:[v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Every Day"}),v.jsxs("p",{className:"text-sm font-semibold dark:text-white",children:["$",i.daily.amount.toFixed(2),v.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 ml-1",children:["(",i.daily.percentage.toFixed(3),"% of yearly income)"]})]})]})]})})]})};function Kh(i,e,n){const s=i,o=i*365,u=i*52,f=i*12,m=i*3,g=f,p=typeof n=="number"?n:e,T=s/p*100,x=o/p*100,R=u/p*100,P=f/p*100,V=m/p*100,q=g/p*100;return{oneTime:{amount:s,percentage:T},daily:{amount:o,percentage:x},weekly:{amount:u,percentage:R},monthly:{amount:f,percentage:P},everyFourMonths:{amount:m,percentage:V},yearly:{amount:g,percentage:q}}}function XI(){const{currentUser:i}=ui(),e=_o(),[n,s]=z.useState(null),[o,u]=z.useState(""),[f,m]=z.useState(""),[g,p]=z.useState("monthly"),[T,x]=z.useState(null),[R,P]=z.useState(null),[V,q]=z.useState(!0),[U,$]=z.useState(void 0),[W,K]=z.useState(!1),[Z,J]=z.useState(!1),[se,k]=z.useState(0),[C,b]=z.useState(0),[A,D]=z.useState(0),[O,N]=z.useState(0),[Ge,Ce]=z.useState(0),oe=()=>{u(""),m(""),p("monthly"),K(!1),J(!1)};z.useEffect(()=>{(async()=>{try{if(!i){e("/login");return}const M=await ds(i.uid);if(!M){e("/profile/setup");return}if(s(M),P(null),M&&M.state){const ie=ai(M.state,M.yearlySalary);$(typeof ie=="number"?ie:void 0)}}catch(M){P("Unable to load your profile. Please check your internet connection."),console.error("Error loading profile:",M)}finally{q(!1)}})()},[i,e]),z.useEffect(()=>{(async()=>{if(!(!i||!n))try{const M=na(us(on,"costs"),wn("userId","==",i.uid),wn("need","==",!0)),ie=na(us(on,"costs"),wn("userId","==",i.uid),wn("favorite","==",!0)),[de,ue]=await Promise.all([ra(M),ra(ie)]),le=de.docs.map(it=>({...it.data(),id:it.id})),Re=ue.docs.map(it=>({...it.data(),id:it.id})),we=it=>it.reduce((Wt,Zt)=>{const ln=Number(Zt.amount);switch(Zt.frequency){case"daily":return Wt+ln*365;case"weekly":return Wt+ln*52;case"monthly":return Wt+ln*12;case"yearly":return Wt+ln;default:return Wt+ln}},0),rt=we(le),Pe=we(Re),tt=rt+Pe;k(rt),b(le.length),D(Pe),N(Re.length);const $e=typeof U=="number"?U:n.yearlySalary;Ce(tt/$e*100)}catch(M){console.error("Error loading financial overview:",M)}})()},[i,n,U]);const ve=async Ae=>{if(Ae.preventDefault(),!(!i||!n))try{const M=Number(o),ie=Kh(M,n.yearlySalary,U);x(ie),await MI({userId:i.uid,amount:M,description:f,frequency:g,favorite:W,need:Z}),oe(),P(null)}catch(M){P("Failed to save cost entry. Please check your internet connection."),console.error("Error saving cost entry:",M)}};if(V)return v.jsx("div",{className:"text-center py-8",children:"Loading..."});if(!n)return v.jsx("div",{className:"text-center py-8",children:"Profile not found. Please complete your profile setup."});const ge=()=>{if(!n)return null;const Ae=typeof U=="number"?U:n.yearlySalary;return{income:{yearly:n.yearlySalary,monthly:n.yearlySalary/12,afterTax:U||void 0},spending:{needs:{total:se,percentage:se/Ae*100,count:C},favorites:{total:A,percentage:A/Ae*100,count:O},combined:{total:se+A,percentage:Ge}}}};return v.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow px-5 py-6 sm:px-6",children:[R&&v.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded relative mb-4",role:"alert",children:v.jsx("span",{className:"block sm:inline",children:R})}),v.jsxs("div",{className:"mb-8",children:[v.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Calculate Cost Impact"}),v.jsxs("form",{onSubmit:ve,className:"space-y-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),v.jsx("input",{type:"text",value:f,onChange:Ae=>m(Ae.target.value),placeholder:"What are you spending money on?",className:"mt-1 p-2 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 dark:bg-gray-700 dark:text-white sm:text-sm transition-colors duration-200",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount"}),v.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx("span",{className:"text-gray-500 dark:text-gray-400 sm:text-sm",children:"$"})}),v.jsx("input",{type:"number",value:o,onChange:Ae=>u(Ae.target.value),placeholder:"0.00",className:"pl-7 p-2 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 dark:bg-gray-700 dark:text-white sm:text-sm transition-colors duration-200",required:!0})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frequency"}),v.jsxs("select",{value:g,onChange:Ae=>p(Ae.target.value),className:"mt-1 block p-2 w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 dark:bg-gray-700 dark:text-white sm:text-sm transition-colors duration-200",children:[v.jsx("option",{value:"once",children:"One-time"}),v.jsx("option",{value:"daily",children:"Daily"}),v.jsx("option",{value:"weekly",children:"Weekly"}),v.jsx("option",{value:"monthly",children:"Monthly"}),v.jsx("option",{value:"yearly",children:"Yearly"})]})]}),v.jsxs("div",{className:"space-y-3 mt-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:" p-1 rounded",children:v.jsx("input",{type:"radio",id:"favorite",name:"preference",value:"favorite",checked:W,onChange:()=>{K(!0),J(!1)},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 rounded dark:bg-gray-700 dark:border-transparent transition-colors duration-200"})}),v.jsx("label",{htmlFor:"favorite",className:"ml-3 block text-sm text-gray-700 dark:text-gray-300",children:"Mark as Want"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"p-1 rounded",children:v.jsx("input",{type:"radio",id:"need",name:"preference",value:"need",checked:Z,onChange:()=>{K(!1),J(!0)},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 rounded dark:bg-gray-700 dark:border-transparent transition-colors duration-200"})}),v.jsx("label",{htmlFor:"need",className:"ml-3 block text-sm text-gray-700 dark:text-gray-300",children:"Mark as Need"})]})]}),v.jsx("div",{className:"pt-2",children:v.jsxs("button",{type:"submit",className:"w-full inline-flex justify-center items-center py-2.5 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Calculate Impact"]})})]})]}),n&&C+O>0&&v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/30 px-5 py-6 mb-6 border border-gray-100 dark:border-gray-700",children:[v.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:"Quick Financial Tips"}),ge()&&v.jsx(kb,{financialData:ge(),compact:!0,maxRecommendations:3}),v.jsx("div",{className:"mt-4 text-right",children:v.jsx(Tn,{to:"/summary",className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 text-sm font-medium",children:"View full financial summary →"})})]}),T&&v.jsxs("div",{className:"mt-8",children:[v.jsx("h3",{className:"text-xl font-bold mb-4 dark:text-white",children:"Cost Analysis"}),v.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[v.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:["Percentages are calculated based on your ",U!==void 0?"after-tax":"gross"," income."]}),v.jsx(Yh,{frequency:g,costAnalysis:T,afterTaxIncome:U})]})]})]})})})}const WI=()=>{const i=oi(),e=n=>i.pathname===n;return v.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 shadow-lg",children:v.jsx("div",{className:"max-w-screen-xl mx-auto px-4",children:v.jsxs("div",{className:"flex justify-around items-center h-16",children:[v.jsxs(Tn,{to:"/",className:`flex flex-col items-center ${e("/")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),v.jsx("span",{className:"text-xs mt-1",children:"Home"})]}),v.jsxs(Tn,{to:"/history",className:`flex flex-col items-center ${e("/history")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),v.jsx("span",{className:"text-xs mt-1",children:"History"})]}),v.jsxs(Tn,{to:"/summary",className:`flex flex-col items-center ${e("/summary")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),v.jsx("span",{className:"text-xs mt-1",children:"Summary"})]}),v.jsxs(Tn,{to:"/favorites",className:`flex flex-col items-center ${e("/favorites")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),v.jsx("span",{className:"text-xs mt-1",children:"Wants"})]}),v.jsxs(Tn,{to:"/needs",className:`flex flex-col items-center ${e("/needs")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),v.jsx("span",{className:"text-xs mt-1",children:"Needs"})]}),v.jsxs(Tn,{to:"/settings",className:`flex flex-col items-center ${e("/settings")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[v.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),v.jsx("span",{className:"text-xs mt-1",children:"Settings"})]})]})})})},ZI=()=>{const[i,e]=z.useState([]),[n,s]=z.useState(!0),[o,u]=z.useState(null),[f,m]=z.useState(null),[g,p]=z.useState(null),[T,x]=z.useState(null),[R,P]=z.useState(""),[V,q]=z.useState(void 0),{currentUser:U}=ui();z.useEffect(()=>{(async()=>{if(U)try{s(!0);const A=await ds(U.uid);if(u(A),A&&A.state){const Ce=ai(A.state,A.yearlySalary);q(Ce??void 0)}const D=us(on,"costs"),O=na(D,wn("userId","==",U.uid),tu("createdAt","desc")),Ge=(await ra(O)).docs.map(Ce=>({id:Ce.id,...Ce.data(),date:Ce.data().createdAt.toDate()}));e(Ge)}catch(A){console.error("Error fetching costs:",A)}finally{s(!1)}})()},[U]);const $=async(b,A=!1)=>{if(U)try{await xb(b,!A),e(D=>D.map(O=>O.id===b?{...O,favorite:!A}:O))}catch(D){console.error("Error toggling favorite:",D)}},W=async(b,A=!1)=>{if(U)try{await Ab(b,!A),e(D=>D.map(O=>O.id===b?{...O,need:!A}:O))}catch(D){console.error("Error toggling need status:",D)}},K=async(b,A)=>{if(A.stopPropagation(),!(!U||g)&&window.confirm("Are you sure you want to delete this cost entry?"))try{p(b),await $g(b),e(D=>D.filter(O=>O.id!==b)),f===b&&m(null)}catch(D){console.error("Error deleting cost entry:",D),alert("Failed to delete cost entry. Please try again.")}finally{p(null)}},Z=b=>{m(f===b?null:b)},J=(b,A,D)=>{D.stopPropagation(),x(b),P(A)},se=b=>{P(b.target.value)},k=async(b,A)=>{if(A.stopPropagation(),!(!U||!R))try{await VI(b,{frequency:R}),e(D=>D.map(O=>O.id===b?{...O,frequency:R}:O)),x(null)}catch(D){console.error("Error updating frequency:",D),alert("Failed to update frequency. Please try again.")}},C=b=>{b.stopPropagation(),x(null)};return n?v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v.jsxs("div",{className:"container mx-auto px-4 py-6",children:[v.jsx("h1",{className:"text-2xl font-bold mb-6 dark:text-white",children:"Cost History"}),V!==void 0&&v.jsxs("div",{className:"mb-4 text-sm text-gray-600 dark:text-gray-300 bg-blue-50 dark:bg-blue-900 p-2 rounded",children:["Percentages are calculated using your after-tax income of $",V.toLocaleString(),"when available."]}),i.length===0?v.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8",children:"No costs recorded yet"}):v.jsx("div",{className:"space-y-4",children:i.map(b=>{const A=o?Kh(b.amount,o.yearlySalary,V):null,D=f===b.id,O=g===b.id;return v.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow p-4 
                  ${b.favorite?"border-l-4 border-yellow-400":""}
                  ${b.need?"border-r-4 border-indigo-400":""}
                  ${O?"opacity-50":""}`,children:[v.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>Z(b.id),children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:N=>{N.stopPropagation(),$(b.id,b.favorite)},className:"mr-1 focus:outline-none",disabled:O,children:b.favorite?v.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}):v.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-gray-500 hover:text-yellow-500",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),v.jsx("button",{onClick:N=>{N.stopPropagation(),W(b.id,b.need)},className:"mr-1 focus:outline-none",disabled:O,children:b.need?v.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}):v.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-gray-500 hover:text-indigo-500",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),v.jsx("button",{onClick:N=>K(b.id,N),className:"mr-2 focus:outline-none text-gray-400 dark:text-gray-500 hover:text-red-500",disabled:O,"aria-label":"Delete",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium dark:text-white",children:b.description}),v.jsx("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mt-1",children:T===b.id?v.jsxs("div",{className:"flex items-center",onClick:N=>N.stopPropagation(),children:[v.jsxs("select",{value:R,onChange:se,className:"mr-2 text-sm border border-gray-300 dark:border-gray-600 rounded px-1 py-0.5 dark:bg-gray-700 dark:text-white",children:[v.jsx("option",{value:"once",children:"One-time"}),v.jsx("option",{value:"daily",children:"Daily"}),v.jsx("option",{value:"weekly",children:"Weekly"}),v.jsx("option",{value:"monthly",children:"Monthly"}),v.jsx("option",{value:"yearly",children:"Yearly"})]}),v.jsx("button",{onClick:N=>k(b.id,N),className:"text-green-600 dark:text-green-400 text-sm mr-1",children:"Save"}),v.jsx("button",{onClick:C,className:"text-gray-600 dark:text-gray-400 text-sm",children:"Cancel"})]}):v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"cursor-pointer hover:text-indigo-600 dark:hover:text-indigo-400 hover:underline",onClick:N=>J(b.id,b.frequency,N),children:b.frequency}),v.jsx("span",{className:"mx-2",children:"•"}),v.jsx("span",{children:b.date.toLocaleDateString()})]})})]})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium mr-2",children:["$",b.amount.toFixed(2)]}),v.jsx("svg",{className:`w-5 h-5 text-gray-400 dark:text-gray-500 transform transition-transform ${D?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),D&&A&&v.jsx(Yh,{frequency:b.frequency,costAnalysis:A,afterTaxIncome:V})]},b.id)})})]})},Ob=i=>{localStorage.setItem("theme",i),i==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):i==="light"?(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark")):(document.documentElement.classList.remove("light"),document.documentElement.classList.remove("dark"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.add("light"))},qm=()=>localStorage.getItem("theme")||"system",JI=()=>{const i=qm();Ob(i),i==="system"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{qm()==="system"&&(e.matches?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark")))})},eD=()=>{const{currentUser:i,logout:e}=ui(),n=_o(),[s,o]=z.useState({defaultState:"",theme:qm(),showTaxDetails:!0,saveHistory:!0}),[u,f]=z.useState(null),[m,g]=z.useState(""),[p,T]=z.useState(null),[x,R]=z.useState(!0),[P,V]=z.useState(!1),[q,U]=z.useState(null),[$,W]=z.useState(""),K=Db();z.useEffect(()=>{(async()=>{if(i)try{R(!0);const O=await ds(i.uid);if(f(O),O&&(g(O.state||""),W(O.yearlySalary.toString()),O.state&&O.yearlySalary)){const Ge=ai(O.state,O.yearlySalary);T(Ge)}const N=localStorage.getItem("costGenieSettings");N&&o(Ge=>({...Ge,...JSON.parse(N)}))}catch(O){console.error("Error loading user profile:",O),U("Failed to load your profile. Please try again.")}finally{R(!1)}})()},[i]),z.useEffect(()=>{if(u&&m&&$){const D=Number($);if(!isNaN(D)&&D>0){const O=ai(m,D);T(O)}else T(null)}},[m,u,$]);const Z=D=>{const{name:O,value:N,type:Ge}=D.target,Ce=D.target.checked;O==="theme"&&Ob(N),o({...s,[O]:Ge==="checkbox"?Ce:N})},J=D=>{g(D.target.value)},se=D=>{D.preventDefault(),localStorage.setItem("costGenieSettings",JSON.stringify(s)),V(!0),setTimeout(()=>V(!1),3e3)},k=async D=>{if(D.preventDefault(),!(!i||!u))try{R(!0),V(!1),U(null);const O=Number($);if(isNaN(O)||O<=0){U("Please enter a valid yearly salary.");return}await OI(i.uid,{state:m,yearlySalary:O}),f(N=>N?{...N,yearlySalary:O,userId:N.userId}:null),V(!0),setTimeout(()=>V(!1),3e3)}catch(O){console.error("Error updating profile:",O),U("Failed to update your profile. Please try again.")}finally{R(!1)}},C=async()=>{try{e&&await e(),await eh.signOut(),n("/login")}catch(D){U("Failed to log out. Please try again."),console.error("Error logging out:",D)}};if(x&&!u)return v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const b=u&&p?u.yearlySalary-p:null,A=b&&u?b/u.yearlySalary*100:null;return v.jsxs("div",{className:"max-w-3xl mx-auto p-5 bg-gray-100 rounded-lg shadow-md dark:bg-gray-800 dark:text-gray-200",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold",children:"Settings"}),v.jsx("button",{onClick:C,className:"bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-md transition duration-300","aria-label":"Log out from your account",children:"Logout"})]}),P&&v.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:v.jsx("span",{className:"block sm:inline",children:"Settings saved successfully!"})}),q&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:v.jsx("span",{className:"block sm:inline",children:q})}),u&&v.jsxs("div",{className:"mb-8 p-5 bg-white rounded-lg shadow-sm dark:bg-gray-700",children:[v.jsx("h3",{className:"text-xl font-semibold mb-4 dark:text-gray-300",children:"Your Income Summary"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg dark:bg-gray-800",children:[v.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Gross Yearly Income"}),v.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",u.yearlySalary.toLocaleString()]}),v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["$",(u.yearlySalary/12).toLocaleString()," monthly"]})]}),v.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg dark:bg-blue-900",children:[v.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:["After-Tax Income (",u.state||"No state selected",")"]}),p?v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200",children:["$",p.toLocaleString()]}),v.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-300 mt-1",children:["$",(p/12).toLocaleString()," monthly"]})]}):v.jsx("p",{className:"text-lg font-medium text-blue-700 dark:text-blue-300",children:"Select a state to calculate"})]})]}),b&&A&&v.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:[v.jsxs("p",{className:"text-sm",children:[v.jsx("span",{className:"font-medium",children:"State Tax Impact:"})," You pay approximately $",b.toLocaleString(),"in taxes (",A.toFixed(3),"% of your income)"]}),v.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"*Estimate based on state income tax only. Federal taxes and other deductions not included."})]})]}),v.jsxs("div",{className:"mb-8 p-5 bg-white rounded-lg shadow-sm dark:bg-gray-700",children:[v.jsx("h3",{className:"text-xl font-semibold mb-4 dark:text-gray-300",children:"Update Your Profile"}),v.jsxs("form",{onSubmit:k,children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{htmlFor:"yearlySalary",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Yearly Salary"}),v.jsx("input",{type:"number",id:"yearlySalary",name:"yearlySalary",value:$,onChange:D=>W(D.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",required:!0})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{htmlFor:"userState",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Your State"}),v.jsxs("select",{id:"userState",name:"userState",value:m,onChange:J,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",children:[v.jsx("option",{value:"",children:"Select a state"}),K.map(D=>v.jsx("option",{value:D,children:D},D))]})]}),v.jsx("button",{type:"submit",className:"mt-4 bg-blue-600 text-white py-2 px-4 rounded cursor-pointer text-base transition duration-300 hover:bg-blue-700 disabled:opacity-50",disabled:x,children:x?"Saving...":"Save Profile Changes"})]})]}),v.jsxs("div",{className:"mb-8 border-b border-gray-200 pb-5 dark:border-gray-700",children:[v.jsx("h3",{className:"text-xl font-semibold mb-4 dark:text-gray-300",children:"Application Preferences"}),v.jsxs("form",{onSubmit:se,children:[v.jsxs("div",{className:"flex items-center mb-4",children:[v.jsx("label",{htmlFor:"defaultState",className:"w-36 font-medium dark:text-gray-300",children:"Default State:"}),v.jsxs("select",{id:"defaultState",name:"defaultState",value:s.defaultState,onChange:Z,className:"p-2 border border-gray-300 rounded w-64 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",children:[v.jsx("option",{value:"",children:"Select a default state"}),K.map(D=>v.jsx("option",{value:D,children:D},D))]})]}),v.jsxs("div",{className:"flex items-center mb-4",children:[v.jsx("label",{htmlFor:"theme",className:"w-36 font-medium dark:text-gray-300",children:"Theme:"}),v.jsxs("select",{id:"theme",name:"theme",value:s.theme,onChange:Z,className:"p-2 border border-gray-300 rounded w-64 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",children:[v.jsx("option",{value:"light",children:"Light"}),v.jsx("option",{value:"dark",children:"Dark"}),v.jsx("option",{value:"system",children:"System Default"})]})]}),v.jsxs("div",{className:"flex items-center mb-4",children:[v.jsx("input",{type:"checkbox",id:"showTaxDetails",name:"showTaxDetails",checked:s.showTaxDetails,onChange:Z,className:"mr-2 h-4 w-4"}),v.jsx("label",{htmlFor:"showTaxDetails",className:"font-medium dark:text-gray-300",children:"Show detailed tax breakdown"})]}),v.jsxs("div",{className:"flex items-center mb-4",children:[v.jsx("input",{type:"checkbox",id:"saveHistory",name:"saveHistory",checked:s.saveHistory,onChange:Z,className:"mr-2 h-4 w-4"}),v.jsx("label",{htmlFor:"saveHistory",className:"font-medium dark:text-gray-300",children:"Save calculation history"})]}),v.jsx("button",{type:"submit",className:"bg-green-500 text-white py-2 px-4 rounded cursor-pointer text-base transition duration-300 hover:bg-green-600 dark:bg-green-600 dark:hover:bg-green-700",children:"Save App Settings"})]})]})]})},tD=()=>{const[i,e]=z.useState([]),[n,s]=z.useState(!0),[o,u]=z.useState(null),[f,m]=z.useState(null),[g,p]=z.useState(null),{currentUser:T}=ui(),[x,R]=z.useState(0),[P,V]=z.useState(0),[q,U]=z.useState(void 0);z.useEffect(()=>{(async()=>{if(T)try{s(!0);const J=await ds(T.uid);if(u(J),J&&J.state){const A=ai(J.state,J.yearlySalary);U(A??void 0)}const se=us(on,"costs"),k=na(se,wn("userId","==",T.uid),wn("favorite","==",!0),tu("createdAt","desc")),b=(await ra(k)).docs.map(A=>({id:A.id,...A.data(),date:A.data().createdAt.toDate()}));e(b)}catch(J){console.error("Error fetching favorites:",J)}finally{s(!1)}})()},[T]),z.useEffect(()=>{if(!o||i.length===0)return;(()=>{let J=0;i.forEach(se=>{switch(se.frequency){case"once":J+=se.amount;break;case"daily":J+=se.amount*365;break;case"weekly":J+=se.amount*52;break;case"monthly":J+=se.amount*12;break;case"yearly":J+=se.amount;break}}),R(J),V(q!==void 0?J/q*100:J/o.yearlySalary*100)})()},[i,o,q]);const $=async(Z,J=!0)=>{if(T)try{await xb(Z,!J),J&&e(se=>se.filter(k=>k.id!==Z))}catch(se){console.error("Error toggling favorite:",se)}},W=async(Z,J)=>{if(J.stopPropagation(),!(!T||g)&&window.confirm("Are you sure you want to delete this cost entry?"))try{p(Z),await $g(Z),e(se=>se.filter(k=>k.id!==Z)),f===Z&&m(null)}catch(se){console.error("Error deleting cost entry:",se),alert("Failed to delete cost entry. Please try again.")}finally{p(null)}},K=Z=>{m(f===Z?null:Z)};return n?v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v.jsxs("div",{className:"container mx-auto px-4 py-6",children:[v.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Favorites"}),q!==void 0&&v.jsx("div",{className:"mb-4 text-sm bg-blue-50 dark:bg-blue-900 p-2 rounded border-l-2 border-blue-300 dark:border-blue-700",children:v.jsxs("p",{className:"text-gray-700 dark:text-gray-200",children:["Note: Percentages are calculated based on your after-tax income of ",v.jsxs("strong",{children:["$",q.toLocaleString()]}),"."]})}),i.length>0&&o&&v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-5 mb-6 border-l-4 border-blue-500",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:"Total Cost Impact"}),v.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Yearly Total"}),v.jsxs("p",{className:"text-xl font-bold text-blue-700",children:["$",x.toFixed(2)]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Average"}),v.jsxs("p",{className:"text-xl font-bold text-blue-700",children:["$",(x/12).toFixed(2)]})]}),q!==void 0&&v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"After-Tax Income (State)"}),v.jsxs("p",{className:"text-xl font-bold text-blue-700",children:["$",q.toLocaleString()]})]}),v.jsxs("div",{className:"md:ml-auto",children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Percentage of Income"}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-xl font-bold text-blue-700",children:[P.toFixed(3),"%"]}),v.jsx("div",{className:"ml-2 h-4 w-24 bg-gray-200 rounded-full overflow-hidden",children:v.jsx("div",{className:`h-full rounded-full ${P>20?"bg-red-500":"bg-green-500"}`,style:{width:`${Math.min(100,P)}%`}})})]})]})]}),P>20&&v.jsxs("p",{className:"mt-3 text-sm text-red-600",children:[v.jsx("svg",{className:"inline-block w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"These favorites represent over 20% of your yearly income"]})]}),i.length===0?v.jsxs("div",{className:"text-center mt-8",children:[v.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No favorite items yet"}),v.jsx(Tn,{to:"/history",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 underline",children:"Go to history to mark items as favorites"})]}):v.jsx("div",{className:"space-y-4",children:i.map(Z=>{const J=o?Kh(Z.amount,o.yearlySalary,q):null,se=f===Z.id,k=g===Z.id;return v.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow p-4 border-l-4 border-yellow-400 ${k?"opacity-50":""}`,children:[v.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>K(Z.id),children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:C=>{C.stopPropagation(),$(Z.id,Z.favorite)},className:"mr-1 focus:outline-none",disabled:k,children:v.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),v.jsx("button",{onClick:C=>W(Z.id,C),className:"mr-2 focus:outline-none text-gray-400 hover:text-red-500",disabled:k,"aria-label":"Delete",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium",children:Z.description}),v.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[v.jsx("span",{children:Z.frequency}),v.jsx("span",{className:"mx-2",children:"•"}),v.jsx("span",{children:Z.date.toLocaleDateString()})]})]})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("span",{className:"text-green-600 font-medium mr-2",children:["$",Z.amount.toFixed(2)]}),v.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${se?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),se&&J&&v.jsx(Yh,{frequency:Z.frequency,costAnalysis:J,afterTaxIncome:q})]},Z.id)})})]})},nD=()=>{const[i,e]=z.useState([]),[n,s]=z.useState(!0),[o,u]=z.useState(null),[f,m]=z.useState(null),[g,p]=z.useState(null),{currentUser:T}=ui(),[x,R]=z.useState(0),[P,V]=z.useState(0),[q,U]=z.useState(void 0);z.useEffect(()=>{(async()=>{if(T)try{s(!0);const J=await ds(T.uid);if(u(J),J&&J.state){const A=ai(J.state,J.yearlySalary);U(A??void 0)}const se=us(on,"costs"),k=na(se,wn("userId","==",T.uid),wn("need","==",!0),tu("createdAt","desc")),b=(await ra(k)).docs.map(A=>({id:A.id,...A.data(),date:A.data().createdAt.toDate()}));e(b)}catch(J){console.error("Error fetching needs:",J)}finally{s(!1)}})()},[T]),z.useEffect(()=>{if(!o||i.length===0)return;(()=>{let J=0;i.forEach(se=>{switch(se.frequency){case"once":J+=se.amount;break;case"daily":J+=se.amount*365;break;case"weekly":J+=se.amount*52;break;case"monthly":J+=se.amount*12;break;case"yearly":J+=se.amount;break}}),R(J),q!==void 0&&V(J/q*100)})()},[i,o,q]);const $=async(Z,J=!0)=>{if(T)try{await Ab(Z,!J),J&&e(se=>se.filter(k=>k.id!==Z))}catch(se){console.error("Error toggling need status:",se)}},W=async(Z,J)=>{if(J.stopPropagation(),!(!T||g)&&window.confirm("Are you sure you want to delete this cost entry?"))try{p(Z),await $g(Z),e(se=>se.filter(k=>k.id!==Z)),f===Z&&m(null)}catch(se){console.error("Error deleting cost entry:",se),alert("Failed to delete cost entry. Please try again.")}finally{p(null)}},K=Z=>{m(f===Z?null:Z)};return n?v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v.jsxs("div",{className:"container mx-auto px-4 py-6",children:[v.jsx("h1",{className:"text-2xl font-bold mb-6 dark:text-white",children:"Essential Needs"}),q!==void 0&&v.jsx("div",{className:"mb-4 text-sm bg-blue-50 dark:bg-blue-900 p-2 rounded border-l-2 border-blue-300 dark:border-blue-700",children:v.jsxs("p",{className:"text-gray-700 dark:text-gray-200",children:["Note: Percentages are calculated based on your after-tax income of ",v.jsxs("strong",{children:["$",q.toLocaleString()]}),"."]})}),i.length>0&&o&&v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-5 mb-6 border-l-4 border-indigo-500",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:"Essential Costs Summary"}),v.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Yearly Essentials"}),v.jsxs("p",{className:"text-xl font-bold text-indigo-700 dark:text-indigo-400",children:["$",x.toFixed(2)]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Average"}),v.jsxs("p",{className:"text-xl font-bold text-indigo-700 dark:text-indigo-400",children:["$",(x/12).toFixed(2)]})]}),q!==void 0&&v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"After-Tax Income"}),v.jsxs("p",{className:"text-xl font-bold text-indigo-700 dark:text-indigo-400",children:["$",q.toLocaleString()]})]}),v.jsxs("div",{className:"md:ml-auto",children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Percentage of Income"}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-xl font-bold text-indigo-700 dark:text-indigo-400",children:[P.toFixed(3),"%"]}),v.jsx("div",{className:"ml-2 h-4 w-24 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden",children:v.jsx("div",{className:`h-full rounded-full ${P>50?"bg-red-500":P>30?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,P)}%`}})})]})]})]}),P>50&&v.jsxs("p",{className:"mt-3 text-sm text-red-600 dark:text-red-400",children:[v.jsx("svg",{className:"inline-block w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Your essential costs are over 50% of your yearly income"]})]}),i.length===0?v.jsxs("div",{className:"text-center mt-8",children:[v.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No essential needs yet"}),v.jsx(Tn,{to:"/history",className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 underline",children:"Go to history to mark items as essential needs"})]}):v.jsx("div",{className:"space-y-4",children:i.map(Z=>{const J=o?Kh(Z.amount,o.yearlySalary,q):null,se=f===Z.id,k=g===Z.id;return v.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow p-4 border-l-4 border-indigo-400 ${k?"opacity-50":""}`,children:[v.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>K(Z.id),children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:C=>{C.stopPropagation(),$(Z.id,Z.need)},className:"mr-1 focus:outline-none",disabled:k,children:v.jsx("svg",{className:"w-5 h-5 text-indigo-500 dark:text-indigo-400",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})})}),v.jsx("button",{onClick:C=>W(Z.id,C),className:"mr-2 focus:outline-none text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400",disabled:k,"aria-label":"Delete",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium dark:text-white",children:Z.description}),v.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mt-1",children:[v.jsx("span",{children:Z.frequency}),v.jsx("span",{className:"mx-2",children:"•"}),v.jsx("span",{children:Z.date.toLocaleDateString()})]})]})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium mr-2",children:["$",Z.amount.toFixed(2)]}),v.jsx("svg",{className:`w-5 h-5 text-gray-400 dark:text-gray-500 transform transition-transform ${se?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),se&&J&&v.jsx(Yh,{frequency:Z.frequency,costAnalysis:J,afterTaxIncome:q})]},Z.id)})})]})},rD=()=>{const[i,e]=z.useState(null),[n,s]=z.useState(null),[o,u]=z.useState(!0),[f,m]=z.useState(null),[g,p]=z.useState(void 0),{currentUser:T}=ui();z.useEffect(()=>{(async()=>{if(T)try{u(!0),m(null);const W=await ds(T.uid);s(W);let K;if(W&&W.state){const Ce=ai(W.state,W.yearlySalary);K=Ce!==null?Ce:void 0,p(K)}const Z=na(us(on,"costs"),wn("userId","==",T.uid),wn("favorite","==",!0),tu("createdAt","desc")),J=na(us(on,"costs"),wn("userId","==",T.uid),wn("need","==",!0),tu("createdAt","desc")),[se,k]=await Promise.all([ra(Z),ra(J)]),C=se.docs.map(Ce=>({id:Ce.id,...Ce.data(),date:Ce.data().createdAt.toDate()})),b=k.docs.map(Ce=>({id:Ce.id,...Ce.data(),date:Ce.data().createdAt.toDate()})),A=x(C),D=x(b),O=A+D,N=K!==void 0?K:W?W.yearlySalary:1,Ge={favorites:{items:C,yearlyTotal:A,monthlyAverage:A/12,percentageOfIncome:A/N*100},needs:{items:b,yearlyTotal:D,monthlyAverage:D/12,percentageOfIncome:D/N*100},combined:{yearlyTotal:O,monthlyAverage:O/12,percentageOfIncome:O/N*100}};e(Ge)}catch(W){console.error("Error loading financial data:",W),m("Failed to load your financial summary. Please try again later.")}finally{u(!1)}})()},[T]);const x=$=>$.reduce((W,K)=>{switch(K.frequency){case"once":return W+K.amount;case"daily":return W+K.amount*365;case"weekly":return W+K.amount*52;case"monthly":return W+K.amount*12;case"yearly":return W+K.amount;default:return W}},0),R=()=>{if(!i||!n)return null;const{favorites:$,needs:W,combined:K}=i;return{income:{yearly:n.yearlySalary,monthly:n.yearlySalary/12,afterTax:g},spending:{needs:{total:W.yearlyTotal,percentage:W.percentageOfIncome,count:W.items.length},favorites:{total:$.yearlyTotal,percentage:$.percentageOfIncome,count:$.items.length},combined:{total:K.yearlyTotal,percentage:K.percentageOfIncome}}}};if(o)return v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(f)return v.jsx("div",{className:"container mx-auto px-4 py-6",children:v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:v.jsx("p",{children:f})})});if(!i)return v.jsxs("div",{className:"container mx-auto px-4 py-6",children:[v.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Financial Summary"}),v.jsx("p",{className:"text-gray-600",children:"No financial data available. Start by adding some favorites or needs."})]});const{favorites:P,needs:V,combined:q}=i,U=R();return v.jsxs("div",{className:"container mx-auto px-4 py-6",children:[v.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Financial Summary"}),n&&v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-5 mb-6",children:[v.jsx("h2",{className:"text-lg font-semibold mb-3 dark:text-gray-200",children:"Income Overview"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Yearly Salary (Gross)"}),v.jsxs("p",{className:"text-xl font-bold dark:text-white",children:["$",n.yearlySalary.toLocaleString()]})]}),g!==void 0&&v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"After-Tax Income (Est.)"}),v.jsxs("p",{className:"text-xl font-bold dark:text-white",children:["$",g.toLocaleString()]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Used for percentage calculations"})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Income"}),v.jsxs("p",{className:"text-xl font-bold dark:text-white",children:["$",(g!==void 0?g/12:n.yearlySalary/12).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:g!==void 0?"(After-tax)":"(Gross)"})]})]})]}),v.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg shadow p-5 mb-6 text-white",children:[v.jsxs("h2",{className:"text-lg font-semibold mb-3",children:["Total Financial Commitments",g!==void 0&&v.jsx("span",{className:"text-sm font-normal ml-2",children:"(% of after-tax income)"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm opacity-80",children:"Yearly Total"}),v.jsxs("p",{className:"text-2xl font-bold",children:["$",q.yearlyTotal.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm opacity-80",children:"Monthly Average"}),v.jsxs("p",{className:"text-2xl font-bold",children:["$",q.monthlyAverage.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm opacity-80",children:"Percentage of Income"}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-2xl font-bold",children:[q.percentageOfIncome.toFixed(3),"%"]}),v.jsx("div",{className:"ml-2 h-4 w-24 bg-white/30 rounded-full overflow-hidden",children:v.jsx("div",{className:`h-full rounded-full ${q.percentageOfIncome>80?"bg-red-500":q.percentageOfIncome>50?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,q.percentageOfIncome)}%`}})})]})]})]}),q.percentageOfIncome>80&&v.jsx("div",{className:"mt-4 p-3 bg-red-500/30 rounded-md text-white",children:v.jsxs("p",{className:"font-medium flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Your combined commitments exceed 80% of your income. Consider reviewing your expenses."]})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-5 border-l-4 border-yellow-400",children:[v.jsxs("div",{className:"flex justify-between items-center mb-3",children:[v.jsx("h2",{className:"text-lg font-semibold dark:text-gray-200",children:"Favorites"}),v.jsx(Tn,{to:"/favorites",className:"text-sm text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300",children:"View all"})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Yearly Total"}),v.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["$",P.yearlyTotal.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),v.jsxs("div",{className:"mt-3",children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Average"}),v.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["$",P.monthlyAverage.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),v.jsxs("div",{className:"mt-3",children:[v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Percentage of ",g!==void 0?"After-Tax":"Gross"," Income"]}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:[P.percentageOfIncome.toFixed(3),"%"]}),v.jsx("div",{className:"ml-2 h-3 w-24 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full rounded-full bg-yellow-500",style:{width:`${Math.min(100,P.percentageOfIncome)}%`}})})]})]}),v.jsx("div",{className:"mt-4 border-t border-gray-100 dark:border-gray-700 pt-4",children:v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[P.items.length," favorite items"]})})]}),v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-5 border-r-4 border-indigo-400",children:[v.jsxs("div",{className:"flex justify-between items-center mb-3",children:[v.jsx("h2",{className:"text-lg font-semibold dark:text-gray-200",children:"Essential Needs"}),v.jsx(Tn,{to:"/needs",className:"text-sm text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300",children:"View all"})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Yearly Total"}),v.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["$",V.yearlyTotal.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),v.jsxs("div",{className:"mt-3",children:[v.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Average"}),v.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["$",V.monthlyAverage.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),v.jsxs("div",{className:"mt-3",children:[v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Percentage of ",g!==void 0?"After-Tax":"Gross"," Income"]}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:[V.percentageOfIncome.toFixed(3),"%"]}),v.jsx("div",{className:"ml-2 h-3 w-24 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden",children:v.jsx("div",{className:`h-full rounded-full ${V.percentageOfIncome>50?"bg-red-500":V.percentageOfIncome>30?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,V.percentageOfIncome)}%`}})})]})]}),v.jsx("div",{className:"mt-4 border-t border-gray-100 dark:border-gray-700 pt-4",children:v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[V.items.length," essential items"]})})]})]}),U&&v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-5",children:v.jsx(kb,{financialData:{income:{yearly:U.income.yearly,monthly:U.income.monthly,afterTax:U.income.afterTax},spending:{needs:{total:U.spending.needs.total,percentage:U.spending.needs.percentage,count:U.spending.needs.count},favorites:{total:U.spending.favorites.total,percentage:U.spending.favorites.percentage,count:U.spending.favorites.count},combined:{total:U.spending.combined.total,percentage:U.spending.combined.percentage}}}})})]})};function $s({children:i}){const{currentUser:e,loading:n}=ui();return n?v.jsx("div",{children:"Loading..."}):e?v.jsx(v.Fragment,{children:i}):v.jsx(Y_,{to:"/login"})}function iD(){return v.jsx(RS,{children:v.jsx(PI,{children:v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsxs("main",{className:"pb-20",children:[" ",v.jsxs(iS,{children:[v.jsx(gr,{path:"/login",element:v.jsx($I,{})}),v.jsx(gr,{path:"/profile/setup",element:v.jsx($s,{children:v.jsx(KI,{})})}),v.jsx(gr,{path:"/dashboard",element:v.jsx($s,{children:v.jsx(XI,{})})}),v.jsx(gr,{path:"/history",element:v.jsx($s,{children:v.jsx(ZI,{})})}),v.jsx(gr,{path:"/favorites",element:v.jsx($s,{children:v.jsx(tD,{})})}),v.jsx(gr,{path:"/needs",element:v.jsx($s,{children:v.jsx(nD,{})})}),v.jsx(gr,{path:"/settings",element:v.jsx($s,{children:v.jsx(eD,{})})}),v.jsx(gr,{path:"/summary",element:v.jsx($s,{children:v.jsx(rD,{})})}),v.jsx(gr,{path:"/",element:v.jsx(Y_,{to:"/dashboard",replace:!0})})]})]}),v.jsx(WI,{})]})})})}JI();mw.createRoot(document.getElementById("root")).render(v.jsx(Wi.StrictMode,{children:v.jsx(iD,{})}));
